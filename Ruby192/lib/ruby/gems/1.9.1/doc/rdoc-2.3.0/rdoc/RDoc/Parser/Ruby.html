<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: RDoc::Parser::Ruby</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../lib/rdoc/parser/ruby_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/rdoc/parser/ruby.rb">lib/rdoc/parser/ruby.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link"><a href="../Parser.html">RDoc::Parser</a></p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-new">::new</a></li>
					
					<li><a href="#method-i-add_token_listener">#add_token_listener</a></li>
					
					<li><a href="#method-i-collect_first_comment">#collect_first_comment</a></li>
					
					<li><a href="#method-i-error">#error</a></li>
					
					<li><a href="#method-i-extract_call_seq">#extract_call_seq</a></li>
					
					<li><a href="#method-i-get_bool">#get_bool</a></li>
					
					<li><a href="#method-i-get_class_or_module">#get_class_or_module</a></li>
					
					<li><a href="#method-i-get_class_specification">#get_class_specification</a></li>
					
					<li><a href="#method-i-get_constant">#get_constant</a></li>
					
					<li><a href="#method-i-get_constant_with_optional_parens">#get_constant_with_optional_parens</a></li>
					
					<li><a href="#method-i-get_symbol_or_name">#get_symbol_or_name</a></li>
					
					<li><a href="#method-i-get_tk">#get_tk</a></li>
					
					<li><a href="#method-i-get_tkread">#get_tkread</a></li>
					
					<li><a href="#method-i-look_for_directives_in">#look_for_directives_in</a></li>
					
					<li><a href="#method-i-make_message">#make_message</a></li>
					
					<li><a href="#method-i-parse_alias">#parse_alias</a></li>
					
					<li><a href="#method-i-parse_attr">#parse_attr</a></li>
					
					<li><a href="#method-i-parse_attr_accessor">#parse_attr_accessor</a></li>
					
					<li><a href="#method-i-parse_call_parameters">#parse_call_parameters</a></li>
					
					<li><a href="#method-i-parse_class">#parse_class</a></li>
					
					<li><a href="#method-i-parse_comment">#parse_comment</a></li>
					
					<li><a href="#method-i-parse_constant">#parse_constant</a></li>
					
					<li><a href="#method-i-parse_include">#parse_include</a></li>
					
					<li><a href="#method-i-parse_meta_method">#parse_meta_method</a></li>
					
					<li><a href="#method-i-parse_method">#parse_method</a></li>
					
					<li><a href="#method-i-parse_method_or_yield_parameters">#parse_method_or_yield_parameters</a></li>
					
					<li><a href="#method-i-parse_method_parameters">#parse_method_parameters</a></li>
					
					<li><a href="#method-i-parse_module">#parse_module</a></li>
					
					<li><a href="#method-i-parse_require">#parse_require</a></li>
					
					<li><a href="#method-i-parse_statements">#parse_statements</a></li>
					
					<li><a href="#method-i-parse_symbol_arg">#parse_symbol_arg</a></li>
					
					<li><a href="#method-i-parse_symbol_in_arg">#parse_symbol_in_arg</a></li>
					
					<li><a href="#method-i-parse_toplevel_statements">#parse_toplevel_statements</a></li>
					
					<li><a href="#method-i-parse_visibility">#parse_visibility</a></li>
					
					<li><a href="#method-i-parse_yield">#parse_yield</a></li>
					
					<li><a href="#method-i-parse_yield_parameters">#parse_yield_parameters</a></li>
					
					<li><a href="#method-i-peek_read">#peek_read</a></li>
					
					<li><a href="#method-i-peek_tk">#peek_tk</a></li>
					
					<li><a href="#method-i-read_directive">#read_directive</a></li>
					
					<li><a href="#method-i-read_documentation_modifiers">#read_documentation_modifiers</a></li>
					
					<li><a href="#method-i-remove_private_comments">#remove_private_comments</a></li>
					
					<li><a href="#method-i-remove_token_listener">#remove_token_listener</a></li>
					
					<li><a href="#method-i-reset">#reset</a></li>
					
					<li><a href="#method-i-scan">#scan</a></li>
					
					<li><a href="#method-i-skip_for_variable">#skip_for_variable</a></li>
					
					<li><a href="#method-i-skip_method">#skip_method</a></li>
					
					<li><a href="#method-i-skip_optional_do_after_expression">#skip_optional_do_after_expression</a></li>
					
					<li><a href="#method-i-skip_tkspace">#skip_tkspace</a></li>
					
					<li><a href="#method-i-skip_tkspace_comment">#skip_tkspace_comment</a></li>
					
					<li><a href="#method-i-unget_tk">#unget_tk</a></li>
					
					<li><a href="#method-i-warn">#warn</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
			<div id="includes-section" class="section">
				<h3 class="section-header">Included Modules</h3>
				<ul class="link-list">
				
				
					<li><a class="include" href="../RubyToken.html">RDoc::RubyToken</a></li>
				
				
				
					<li><a class="include" href="../TokenStream.html">RDoc::TokenStream</a></li>
				
				
				</ul>
			</div>
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="../../Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="../../README_txt.html">README.txt</a></li>
				
					<li class="file"><a href="../../RI_txt.html">RI.txt</a></li>
				
					<li class="file"><a href="../../test/test_ja_txt.html">test.ja.txt</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../RDoc.html">RDoc</a></li>
				
					<li><a href="../../RDoc/Alias.html">RDoc::Alias</a></li>
				
					<li><a href="../../RDoc/AnonClass.html">RDoc::AnonClass</a></li>
				
					<li><a href="../../RDoc/AnyMethod.html">RDoc::AnyMethod</a></li>
				
					<li><a href="../../RDoc/Attr.html">RDoc::Attr</a></li>
				
					<li><a href="../../RDoc/Cache.html">RDoc::Cache</a></li>
				
					<li><a href="../../RDoc/ClassModule.html">RDoc::ClassModule</a></li>
				
					<li><a href="../../RDoc/CodeObject.html">RDoc::CodeObject</a></li>
				
					<li><a href="../../RDoc/Constant.html">RDoc::Constant</a></li>
				
					<li><a href="../../RDoc/Context.html">RDoc::Context</a></li>
				
					<li><a href="../../RDoc/Context/Section.html">RDoc::Context::Section</a></li>
				
					<li><a href="../../RDoc/DOT.html">RDoc::DOT</a></li>
				
					<li><a href="../../RDoc/DOT/Digraph.html">RDoc::DOT::Digraph</a></li>
				
					<li><a href="../../RDoc/DOT/Edge.html">RDoc::DOT::Edge</a></li>
				
					<li><a href="../../RDoc/DOT/Element.html">RDoc::DOT::Element</a></li>
				
					<li><a href="../../RDoc/DOT/Node.html">RDoc::DOT::Node</a></li>
				
					<li><a href="../../RDoc/DOT/Port.html">RDoc::DOT::Port</a></li>
				
					<li><a href="../../RDoc/DOT/SimpleElement.html">RDoc::DOT::SimpleElement</a></li>
				
					<li><a href="../../RDoc/DOT/Subgraph.html">RDoc::DOT::Subgraph</a></li>
				
					<li><a href="../../RDoc/Diagram.html">RDoc::Diagram</a></li>
				
					<li><a href="../../RDoc/Error.html">RDoc::Error</a></li>
				
					<li><a href="../../RDoc/Generator.html">RDoc::Generator</a></li>
				
					<li><a href="../../RDoc/Generator/AllReferences.html">RDoc::Generator::AllReferences</a></li>
				
					<li><a href="../../RDoc/Generator/Class.html">RDoc::Generator::Class</a></li>
				
					<li><a href="../../RDoc/Generator/Context.html">RDoc::Generator::Context</a></li>
				
					<li><a href="../../RDoc/Generator/Darkfish.html">RDoc::Generator::Darkfish</a></li>
				
					<li><a href="../../RDoc/Generator/File.html">RDoc::Generator::File</a></li>
				
					<li><a href="../../RDoc/Generator/HTML.html">RDoc::Generator::HTML</a></li>
				
					<li><a href="../../RDoc/Generator/HTML/Common.html">RDoc::Generator::HTML::Common</a></li>
				
					<li><a href="../../RDoc/Generator/HTML/HTML.html">RDoc::Generator::HTML::HTML</a></li>
				
					<li><a href="../../RDoc/Generator/HTMLInOne.html">RDoc::Generator::HTMLInOne</a></li>
				
					<li><a href="../../RDoc/Generator/MarkUp.html">RDoc::Generator::MarkUp</a></li>
				
					<li><a href="../../RDoc/Generator/Method.html">RDoc::Generator::Method</a></li>
				
					<li><a href="../../RDoc/Generator/RI.html">RDoc::Generator::RI</a></li>
				
					<li><a href="../../RDoc/Generator/XML.html">RDoc::Generator::XML</a></li>
				
					<li><a href="../../RDoc/GhostMethod.html">RDoc::GhostMethod</a></li>
				
					<li><a href="../../RDoc/Include.html">RDoc::Include</a></li>
				
					<li><a href="../../RDoc/Markup.html">RDoc::Markup</a></li>
				
					<li><a href="../../RDoc/Markup/AttrChanger.html">RDoc::Markup::AttrChanger</a></li>
				
					<li><a href="../../RDoc/Markup/AttrSpan.html">RDoc::Markup::AttrSpan</a></li>
				
					<li><a href="../../RDoc/Markup/Attribute.html">RDoc::Markup::Attribute</a></li>
				
					<li><a href="../../RDoc/Markup/AttributeManager.html">RDoc::Markup::AttributeManager</a></li>
				
					<li><a href="../../RDoc/Markup/BlankLine.html">RDoc::Markup::BlankLine</a></li>
				
					<li><a href="../../RDoc/Markup/Flow.html">RDoc::Markup::Flow</a></li>
				
					<li><a href="../../RDoc/Markup/Flow/LIST.html">RDoc::Markup::Flow::LIST</a></li>
				
					<li><a href="../../RDoc/Markup/Formatter.html">RDoc::Markup::Formatter</a></li>
				
					<li><a href="../../RDoc/Markup/Fragment.html">RDoc::Markup::Fragment</a></li>
				
					<li><a href="../../RDoc/Markup/Heading.html">RDoc::Markup::Heading</a></li>
				
					<li><a href="../../RDoc/Markup/Line.html">RDoc::Markup::Line</a></li>
				
					<li><a href="../../RDoc/Markup/LineCollection.html">RDoc::Markup::LineCollection</a></li>
				
					<li><a href="../../RDoc/Markup/Lines.html">RDoc::Markup::Lines</a></li>
				
					<li><a href="../../RDoc/Markup/ListBase.html">RDoc::Markup::ListBase</a></li>
				
					<li><a href="../../RDoc/Markup/ListEnd.html">RDoc::Markup::ListEnd</a></li>
				
					<li><a href="../../RDoc/Markup/ListItem.html">RDoc::Markup::ListItem</a></li>
				
					<li><a href="../../RDoc/Markup/ListStart.html">RDoc::Markup::ListStart</a></li>
				
					<li><a href="../../RDoc/Markup/Paragraph.html">RDoc::Markup::Paragraph</a></li>
				
					<li><a href="../../RDoc/Markup/PreProcess.html">RDoc::Markup::PreProcess</a></li>
				
					<li><a href="../../RDoc/Markup/Rule.html">RDoc::Markup::Rule</a></li>
				
					<li><a href="../../RDoc/Markup/Special.html">RDoc::Markup::Special</a></li>
				
					<li><a href="../../RDoc/Markup/ToFlow.html">RDoc::Markup::ToFlow</a></li>
				
					<li><a href="../../RDoc/Markup/ToHtml.html">RDoc::Markup::ToHtml</a></li>
				
					<li><a href="../../RDoc/Markup/ToHtmlCrossref.html">RDoc::Markup::ToHtmlCrossref</a></li>
				
					<li><a href="../../RDoc/Markup/ToLaTeX.html">RDoc::Markup::ToLaTeX</a></li>
				
					<li><a href="../../RDoc/Markup/ToTest.html">RDoc::Markup::ToTest</a></li>
				
					<li><a href="../../RDoc/Markup/ToTexInfo.html">RDoc::Markup::ToTexInfo</a></li>
				
					<li><a href="../../RDoc/Markup/Verbatim.html">RDoc::Markup::Verbatim</a></li>
				
					<li><a href="../../RDoc/MetaMethod.html">RDoc::MetaMethod</a></li>
				
					<li><a href="../../RDoc/NormalClass.html">RDoc::NormalClass</a></li>
				
					<li><a href="../../RDoc/NormalModule.html">RDoc::NormalModule</a></li>
				
					<li><a href="../../RDoc/Options.html">RDoc::Options</a></li>
				
					<li><a href="../../RDoc/Parser.html">RDoc::Parser</a></li>
				
					<li><a href="../../RDoc/Parser/C.html">RDoc::Parser::C</a></li>
				
					<li><a href="../../RDoc/Parser/F95.html">RDoc::Parser::F95</a></li>
				
					<li><a href="../../RDoc/Parser/F95/Fortran95Definition.html">RDoc::Parser::F95::Fortran95Definition</a></li>
				
					<li><a href="../../RDoc/Parser/F95/Token.html">RDoc::Parser::F95::Token</a></li>
				
					<li><a href="../../RDoc/Parser/PerlPOD.html">RDoc::Parser::PerlPOD</a></li>
				
					<li><a href="../../RDoc/Parser/Ruby.html">RDoc::Parser::Ruby</a></li>
				
					<li><a href="../../RDoc/Parser/Simple.html">RDoc::Parser::Simple</a></li>
				
					<li><a href="../../RDoc/RDoc.html">RDoc::RDoc</a></li>
				
					<li><a href="../../RDoc/RI.html">RDoc::RI</a></li>
				
					<li><a href="../../RDoc/RI/AliasName.html">RDoc::RI::AliasName</a></li>
				
					<li><a href="../../RDoc/RI/AnsiFormatter.html">RDoc::RI::AnsiFormatter</a></li>
				
					<li><a href="../../RDoc/RI/Attribute.html">RDoc::RI::Attribute</a></li>
				
					<li><a href="../../RDoc/RI/AttributeFormatter.html">RDoc::RI::AttributeFormatter</a></li>
				
					<li><a href="../../RDoc/RI/AttributeFormatter/AttributeString.html">RDoc::RI::AttributeFormatter::AttributeString</a></li>
				
					<li><a href="../../RDoc/RI/Cache.html">RDoc::RI::Cache</a></li>
				
					<li><a href="../../RDoc/RI/ClassDescription.html">RDoc::RI::ClassDescription</a></li>
				
					<li><a href="../../RDoc/RI/ClassEntry.html">RDoc::RI::ClassEntry</a></li>
				
					<li><a href="../../RDoc/RI/Constant.html">RDoc::RI::Constant</a></li>
				
					<li><a href="../../RDoc/RI/DefaultDisplay.html">RDoc::RI::DefaultDisplay</a></li>
				
					<li><a href="../../RDoc/RI/Description.html">RDoc::RI::Description</a></li>
				
					<li><a href="../../RDoc/RI/Display.html">RDoc::RI::Display</a></li>
				
					<li><a href="../../RDoc/RI/Driver.html">RDoc::RI::Driver</a></li>
				
					<li><a href="../../RDoc/RI/Driver/Error.html">RDoc::RI::Driver::Error</a></li>
				
					<li><a href="../../RDoc/RI/Driver/NotFoundError.html">RDoc::RI::Driver::NotFoundError</a></li>
				
					<li><a href="../../RDoc/RI/Driver/OpenStructHash.html">RDoc::RI::Driver::OpenStructHash</a></li>
				
					<li><a href="../../RDoc/RI/Error.html">RDoc::RI::Error</a></li>
				
					<li><a href="../../RDoc/RI/Formatter.html">RDoc::RI::Formatter</a></li>
				
					<li><a href="../../RDoc/RI/HtmlFormatter.html">RDoc::RI::HtmlFormatter</a></li>
				
					<li><a href="../../RDoc/RI/IncludedModule.html">RDoc::RI::IncludedModule</a></li>
				
					<li><a href="../../RDoc/RI/MethodDescription.html">RDoc::RI::MethodDescription</a></li>
				
					<li><a href="../../RDoc/RI/MethodEntry.html">RDoc::RI::MethodEntry</a></li>
				
					<li><a href="../../RDoc/RI/MethodSummary.html">RDoc::RI::MethodSummary</a></li>
				
					<li><a href="../../RDoc/RI/ModuleDescription.html">RDoc::RI::ModuleDescription</a></li>
				
					<li><a href="../../RDoc/RI/NameDescriptor.html">RDoc::RI::NameDescriptor</a></li>
				
					<li><a href="../../RDoc/RI/NamedThing.html">RDoc::RI::NamedThing</a></li>
				
					<li><a href="../../RDoc/RI/OverstrikeFormatter.html">RDoc::RI::OverstrikeFormatter</a></li>
				
					<li><a href="../../RDoc/RI/Reader.html">RDoc::RI::Reader</a></li>
				
					<li><a href="../../RDoc/RI/SimpleFormatter.html">RDoc::RI::SimpleFormatter</a></li>
				
					<li><a href="../../RDoc/RI/TopLevelEntry.html">RDoc::RI::TopLevelEntry</a></li>
				
					<li><a href="../../RDoc/RI/Writer.html">RDoc::RI::Writer</a></li>
				
					<li><a href="../../RDoc/Require.html">RDoc::Require</a></li>
				
					<li><a href="../../RDoc/RubyLex.html">RDoc::RubyLex</a></li>
				
					<li><a href="../../RDoc/RubyLex/BufferedReader.html">RDoc::RubyLex::BufferedReader</a></li>
				
					<li><a href="../../RDoc/RubyToken.html">RDoc::RubyToken</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkError.html">RDoc::RubyToken::TkError</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkId.html">RDoc::RubyToken::TkId</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkKW.html">RDoc::RubyToken::TkKW</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkNode.html">RDoc::RubyToken::TkNode</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkOPASGN.html">RDoc::RubyToken::TkOPASGN</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkOp.html">RDoc::RubyToken::TkOp</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkUnknownChar.html">RDoc::RubyToken::TkUnknownChar</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkVal.html">RDoc::RubyToken::TkVal</a></li>
				
					<li><a href="../../RDoc/RubyToken/Token.html">RDoc::RubyToken::Token</a></li>
				
					<li><a href="../../RDoc/SingleClass.html">RDoc::SingleClass</a></li>
				
					<li><a href="../../RDoc/Stats.html">RDoc::Stats</a></li>
				
					<li><a href="../../RDoc/Stats/Normal.html">RDoc::Stats::Normal</a></li>
				
					<li><a href="../../RDoc/Stats/Quiet.html">RDoc::Stats::Quiet</a></li>
				
					<li><a href="../../RDoc/Stats/Verbose.html">RDoc::Stats::Verbose</a></li>
				
					<li><a href="../../RDoc/TokenStream.html">RDoc::TokenStream</a></li>
				
					<li><a href="../../RDoc/TopLevel.html">RDoc::TopLevel</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">RDoc::Parser::Ruby</h1>

		<div id="description">
			<p>
Extracts code elements from a source file returning a <a
href="../TopLevel.html">TopLevel</a> object containing the constituent file
elements.
</p>
<p>
This file is based on rtags
</p>
<p>
RubyParser understands how to document:
</p>
<ul>
<li><p>
classes
</p>
</li>
<li><p>
modules
</p>
</li>
<li><p>
methods
</p>
</li>
<li><p>
constants
</p>
</li>
<li><p>
aliases
</p>
</li>
<li><p>
private, public, protected
</p>
</li>
<li><p>
private_class_function, public_class_function
</p>
</li>
<li><p>
module_function
</p>
</li>
<li><p>
attr, attr_reader, attr_writer, attr_accessor
</p>
</li>
<li><p>
extra accessors given on the command line
</p>
</li>
<li><p>
metaprogrammed methods
</p>
</li>
<li><p>
require
</p>
</li>
<li><p>
include
</p>
</li>
</ul>
<h2>Method Arguments</h2>
<p>
The parser extracts the arguments from the method definition.  You can
override this with a custom argument definition using the :call-seq:
directive:
</p>
<pre>
  ##
  # This method can be called with a range or an offset and length
  #
  # :call-seq:
  #   my_method(Range)
  #   my_method(offset, length)
  
  def my_method(*args)
  end
</pre>
<p>
The parser extracts <tt>yield</tt> expressions from method bodies to gather
the yielded argument names.  If your method manually calls a block instead
of yielding or you want to override the discovered argument names use the
:yields: directive:
</p>
<pre>
  ##
  # My method is awesome
  
  def my_method(&amp;block) # :yields: happy, times
    block.call 1, 2
  end
</pre>
<h2>Metaprogrammed Methods</h2>
<p>
To pick up a metaprogrammed method, the parser looks for a comment starting
with &#8217;##&#8217; before an identifier:
</p>
<pre>
  ##
  # This is a meta-programmed method!
  
  add_my_method :meta_method, :arg1, :arg2
</pre>
<p>
The parser looks at the token after the identifier to determine the name,
in this example, :meta_method.  If a name cannot be found, a warning is
printed and &#8216;unknown is used.
</p>
<p>
You can force the name of a method using the :method: directive:
</p>
<pre>
  ##
  # :method: woo_hoo!
</pre>
<p>
By default, meta-methods are instance methods.  To indicate that a method
is a singleton method instead use the :singleton-method: directive:
</p>
<pre>
  ##
  # :singleton-method:
</pre>
<p>
You can also use the :singleton-method: directive with a name:
</p>
<pre>
  ##
  # :singleton-method: woo_hoo!
</pre>
<h2>Hidden methods</h2>
<p>
You can provide documentation for methods that don&#8217;t appear using the
:method: and :singleton-method: directives:
</p>
<pre>
  ##
  # :method: ghost_method
  # There is a method here, but you can't see it!
  
  ##
  # this is a comment for a regular method
  
  def regular_method() end
</pre>
<p>
Note that by default, the :method: directive will be ignored if there is a
standard rdocable item following it.
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="NORMAL">NORMAL</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="SINGLE">SINGLE</a></dt>
				
				<dd class="description"></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="new-method" class="method-detail ">
				<a name="method-c-new"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">(top_level, file_name, content, options, stats)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1469</span>
1469:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">stats</span>)
1470:     <span class="ruby-keyword kw">super</span>
1471: 
1472:     <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
1473:     <span class="ruby-ivar">@token_listeners</span> = <span class="ruby-keyword kw">nil</span>
1474:     <span class="ruby-ivar">@scanner</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">content</span>, <span class="ruby-ivar">@options</span>
1475:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">exception_on_syntax_error</span> = <span class="ruby-keyword kw">false</span>
1476: 
1477:     <span class="ruby-identifier">reset</span>
1478:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="add-token-listener-method" class="method-detail ">
				<a name="method-i-add_token_listener"></a>

				<div class="method-heading">
				
					<span class="method-name">add_token_listener</span><span
						class="method-args">(obj)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="add-token-listener-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1480</span>
1480:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_token_listener</span>(<span class="ruby-identifier">obj</span>)
1481:     <span class="ruby-ivar">@token_listeners</span> <span class="ruby-operator">||=</span> []
1482:     <span class="ruby-ivar">@token_listeners</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">obj</span>
1483:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="collect-first-comment-method" class="method-detail ">
				<a name="method-i-collect_first_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">collect_first_comment</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Look for the first comment in a file that isn&#8217;t a shebang line.
</p>
					

					
					<div class="method-source-code"
						id="collect-first-comment-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1488</span>
1488:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collect_first_comment</span>
1489:     <span class="ruby-identifier">skip_tkspace</span>
1490:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">''</span>
1491:     <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">true</span>
1492: 
1493:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1494: 
1495:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1496:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/\A#!/</span> <span class="ruby-keyword kw">then</span>
1497:         <span class="ruby-identifier">skip_tkspace</span>
1498:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1499:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/\A#\s*-\*-/</span> <span class="ruby-keyword kw">then</span>
1500:         <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
1501:         <span class="ruby-identifier">skip_tkspace</span>
1502:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1503:       <span class="ruby-keyword kw">else</span>
1504:         <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
1505:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1506:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1507: 
1508:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1509:           <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1510:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1511:         <span class="ruby-keyword kw">end</span>
1512:       <span class="ruby-keyword kw">end</span>
1513:     <span class="ruby-keyword kw">end</span>
1514: 
1515:     <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1516: 
1517:     <span class="ruby-identifier">res</span>
1518:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="error-method" class="method-detail ">
				<a name="method-i-error"></a>

				<div class="method-heading">
				
					<span class="method-name">error</span><span
						class="method-args">(msg)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="error-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1520</span>
1520:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">msg</span>)
1521:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
1522:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">msg</span>
1523:     <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
1524:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="extract-call-seq-method" class="method-detail ">
				<a name="method-i-extract_call_seq"></a>

				<div class="method-heading">
				
					<span class="method-name">extract_call_seq</span><span
						class="method-args">(comment, meth)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Look for a &#8216;call-seq&#8217; in the comment, and override the normal
parameter stuff
</p>
					

					
					<div class="method-source-code"
						id="extract-call-seq-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1530</span>
1530:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_call_seq</span>(<span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>)
1531:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/:?call-seq:(.*?)^\s*\#?\s*$/</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
1532:       <span class="ruby-identifier">seq</span> = <span class="ruby-node">$1</span>
1533:       <span class="ruby-identifier">seq</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\s*\#\s*/</span>, <span class="ruby-value str">''</span>)
1534:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">call_seq</span> = <span class="ruby-identifier">seq</span>
1535:     <span class="ruby-keyword kw">end</span>
1536: 
1537:     <span class="ruby-identifier">meth</span>
1538:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-bool-method" class="method-detail ">
				<a name="method-i-get_bool"></a>

				<div class="method-heading">
				
					<span class="method-name">get_bool</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="get-bool-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1540</span>
1540:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_bool</span>
1541:     <span class="ruby-identifier">skip_tkspace</span>
1542:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1543:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1544:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkTRUE</span>
1545:       <span class="ruby-keyword kw">true</span>
1546:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFALSE</span>, <span class="ruby-constant">TkNIL</span>
1547:       <span class="ruby-keyword kw">false</span>
1548:     <span class="ruby-keyword kw">else</span>
1549:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1550:       <span class="ruby-keyword kw">true</span>
1551:     <span class="ruby-keyword kw">end</span>
1552:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-class-or-module-method" class="method-detail ">
				<a name="method-i-get_class_or_module"></a>

				<div class="method-heading">
				
					<span class="method-name">get_class_or_module</span><span
						class="method-args">(container)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<table>
<tr><td valign="top">Look for the name of a class of module (optionally with a leading </td><td><p>
or
</p>
</td></tr>
<tr><td valign="top">with </td><td><p>
separated named) and return the ultimate name and container
</p>
</td></tr>
</table>
					

					
					<div class="method-source-code"
						id="get-class-or-module-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1558</span>
1558:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
1559:     <span class="ruby-identifier">skip_tkspace</span>
1560:     <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1561: 
1562:     <span class="ruby-comment cmt"># class ::A -&gt; A is in the top level</span>
1563:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">name_t</span> <span class="ruby-keyword kw">then</span>
1564:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1565:       <span class="ruby-identifier">container</span> = <span class="ruby-ivar">@top_level</span>
1566:     <span class="ruby-keyword kw">end</span>
1567: 
1568:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1569: 
1570:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">do</span>
1571:       <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
1572:       <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span>(<span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1573:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>
1574: <span class="ruby-comment cmt">#          warn(&quot;Couldn't find module #{name_t.name}&quot;)</span>
1575:         <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1576:       <span class="ruby-keyword kw">end</span>
1577:       <span class="ruby-identifier">get_tk</span>
1578:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1579:     <span class="ruby-keyword kw">end</span>
1580:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1581:     <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>]
1582:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-class-specification-method" class="method-detail ">
				<a name="method-i-get_class_specification"></a>

				<div class="method-heading">
				
					<span class="method-name">get_class_specification</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return a superclass, which can be either a constant of an expression
</p>
					

					
					<div class="method-source-code"
						id="get-class-specification-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1587</span>
1587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_specification</span>
1588:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1589:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;self&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkSELF</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1590: 
1591:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
1592:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON3</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
1593:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
1594:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1595:     <span class="ruby-keyword kw">end</span>
1596: 
1597:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1598:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1599: 
1600:     <span class="ruby-identifier">get_tkread</span> <span class="ruby-comment cmt"># empty out read buffer</span>
1601: 
1602:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1603: 
1604:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1605:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkCOMMENT</span>, <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1606:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1607:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
1608:     <span class="ruby-keyword kw">end</span>
1609: 
1610:     <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
1611:     <span class="ruby-identifier">res</span>
1612:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-constant-method" class="method-detail ">
				<a name="method-i-get_constant"></a>

				<div class="method-heading">
				
					<span class="method-name">get_constant</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parse a constant, which might be qualified by one or more class or module
names
</p>
					

					
					<div class="method-source-code"
						id="get-constant-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1618</span>
1618:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant</span>
1619:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
1620:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1621:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1622: 
1623:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON3</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
1624:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
1625:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1626:     <span class="ruby-keyword kw">end</span>
1627: 
1628: <span class="ruby-comment cmt">#      if res.empty?</span>
1629: <span class="ruby-comment cmt">#        warn(&quot;Unexpected token #{tk} in constant&quot;)</span>
1630: <span class="ruby-comment cmt">#      end</span>
1631:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1632:     <span class="ruby-identifier">res</span>
1633:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-constant-with-optional-parens-method" class="method-detail ">
				<a name="method-i-get_constant_with_optional_parens"></a>

				<div class="method-heading">
				
					<span class="method-name">get_constant_with_optional_parens</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Get a constant that may be surrounded by parens
</p>
					

					
					<div class="method-source-code"
						id="get-constant-with-optional-parens-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1638</span>
1638:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant_with_optional_parens</span>
1639:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1640:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1641:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> (<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">peek_tk</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
1642:       <span class="ruby-identifier">get_tk</span>
1643:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)
1644:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1645:     <span class="ruby-keyword kw">end</span>
1646: 
1647:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant</span>
1648: 
1649:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
1650:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)
1651:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1652:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkRPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1653:     <span class="ruby-keyword kw">end</span>
1654:     <span class="ruby-identifier">name</span>
1655:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-symbol-or-name-method" class="method-detail ">
				<a name="method-i-get_symbol_or_name"></a>

				<div class="method-heading">
				
					<span class="method-name">get_symbol_or_name</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="get-symbol-or-name-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1657</span>
1657:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_symbol_or_name</span>
1658:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1659:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1660:     <span class="ruby-keyword kw">when</span>  <span class="ruby-constant">TkSYMBOL</span>
1661:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
1662:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkId</span>, <span class="ruby-constant">TkOp</span>
1663:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1664:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
1665:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
1666:     <span class="ruby-keyword kw">else</span>
1667:       <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Name or symbol expected (got #{tk})&quot;</span>
1668:     <span class="ruby-keyword kw">end</span>
1669:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-tk-method" class="method-detail ">
				<a name="method-i-get_tk"></a>

				<div class="method-heading">
				
					<span class="method-name">get_tk</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="get-tk-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1671</span>
1671:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_tk</span>
1672:     <span class="ruby-identifier">tk</span> = <span class="ruby-keyword kw">nil</span>
1673:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">empty?</span>
1674:       <span class="ruby-identifier">tk</span> = <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">token</span>
1675:       <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">push</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">get_read</span>
1676:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;get_tk1 =&gt; #{tk.inspect}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$TOKEN_DEBUG</span>
1677:     <span class="ruby-keyword kw">else</span>
1678:       <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">push</span> <span class="ruby-ivar">@unget_read</span>.<span class="ruby-identifier">shift</span>
1679:       <span class="ruby-identifier">tk</span> = <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">shift</span>
1680:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;get_tk2 =&gt; #{tk.inspect}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$TOKEN_DEBUG</span>
1681:     <span class="ruby-keyword kw">end</span>
1682: 
1683:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkSYMBEG</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1684:       <span class="ruby-identifier">set_token_position</span>(<span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>, <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>)
1685:       <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">get_tk</span>
1686:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkId</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkOp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkSTRING</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkDSTRING</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">then</span>
1687:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:name</span>)
1688:           <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSYMBOL</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">name</span>)
1689:         <span class="ruby-keyword kw">else</span>
1690:           <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSYMBOL</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">text</span>)
1691:         <span class="ruby-keyword kw">end</span>
1692:         <span class="ruby-comment cmt"># remove the identifier we just read (we're about to</span>
1693:         <span class="ruby-comment cmt"># replace it with a symbol)</span>
1694:         <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
1695:           <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">pop_token</span>
1696:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@token_listeners</span>
1697:       <span class="ruby-keyword kw">else</span>
1698:         <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;':' not followed by identifier or operator&quot;</span>)
1699:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">tk1</span>
1700:       <span class="ruby-keyword kw">end</span>
1701:     <span class="ruby-keyword kw">end</span>
1702: 
1703:     <span class="ruby-comment cmt"># inform any listeners of our shiny new token</span>
1704:     <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
1705:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">add_token</span>(<span class="ruby-identifier">tk</span>)
1706:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@token_listeners</span>
1707: 
1708:     <span class="ruby-identifier">tk</span>
1709:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-tkread-method" class="method-detail ">
				<a name="method-i-get_tkread"></a>

				<div class="method-heading">
				
					<span class="method-name">get_tkread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="get-tkread-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1711</span>
1711:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_tkread</span>
1712:     <span class="ruby-identifier">read</span> = <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
1713:     <span class="ruby-ivar">@read</span> = []
1714:     <span class="ruby-identifier">read</span>
1715:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="look-for-directives-in-method" class="method-detail ">
				<a name="method-i-look_for_directives_in"></a>

				<div class="method-heading">
				
					<span class="method-name">look_for_directives_in</span><span
						class="method-args">(context, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Look for directives in a normal comment block:
</p>
<pre>
  #-- - don't display comment from this point forward
</pre>
<p>
This routine modifies it&#8217;s parameter
</p>
					

					
					<div class="method-source-code"
						id="look-for-directives-in-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1724</span>
1724:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">look_for_directives_in</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
1725:     <span class="ruby-identifier">preprocess</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">PreProcess</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@file_name</span>,
1726:                                               <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">rdoc_include</span>)
1727: 
1728:     <span class="ruby-identifier">preprocess</span>.<span class="ruby-identifier">handle</span>(<span class="ruby-identifier">comment</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directive</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
1729:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">directive</span>
1730:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'enddoc'</span> <span class="ruby-keyword kw">then</span>
1731:         <span class="ruby-identifier">throw</span> <span class="ruby-value">:enddoc</span>
1732:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'main'</span> <span class="ruby-keyword kw">then</span>
1733:         <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">main_page</span> = <span class="ruby-identifier">param</span>
1734:         <span class="ruby-value str">''</span>
1735:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'method'</span>, <span class="ruby-value str">'singleton-method'</span> <span class="ruby-keyword kw">then</span>
1736:         <span class="ruby-keyword kw">false</span> <span class="ruby-comment cmt"># ignore</span>
1737:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'section'</span> <span class="ruby-keyword kw">then</span>
1738:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">set_current_section</span>(<span class="ruby-identifier">param</span>, <span class="ruby-identifier">comment</span>)
1739:         <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">replace</span> <span class="ruby-value str">''</span>
1740:         <span class="ruby-keyword kw">break</span>
1741:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'startdoc'</span> <span class="ruby-keyword kw">then</span>
1742:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">start_doc</span>
1743:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">force_documentation</span> = <span class="ruby-keyword kw">true</span>
1744:         <span class="ruby-value str">''</span>
1745:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'stopdoc'</span> <span class="ruby-keyword kw">then</span>
1746:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">stop_doc</span>
1747:         <span class="ruby-value str">''</span>
1748:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'title'</span> <span class="ruby-keyword kw">then</span>
1749:         <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">title</span> = <span class="ruby-identifier">param</span>
1750:         <span class="ruby-value str">''</span>
1751:       <span class="ruby-keyword kw">else</span>
1752:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Unrecognized directive '#{directive}'&quot;</span>
1753:         <span class="ruby-keyword kw">false</span>
1754:       <span class="ruby-keyword kw">end</span>
1755:     <span class="ruby-keyword kw">end</span>
1756: 
1757:     <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-identifier">comment</span>)
1758:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="make-message-method" class="method-detail ">
				<a name="method-i-make_message"></a>

				<div class="method-heading">
				
					<span class="method-name">make_message</span><span
						class="method-args">(msg)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="make-message-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1760</span>
1760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_message</span>(<span class="ruby-identifier">msg</span>)
1761:     <span class="ruby-identifier">prefix</span> = <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@file_name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;:&quot;</span>
1762:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>
1763:       <span class="ruby-identifier">prefix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@scanner.line_no}:#{@scanner.char_no}: &quot;</span>
1764:     <span class="ruby-keyword kw">end</span>
1765:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">msg</span>
1766:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-alias-method" class="method-detail ">
				<a name="method-i-parse_alias"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_alias</span><span
						class="method-args">(context, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-alias-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1816</span>
1816:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_alias</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1817:     <span class="ruby-identifier">skip_tkspace</span>
1818:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
1819:       <span class="ruby-identifier">get_tk</span>
1820:       <span class="ruby-identifier">skip_tkspace</span>
1821:     <span class="ruby-keyword kw">end</span>
1822:     <span class="ruby-identifier">new_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
1823:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>}
1824:     <span class="ruby-identifier">skip_tkspace</span>
1825:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
1826:       <span class="ruby-identifier">get_tk</span>
1827:       <span class="ruby-identifier">skip_tkspace</span>
1828:     <span class="ruby-keyword kw">end</span>
1829:     <span class="ruby-identifier">old_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
1830: 
1831:     <span class="ruby-identifier">al</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Alias</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">comment</span>
1832:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">al</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
1833:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">document_self</span>
1834:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_alias</span>(<span class="ruby-identifier">al</span>)
1835:     <span class="ruby-keyword kw">end</span>
1836:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-attr-method" class="method-detail ">
				<a name="method-i-parse_attr"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_attr</span><span
						class="method-args">(context, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-attr-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1768</span>
1768:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1769:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>(<span class="ruby-value">1</span>)
1770:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
1771:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>]
1772:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
1773:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1774:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1775:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1776:         <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_bool</span>
1777:       <span class="ruby-keyword kw">else</span>
1778:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1779:       <span class="ruby-keyword kw">end</span>
1780:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>
1781:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">att</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
1782:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">att</span>.<span class="ruby-identifier">document_self</span>
1783:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">att</span>)
1784:       <span class="ruby-keyword kw">end</span>
1785:     <span class="ruby-keyword kw">else</span>
1786:       <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;'attr' ignored - looks like a variable&quot;</span>)
1787:     <span class="ruby-keyword kw">end</span>
1788:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-attr-accessor-method" class="method-detail ">
				<a name="method-i-parse_attr_accessor"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_attr_accessor</span><span
						class="method-args">(context, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-attr-accessor-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1790</span>
1790:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr_accessor</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1791:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1792:     <span class="ruby-identifier">read</span> = <span class="ruby-identifier">get_tkread</span>
1793:     <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;?&quot;</span>
1794: 
1795:     <span class="ruby-comment cmt"># If nodoc is given, don't document any of them</span>
1796: 
1797:     <span class="ruby-identifier">tmp</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeObject</span>.<span class="ruby-identifier">new</span>
1798:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">tmp</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
1799:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tmp</span>.<span class="ruby-identifier">document_self</span>
1800: 
1801:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1802:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_reader&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
1803:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_writer&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;W&quot;</span>
1804:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_accessor&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span>
1805:     <span class="ruby-keyword kw">else</span>
1806:       <span class="ruby-identifier">rw</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">extra_accessor_flags</span>[<span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>]
1807:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">'?'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rw</span>.<span class="ruby-identifier">nil?</span>
1808:     <span class="ruby-keyword kw">end</span>
1809: 
1810:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">args</span>
1811:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>
1812:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
1813:     <span class="ruby-keyword kw">end</span>
1814:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-call-parameters-method" class="method-detail ">
				<a name="method-i-parse_call_parameters"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_call_parameters</span><span
						class="method-args">(tk)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-call-parameters-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1838</span>
1838:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
1839:     <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1840:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
1841:                   <span class="ruby-constant">TkRPAREN</span>
1842:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
1843:                   <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
1844:                 <span class="ruby-keyword kw">else</span>
1845:                   <span class="ruby-constant">TkNL</span>
1846:                 <span class="ruby-keyword kw">end</span>
1847:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1848: 
1849:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1850:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1851:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
1852:           <span class="ruby-keyword kw">break</span>
1853:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
1854:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1855:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
1856:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
1857:             <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1858:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1859:           <span class="ruby-keyword kw">else</span>
1860:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
1861:           <span class="ruby-keyword kw">end</span>
1862:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span>
1863:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1864:           <span class="ruby-keyword kw">break</span>
1865:         <span class="ruby-keyword kw">end</span>
1866:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1867:     <span class="ruby-keyword kw">end</span>
1868:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
1869:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
1870:     <span class="ruby-identifier">res</span>
1871:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-class-method" class="method-detail ">
				<a name="method-i-parse_class"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_class</span><span
						class="method-args">(container, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-class-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1873</span>
1873:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_class</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1874:     <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
1875: 
1876:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1877:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span>
1878:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1879:       <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">&quot;Object&quot;</span>
1880: 
1881:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
1882:         <span class="ruby-identifier">get_tk</span>
1883:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)
1884:         <span class="ruby-identifier">superclass</span> = <span class="ruby-identifier">get_class_specification</span>
1885:         <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">&quot;&lt;unknown&gt;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">empty?</span>
1886:       <span class="ruby-keyword kw">end</span>
1887: 
1888:       <span class="ruby-identifier">cls_type</span> = <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span> <span class="ruby-operator">?</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">SingleClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span>
1889:       <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">cls_type</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">superclass</span>
1890: 
1891:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">cls</span>
1892: 
1893:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">cls</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
1894:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1895: 
1896:       <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">cls</span>
1897:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
1898: 
1899:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLSHFT</span>
1900:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_class_specification</span>
1901:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;self&quot;</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
1902:         <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-constant">SINGLE</span>)
1903:       <span class="ruby-keyword kw">else</span>
1904:         <span class="ruby-identifier">other</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_named</span>(<span class="ruby-identifier">name</span>)
1905:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">other</span>
1906:           <span class="ruby-comment cmt">#            other = @top_level.add_class(NormalClass, name, nil)</span>
1907:           <span class="ruby-comment cmt">#            other.record_location(@top_level)</span>
1908:           <span class="ruby-comment cmt">#            other.comment = comment</span>
1909:           <span class="ruby-identifier">other</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;Dummy&quot;</span>, <span class="ruby-keyword kw">nil</span>
1910:         <span class="ruby-keyword kw">end</span>
1911: 
1912:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">other</span>
1913: 
1914:         <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">other</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
1915:         <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">other</span>, <span class="ruby-constant">SINGLE</span>)
1916:       <span class="ruby-keyword kw">end</span>
1917: 
1918:     <span class="ruby-keyword kw">else</span>
1919:       <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected class name or '&lt;&lt;'. Got #{name_t.class}: #{name_t.text.inspect}&quot;</span>)
1920:     <span class="ruby-keyword kw">end</span>
1921:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-comment-method" class="method-detail ">
				<a name="method-i-parse_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_comment</span><span
						class="method-args">(container, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-comment-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1977</span>
1977:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_comment</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1978:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
1979:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
1980: 
1981:     <span class="ruby-identifier">singleton</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/(^# +:?)(singleton-)(method:)/</span>, <span class="ruby-value str">'\1\3'</span>)
1982: 
1983:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/^# +:?method: *(\S*).*?\n/</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
1984:       <span class="ruby-identifier">name</span> = <span class="ruby-node">$1</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-node">$1</span>.<span class="ruby-identifier">empty?</span>
1985:     <span class="ruby-keyword kw">else</span>
1986:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1987:     <span class="ruby-keyword kw">end</span>
1988: 
1989:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">GhostMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
1990:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">singleton</span>
1991: 
1992:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
1993: 
1994:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
1995:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
1996:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> * <span class="ruby-identifier">column</span>
1997: 
1998:     <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>, <span class="ruby-node">&quot;# File #{@top_level.file_absolute_name}, line #{line_no}&quot;</span>)
1999:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
2000: 
2001:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">''</span>
2002: 
2003:     <span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>
2004: 
2005:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">document_self</span>
2006: 
2007:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
2008:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-constant-method" class="method-detail ">
				<a name="method-i-parse_constant"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_constant</span><span
						class="method-args">(container, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-constant-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1923</span>
1923:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_constant</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1924:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1925:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1926:     <span class="ruby-identifier">eq_tk</span> = <span class="ruby-identifier">get_tk</span>
1927: 
1928:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">eq_tk</span> <span class="ruby-keyword kw">then</span>
1929:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">eq_tk</span>)
1930:       <span class="ruby-keyword kw">return</span>
1931:     <span class="ruby-keyword kw">end</span>
1932: 
1933: 
1934:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1935:     <span class="ruby-identifier">get_tkread</span>
1936: 
1937:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1938:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkGT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1939:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1940:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">eq_tk</span>)
1941:       <span class="ruby-keyword kw">return</span>
1942:     <span class="ruby-keyword kw">end</span>
1943: 
1944:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1945:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1946:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
1947:           <span class="ruby-keyword kw">break</span>
1948:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>, <span class="ruby-constant">TkLBRACE</span>, <span class="ruby-constant">TkLBRACK</span>, <span class="ruby-constant">TkDO</span>
1949:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1950:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>, <span class="ruby-constant">TkRBRACE</span>, <span class="ruby-constant">TkRBRACK</span>, <span class="ruby-constant">TkEND</span>
1951:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1952:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span>
1953:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span>
1954:             <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1955:             <span class="ruby-keyword kw">break</span>
1956:           <span class="ruby-keyword kw">end</span>
1957:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>
1958:           <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>) <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span>) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>))
1959:             <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1960:             <span class="ruby-keyword kw">break</span>
1961:           <span class="ruby-keyword kw">end</span>
1962:         <span class="ruby-keyword kw">end</span>
1963:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1964:     <span class="ruby-keyword kw">end</span>
1965: 
1966:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
1967:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
1968: 
1969:     <span class="ruby-identifier">con</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Constant</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">comment</span>
1970:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">con</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CONSTANT_MODIFIERS</span>
1971: 
1972:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">con</span>.<span class="ruby-identifier">document_self</span>
1973:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_constant</span>(<span class="ruby-identifier">con</span>)
1974:     <span class="ruby-keyword kw">end</span>
1975:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-include-method" class="method-detail ">
				<a name="method-i-parse_include"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_include</span><span
						class="method-args">(context, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-include-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2010</span>
2010:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_include</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
2011:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2012:       <span class="ruby-identifier">skip_tkspace_comment</span>
2013: 
2014:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant_with_optional_parens</span>
2015:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_include</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Include</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">empty?</span>
2016: 
2017:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
2018:       <span class="ruby-identifier">get_tk</span>
2019:     <span class="ruby-keyword kw">end</span>
2020:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-meta-method-method" class="method-detail ">
				<a name="method-i-parse_meta_method"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_meta_method</span><span
						class="method-args">(container, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parses a meta-programmed method
</p>
					

					
					<div class="method-source-code"
						id="parse-meta-method-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2025</span>
2025:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_meta_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
2026:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
2027:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
2028: 
2029:     <span class="ruby-identifier">start_collecting_tokens</span>
2030:     <span class="ruby-identifier">add_token</span> <span class="ruby-identifier">tk</span>
2031:     <span class="ruby-identifier">add_token_listener</span> <span class="ruby-keyword kw">self</span>
2032: 
2033:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
2034: 
2035:     <span class="ruby-identifier">singleton</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/(^# +:?)(singleton-)(method:)/</span>, <span class="ruby-value str">'\1\3'</span>)
2036: 
2037:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/^# +:?method: *(\S*).*?\n/</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
2038:       <span class="ruby-identifier">name</span> = <span class="ruby-node">$1</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-node">$1</span>.<span class="ruby-identifier">empty?</span>
2039:     <span class="ruby-keyword kw">end</span>
2040: 
2041:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
2042:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
2043:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
2044:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span> <span class="ruby-keyword kw">then</span>
2045:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
2046:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span> <span class="ruby-keyword kw">then</span>
2047:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>]
2048:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># ignore</span>
2049:         <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
2050:         <span class="ruby-keyword kw">return</span>
2051:       <span class="ruby-keyword kw">else</span>
2052:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{container.toplevel.file_relative_name}:#{name_t.line_no} unknown name token #{name_t.inspect} for meta-method '#{tk.name}'&quot;</span>
2053:         <span class="ruby-identifier">name</span> = <span class="ruby-value str">'unknown'</span>
2054:       <span class="ruby-keyword kw">end</span>
2055:     <span class="ruby-keyword kw">end</span>
2056: 
2057:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">MetaMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
2058:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">singleton</span>
2059: 
2060:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
2061: 
2062:     <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
2063: 
2064:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
2065:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
2066:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> * <span class="ruby-identifier">column</span>
2067: 
2068:     <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>, <span class="ruby-node">&quot;# File #{@top_level.file_absolute_name}, line #{line_no}&quot;</span>)
2069:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
2070:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> <span class="ruby-ivar">@token_stream</span>
2071: 
2072:     <span class="ruby-identifier">add_token_listener</span> <span class="ruby-identifier">meth</span>
2073: 
2074:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">''</span>
2075: 
2076:     <span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>
2077: 
2078:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">document_self</span>
2079: 
2080:     <span class="ruby-identifier">last_tk</span> = <span class="ruby-identifier">tk</span>
2081: 
2082:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">do</span>
2083:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2084:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
2085:         <span class="ruby-keyword kw">break</span>
2086:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
2087:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">last_tk</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">last_tk</span>
2088:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSPACE</span> <span class="ruby-keyword kw">then</span>
2089:         <span class="ruby-comment cmt"># expression continues</span>
2090:       <span class="ruby-keyword kw">else</span>
2091:         <span class="ruby-identifier">last_tk</span> = <span class="ruby-identifier">tk</span>
2092:       <span class="ruby-keyword kw">end</span>
2093:     <span class="ruby-keyword kw">end</span>
2094: 
2095:     <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-identifier">meth</span>
2096: 
2097:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
2098:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-method-method" class="method-detail ">
				<a name="method-i-parse_method"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_method</span><span
						class="method-args">(container, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parses a method
</p>
					

					
					<div class="method-source-code"
						id="parse-method-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2103</span>
2103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
2104:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
2105:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
2106: 
2107:     <span class="ruby-identifier">start_collecting_tokens</span>
2108:     <span class="ruby-identifier">add_token</span>(<span class="ruby-identifier">tk</span>)
2109:     <span class="ruby-identifier">add_token_listener</span>(<span class="ruby-keyword kw">self</span>)
2110: 
2111:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-keyword kw">end</span>
2112: 
2113:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2114:     <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
2115:     <span class="ruby-identifier">back_tk</span> = <span class="ruby-identifier">skip_tkspace</span>
2116:     <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">nil</span>
2117:     <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">false</span>
2118: 
2119:     <span class="ruby-identifier">dot</span> = <span class="ruby-identifier">get_tk</span>
2120:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkDOT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">then</span>
2121:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-keyword kw">end</span>
2122:       <span class="ruby-identifier">skip_tkspace</span>
2123:       <span class="ruby-identifier">name_t2</span> = <span class="ruby-identifier">get_tk</span>
2124: 
2125:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
2126:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSELF</span> <span class="ruby-keyword kw">then</span>
2127:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
2128:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
2129:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
2130:         <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
2131:         <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span>(<span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
2132:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
2133:           <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">true</span>
2134:           <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;::&quot;</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Object</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span>, <span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
2135:             <span class="ruby-identifier">state</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">item</span>)
2136:           <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
2137: 
2138:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Class</span> <span class="ruby-operator">?</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>
2139: 
2140:           <span class="ruby-keyword kw">unless</span> [<span class="ruby-constant">Class</span>, <span class="ruby-constant">Module</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span>) <span class="ruby-keyword kw">then</span>
2141:             <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Couldn't find #{name_t.name}. Assuming it's a module&quot;</span>)
2142:           <span class="ruby-keyword kw">end</span>
2143: 
2144:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span> <span class="ruby-keyword kw">then</span>
2145:             <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_class</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">name</span>)
2146:           <span class="ruby-keyword kw">else</span>
2147:             <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
2148:           <span class="ruby-keyword kw">end</span>
2149: 
2150:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
2151:         <span class="ruby-keyword kw">end</span>
2152:       <span class="ruby-keyword kw">else</span>
2153:         <span class="ruby-comment cmt"># warn(&quot;Unexpected token '#{name_t2.inspect}'&quot;)</span>
2154:         <span class="ruby-comment cmt"># break</span>
2155:         <span class="ruby-identifier">skip_method</span>(<span class="ruby-identifier">container</span>)
2156:         <span class="ruby-keyword kw">return</span>
2157:       <span class="ruby-keyword kw">end</span>
2158: 
2159:       <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>)
2160:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2161:     <span class="ruby-keyword kw">else</span>
2162:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">dot</span>
2163:       <span class="ruby-identifier">back_tk</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">token</span><span class="ruby-operator">|</span>
2164:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">token</span>
2165:       <span class="ruby-keyword kw">end</span>
2166:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
2167: 
2168:       <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
2169:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
2170:     <span class="ruby-keyword kw">end</span>
2171: 
2172:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
2173: 
2174:     <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
2175: 
2176:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
2177:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
2178:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> * <span class="ruby-identifier">column</span>
2179: 
2180:     <span class="ruby-identifier">token</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>, <span class="ruby-node">&quot;# File #{@top_level.file_absolute_name}, line #{line_no}&quot;</span>)
2181:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">token</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
2182:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> <span class="ruby-ivar">@token_stream</span>
2183: 
2184:     <span class="ruby-identifier">add_token_listener</span> <span class="ruby-identifier">meth</span>
2185: 
2186:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">end</span>
2187:     <span class="ruby-identifier">parse_method_parameters</span> <span class="ruby-identifier">meth</span>
2188: 
2189:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
2190:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
2191:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">added_container</span> <span class="ruby-keyword kw">then</span>
2192:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">false</span>
2193:     <span class="ruby-keyword kw">end</span>
2194: 
2195:     <span class="ruby-comment cmt"># Having now read the method parameters and documentation modifiers, we</span>
2196:     <span class="ruby-comment cmt"># now know whether we have to rename #initialize to ::new</span>
2197: 
2198:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;initialize&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> <span class="ruby-keyword kw">then</span>
2199:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">dont_rename_initialize</span> <span class="ruby-keyword kw">then</span>
2200:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-value">:protected</span>
2201:       <span class="ruby-keyword kw">else</span>
2202:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2203:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;new&quot;</span>
2204:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-value">:public</span>
2205:       <span class="ruby-keyword kw">end</span>
2206:     <span class="ruby-keyword kw">end</span>
2207: 
2208:     <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">meth</span>)
2209: 
2210:     <span class="ruby-identifier">remove_token_listener</span>(<span class="ruby-identifier">meth</span>)
2211: 
2212:     <span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>
2213: 
2214:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
2215:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-method-or-yield-parameters-method" class="method-detail ">
				<a name="method-i-parse_method_or_yield_parameters"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_method_or_yield_parameters</span><span
						class="method-args">(method = nil, modifiers = RDoc::METHOD_MODIFIERS)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-method-or-yield-parameters-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2217</span>
2217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_or_yield_parameters</span>(<span class="ruby-identifier">method</span> = <span class="ruby-keyword kw">nil</span>,
2218:                                        <span class="ruby-identifier">modifiers</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">METHOD_MODIFIERS</span>)
2219:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2220:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2221: 
2222:     <span class="ruby-comment cmt"># Little hack going on here. In the statement</span>
2223:     <span class="ruby-comment cmt">#  f = 2*(1+yield)</span>
2224:     <span class="ruby-comment cmt"># We see the RPAREN as the next token, so we need</span>
2225:     <span class="ruby-comment cmt"># to exit early. This still won't catch all cases</span>
2226:     <span class="ruby-comment cmt"># (such as &quot;a = yield + 1&quot;</span>
2227:     <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2228:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2229:                   <span class="ruby-constant">TkRPAREN</span>
2230:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
2231:                   <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
2232:                 <span class="ruby-keyword kw">else</span>
2233:                   <span class="ruby-constant">TkNL</span>
2234:                 <span class="ruby-keyword kw">end</span>
2235:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
2236: 
2237:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2238:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2239:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
2240:           <span class="ruby-keyword kw">break</span>
2241:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLBRACE</span>
2242:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2243:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRBRACE</span>
2244:           <span class="ruby-comment cmt"># we might have a.each {|i| yield i }</span>
2245:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
2246:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2247:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
2248:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2249:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2250:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
2251:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
2252:             <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2253:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
2254:           <span class="ruby-keyword kw">else</span>
2255:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
2256:           <span class="ruby-keyword kw">end</span>
2257:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">TkCOMMENT</span>
2258:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2259:           <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">modifiers</span>)
2260:         <span class="ruby-keyword kw">end</span>
2261:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2262:     <span class="ruby-keyword kw">end</span>
2263:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
2264:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
2265:     <span class="ruby-identifier">res</span>
2266:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-method-parameters-method" class="method-detail ">
				<a name="method-i-parse_method_parameters"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_method_parameters</span><span
						class="method-args">(method)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Capture the method&#8217;s parameters. Along the way, look for a comment
containing:
</p>
<pre>
   # yields: ....
</pre>
<p>
and add this as the block_params for the method
</p>
					

					
					<div class="method-source-code"
						id="parse-method-parameters-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2276</span>
2276:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">method</span>)
2277:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">parse_method_or_yield_parameters</span>(<span class="ruby-identifier">method</span>)
2278:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;(&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;)&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">res</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">((</span>
2279:     <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">res</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span>
2280:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span>
2281:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2282:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">method</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">METHOD_MODIFIERS</span>
2283:     <span class="ruby-keyword kw">end</span>
2284:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-module-method" class="method-detail ">
				<a name="method-i-parse_module"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_module</span><span
						class="method-args">(container, single, tk, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-module-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2286</span>
2286:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_module</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
2287:     <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
2288: 
2289:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
2290: 
2291:     <span class="ruby-identifier">mod</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name</span>
2292:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
2293: 
2294:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-identifier">mod</span>
2295: 
2296:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">mod</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
2297:     <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">mod</span>)
2298:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
2299:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-require-method" class="method-detail ">
				<a name="method-i-parse_require"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_require</span><span
						class="method-args">(context, comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-require-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2301</span>
2301:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_require</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
2302:     <span class="ruby-identifier">skip_tkspace_comment</span>
2303:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2304:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
2305:       <span class="ruby-identifier">skip_tkspace_comment</span>
2306:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2307:     <span class="ruby-keyword kw">end</span>
2308: 
2309:     <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
2310:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2311:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
2312:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
2313:       <span class="ruby-comment cmt">#    when TkCONSTANT, TkIDENTIFIER, TkIVAR, TkGVAR</span>
2314:       <span class="ruby-comment cmt">#      name = tk.name</span>
2315:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDSTRING</span>
2316:       <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipping require of dynamic string: #{tk.text}&quot;</span>
2317:       <span class="ruby-comment cmt">#   else</span>
2318:       <span class="ruby-comment cmt">#     warn &quot;'require' used as variable&quot;</span>
2319:     <span class="ruby-keyword kw">end</span>
2320:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>
2321:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_require</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>)
2322:     <span class="ruby-keyword kw">else</span>
2323:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2324:     <span class="ruby-keyword kw">end</span>
2325:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-statements-method" class="method-detail ">
				<a name="method-i-parse_statements"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_statements</span><span
						class="method-args">(container, single = NORMAL, current_method = nil, comment = '')</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-statements-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2327</span>
2327:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span> = <span class="ruby-constant">NORMAL</span>, <span class="ruby-identifier">current_method</span> = <span class="ruby-keyword kw">nil</span>,
2328:                        <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>)
2329:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">1</span>
2330:     <span class="ruby-identifier">save_visibility</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">visibility</span>
2331: 
2332:     <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
2333: 
2334:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">do</span>
2335:       <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">false</span>
2336: 
2337:       <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
2338: 
2339:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2340:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
2341:         <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt"># Skip blanks and newlines</span>
2342:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2343: 
2344:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
2345:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_comment_seen</span> <span class="ruby-keyword kw">then</span>
2346:             <span class="ruby-comment cmt"># Look for RDoc in a comment about to be thrown away</span>
2347:             <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
2348: 
2349:             <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
2350:             <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">false</span>
2351:           <span class="ruby-keyword kw">end</span>
2352: 
2353:           <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
2354:             <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
2355:             <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>          <span class="ruby-comment cmt"># this is the newline</span>
2356:             <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)  <span class="ruby-comment cmt"># leading spaces</span>
2357:             <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2358:           <span class="ruby-keyword kw">end</span>
2359: 
2360:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
2361:             <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
2362: 
2363:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">done_documenting</span> <span class="ruby-keyword kw">then</span>
2364:               <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
2365:             <span class="ruby-keyword kw">end</span>
2366:           <span class="ruby-keyword kw">end</span>
2367: 
2368:           <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
2369:         <span class="ruby-keyword kw">else</span>
2370:           <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
2371:         <span class="ruby-keyword kw">end</span>
2372: 
2373:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
2374:         <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
2375: 
2376:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCLASS</span> <span class="ruby-keyword kw">then</span>
2377:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span> <span class="ruby-keyword kw">then</span>
2378:           <span class="ruby-identifier">parse_class</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2379:         <span class="ruby-keyword kw">else</span>
2380:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2381:         <span class="ruby-keyword kw">end</span>
2382: 
2383:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkMODULE</span> <span class="ruby-keyword kw">then</span>
2384:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span> <span class="ruby-keyword kw">then</span>
2385:           <span class="ruby-identifier">parse_module</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2386:         <span class="ruby-keyword kw">else</span>
2387:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2388:         <span class="ruby-keyword kw">end</span>
2389: 
2390:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDEF</span> <span class="ruby-keyword kw">then</span>
2391:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
2392:           <span class="ruby-identifier">parse_method</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2393:         <span class="ruby-keyword kw">else</span>
2394:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2395:         <span class="ruby-keyword kw">end</span>
2396: 
2397:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
2398:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
2399:           <span class="ruby-identifier">parse_constant</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2400:         <span class="ruby-keyword kw">end</span>
2401: 
2402:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkALIAS</span> <span class="ruby-keyword kw">then</span>
2403:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
2404:           <span class="ruby-identifier">parse_alias</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2405:         <span class="ruby-keyword kw">end</span>
2406: 
2407:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkYIELD</span> <span class="ruby-keyword kw">then</span>
2408:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
2409:           <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;Warning: yield outside of method&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
2410:         <span class="ruby-keyword kw">else</span>
2411:           <span class="ruby-identifier">parse_yield</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">current_method</span>
2412:         <span class="ruby-keyword kw">end</span>
2413: 
2414:       <span class="ruby-comment cmt"># Until and While can have a 'do', which shouldn't increase the nesting.</span>
2415:       <span class="ruby-comment cmt"># We can't solve the general case, but we can handle most occurrences by</span>
2416:       <span class="ruby-comment cmt"># ignoring a do at the end of a line.</span>
2417: 
2418:       <span class="ruby-keyword kw">when</span>  <span class="ruby-constant">TkUNTIL</span>, <span class="ruby-constant">TkWHILE</span> <span class="ruby-keyword kw">then</span>
2419:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2420:         <span class="ruby-identifier">skip_optional_do_after_expression</span>
2421: 
2422:       <span class="ruby-comment cmt"># 'for' is trickier</span>
2423:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFOR</span> <span class="ruby-keyword kw">then</span>
2424:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2425:         <span class="ruby-identifier">skip_for_variable</span>
2426:         <span class="ruby-identifier">skip_optional_do_after_expression</span>
2427: 
2428:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCASE</span>, <span class="ruby-constant">TkDO</span>, <span class="ruby-constant">TkIF</span>, <span class="ruby-constant">TkUNLESS</span>, <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
2429:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2430: 
2431:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkIDENTIFIER</span> <span class="ruby-keyword kw">then</span>
2432:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
2433:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
2434:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private'</span>, <span class="ruby-value str">'protected'</span>, <span class="ruby-value str">'public'</span>, <span class="ruby-value str">'private_class_method'</span>,
2435:                <span class="ruby-value str">'public_class_method'</span>, <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
2436:             <span class="ruby-identifier">parse_visibility</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>
2437:             <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
2438:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr'</span> <span class="ruby-keyword kw">then</span>
2439:             <span class="ruby-identifier">parse_attr</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2440:           <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^attr_(reader|writer|accessor)$/</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">extra_accessors</span> <span class="ruby-keyword kw">then</span>
2441:             <span class="ruby-identifier">parse_attr_accessor</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2442:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'alias_method'</span> <span class="ruby-keyword kw">then</span>
2443:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
2444:               <span class="ruby-identifier">parse_alias</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2445:             <span class="ruby-keyword kw">end</span>
2446:           <span class="ruby-keyword kw">else</span>
2447:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">comment</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/\A#\#$/</span> <span class="ruby-keyword kw">then</span>
2448:               <span class="ruby-identifier">parse_meta_method</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
2449:             <span class="ruby-keyword kw">end</span>
2450:           <span class="ruby-keyword kw">end</span>
2451:         <span class="ruby-keyword kw">end</span>
2452: 
2453:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
2454:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;require&quot;</span> <span class="ruby-keyword kw">then</span>
2455:           <span class="ruby-identifier">parse_require</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
2456:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;include&quot;</span> <span class="ruby-keyword kw">then</span>
2457:           <span class="ruby-identifier">parse_include</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
2458:         <span class="ruby-keyword kw">end</span>
2459: 
2460:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
2461:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2462:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>
2463:           <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
2464:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
2465:           <span class="ruby-keyword kw">return</span>
2466:         <span class="ruby-keyword kw">end</span>
2467: 
2468:       <span class="ruby-keyword kw">end</span>
2469: 
2470:       <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">keep_comment</span>
2471: 
2472:       <span class="ruby-keyword kw">begin</span>
2473:         <span class="ruby-identifier">get_tkread</span>
2474:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2475:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkNL</span>
2476:     <span class="ruby-keyword kw">end</span>
2477:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-symbol-arg-method" class="method-detail ">
				<a name="method-i-parse_symbol_arg"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_symbol_arg</span><span
						class="method-args">(no = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-symbol-arg-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2479</span>
2479:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_arg</span>(<span class="ruby-identifier">no</span> = <span class="ruby-keyword kw">nil</span>)
2480:     <span class="ruby-identifier">args</span> = []
2481:     <span class="ruby-identifier">skip_tkspace_comment</span>
2482:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2483:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>
2484:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2485:         <span class="ruby-identifier">skip_tkspace_comment</span>
2486:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
2487:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk1</span>
2488:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
2489:         <span class="ruby-keyword kw">end</span>
2490: 
2491:         <span class="ruby-identifier">skip_tkspace_comment</span>
2492:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk2</span> = <span class="ruby-identifier">get_tk</span>
2493:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
2494:           <span class="ruby-keyword kw">break</span>
2495:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMA</span>
2496:         <span class="ruby-keyword kw">else</span>
2497:           <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;unexpected token: '#{tk2.inspect}'&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
2498:           <span class="ruby-keyword kw">break</span>
2499:         <span class="ruby-keyword kw">end</span>
2500:       <span class="ruby-keyword kw">end</span>
2501:     <span class="ruby-keyword kw">else</span>
2502:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
2503:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
2504:         <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
2505:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
2506:       <span class="ruby-keyword kw">end</span>
2507: 
2508:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2509:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2510: 
2511:         <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">get_tk</span>
2512:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">then</span>
2513:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk1</span>
2514:           <span class="ruby-keyword kw">break</span>
2515:         <span class="ruby-keyword kw">end</span>
2516: 
2517:         <span class="ruby-identifier">skip_tkspace_comment</span>
2518:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
2519:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
2520:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
2521:         <span class="ruby-keyword kw">end</span>
2522:       <span class="ruby-keyword kw">end</span>
2523:     <span class="ruby-keyword kw">end</span>
2524:     <span class="ruby-identifier">args</span>
2525:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-symbol-in-arg-method" class="method-detail ">
				<a name="method-i-parse_symbol_in_arg"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_symbol_in_arg</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-symbol-in-arg-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2527</span>
2527:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_in_arg</span>
2528:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2529:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span>
2530:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
2531:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
2532:       <span class="ruby-identifier">eval</span> <span class="ruby-ivar">@read</span>[<span class="ruby-value">1</span>]
2533:     <span class="ruby-keyword kw">else</span>
2534:       <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected symbol or string, got #{tk.inspect}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
2535:       <span class="ruby-keyword kw">nil</span>
2536:     <span class="ruby-keyword kw">end</span>
2537:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-toplevel-statements-method" class="method-detail ">
				<a name="method-i-parse_toplevel_statements"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_toplevel_statements</span><span
						class="method-args">(container)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-toplevel-statements-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2539</span>
2539:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_toplevel_statements</span>(<span class="ruby-identifier">container</span>)
2540:     <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">collect_first_comment</span>
2541:     <span class="ruby-identifier">look_for_directives_in</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>)
2542:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
2543:     <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">NORMAL</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">comment</span>
2544:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-visibility-method" class="method-detail ">
				<a name="method-i-parse_visibility"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_visibility</span><span
						class="method-args">(container, single, tk)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-visibility-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2546</span>
2546:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>)
2547:     <span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
2548: 
2549:     <span class="ruby-identifier">vis_type</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
2550: 
2551:     <span class="ruby-identifier">vis</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">vis_type</span>
2552:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private'</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-value">:private</span>
2553:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'protected'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value">:protected</span>
2554:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public'</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-value">:public</span>
2555:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private_class_method'</span> <span class="ruby-keyword kw">then</span>
2556:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2557:             <span class="ruby-value">:private</span>
2558:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public_class_method'</span> <span class="ruby-keyword kw">then</span>
2559:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2560:             <span class="ruby-value">:public</span>
2561:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
2562:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2563:             <span class="ruby-value">:public</span>
2564:           <span class="ruby-keyword kw">else</span>
2565:             <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid visibility: #{tk.name}&quot;</span>
2566:           <span class="ruby-keyword kw">end</span>
2567: 
2568:     <span class="ruby-identifier">skip_tkspace_comment</span> <span class="ruby-keyword kw">false</span>
2569: 
2570:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">peek_tk</span>
2571:       <span class="ruby-comment cmt"># Ryan Davis suggested the extension to ignore modifiers, because he</span>
2572:       <span class="ruby-comment cmt"># often writes</span>
2573:       <span class="ruby-comment cmt">#</span>
2574:       <span class="ruby-comment cmt">#   protected unless $TESTING</span>
2575:       <span class="ruby-comment cmt">#</span>
2576:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkUNLESS_MOD</span>, <span class="ruby-constant">TkIF_MOD</span>, <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
2577:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">vis</span>
2578:     <span class="ruby-keyword kw">else</span>
2579:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vis_type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
2580:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
2581:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span> <span class="ruby-identifier">args</span>, <span class="ruby-value">:private</span>, <span class="ruby-keyword kw">false</span>
2582: 
2583:         <span class="ruby-identifier">module_functions</span> = []
2584: 
2585:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">methods_matching</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
2586:           <span class="ruby-identifier">s_m</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">dup</span>
2587:           <span class="ruby-identifier">s_m</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">s_m</span>
2588:           <span class="ruby-identifier">s_m</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-value">:public</span>
2589:           <span class="ruby-identifier">module_functions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s_m</span>
2590:         <span class="ruby-keyword kw">end</span>
2591: 
2592:         <span class="ruby-identifier">module_functions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s_m</span><span class="ruby-operator">|</span>
2593:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">s_m</span>
2594:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span> <span class="ruby-keyword kw">then</span>
2595:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">s_m</span>
2596:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span> <span class="ruby-keyword kw">then</span>
2597:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">s_m</span>
2598:           <span class="ruby-keyword kw">end</span>
2599:         <span class="ruby-keyword kw">end</span>
2600:       <span class="ruby-keyword kw">else</span>
2601:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
2602:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span> <span class="ruby-identifier">args</span>, <span class="ruby-identifier">vis</span>, <span class="ruby-identifier">singleton</span>
2603:       <span class="ruby-keyword kw">end</span>
2604:     <span class="ruby-keyword kw">end</span>
2605:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-yield-method" class="method-detail ">
				<a name="method-i-parse_yield"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_yield</span><span
						class="method-args">(context, single, tk, method)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-yield-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2611</span>
2611:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_yield</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">method</span>)
2612:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span>
2613:       <span class="ruby-identifier">get_tkread</span>
2614:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>}
2615:       <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span> = <span class="ruby-identifier">parse_yield_parameters</span>
2616:     <span class="ruby-keyword kw">end</span>
2617:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-yield-parameters-method" class="method-detail ">
				<a name="method-i-parse_yield_parameters"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_yield_parameters</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-yield-parameters-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2607</span>
2607:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_yield_parameters</span>
2608:     <span class="ruby-identifier">parse_method_or_yield_parameters</span>
2609:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="peek-read-method" class="method-detail ">
				<a name="method-i-peek_read"></a>

				<div class="method-heading">
				
					<span class="method-name">peek_read</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="peek-read-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2619</span>
2619:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_read</span>
2620:     <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">''</span>)
2621:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="peek-tk-method" class="method-detail ">
				<a name="method-i-peek_tk"></a>

				<div class="method-heading">
				
					<span class="method-name">peek_tk</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Peek at the next token, but don&#8217;t remove it from the stream
</p>
					

					
					<div class="method-source-code"
						id="peek-tk-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2626</span>
2626:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_tk</span>
2627:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>)
2628:     <span class="ruby-identifier">tk</span>
2629:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="read-directive-method" class="method-detail ">
				<a name="method-i-read_directive"></a>

				<div class="method-heading">
				
					<span class="method-name">read_directive</span><span
						class="method-args">(allowed)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Directives are modifier comments that can appear after class, module, or
method names. For example:
</p>
<pre>
  def fred # :yields: a, b
</pre>
<p>
or:
</p>
<pre>
  class MyClass # :nodoc:
</pre>
<p>
We return the directive name and any parameters as a two element array
</p>
					

					
					<div class="method-source-code"
						id="read-directive-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2643</span>
2643:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_directive</span>(<span class="ruby-identifier">allowed</span>)
2644:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2645:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
2646:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
2647:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s*:?(\w+):\s*(.*)/</span>
2648:         <span class="ruby-identifier">directive</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">downcase</span>
2649:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">allowed</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">directive</span>)
2650:           <span class="ruby-identifier">result</span> = [<span class="ruby-identifier">directive</span>, <span class="ruby-node">$2</span>]
2651:         <span class="ruby-keyword kw">end</span>
2652:       <span class="ruby-keyword kw">end</span>
2653:     <span class="ruby-keyword kw">else</span>
2654:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2655:     <span class="ruby-keyword kw">end</span>
2656:     <span class="ruby-identifier">result</span>
2657:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="read-documentation-modifiers-method" class="method-detail ">
				<a name="method-i-read_documentation_modifiers"></a>

				<div class="method-heading">
				
					<span class="method-name">read_documentation_modifiers</span><span
						class="method-args">(context, allow)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="read-documentation-modifiers-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2659</span>
2659:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">allow</span>)
2660:     <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">read_directive</span>(<span class="ruby-identifier">allow</span>)
2661: 
2662:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">dir</span>[<span class="ruby-value">0</span>]
2663:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;notnew&quot;</span>, <span class="ruby-value str">&quot;not_new&quot;</span>, <span class="ruby-value str">&quot;not-new&quot;</span> <span class="ruby-keyword kw">then</span>
2664:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">dont_rename_initialize</span> = <span class="ruby-keyword kw">true</span>
2665: 
2666:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;nodoc&quot;</span> <span class="ruby-keyword kw">then</span>
2667:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">false</span>
2668:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;all&quot;</span>
2669:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">document_children</span> = <span class="ruby-keyword kw">false</span>
2670:       <span class="ruby-keyword kw">end</span>
2671: 
2672:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;doc&quot;</span> <span class="ruby-keyword kw">then</span>
2673:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">true</span>
2674:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">force_documentation</span> = <span class="ruby-keyword kw">true</span>
2675: 
2676:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;yield&quot;</span>, <span class="ruby-value str">&quot;yields&quot;</span> <span class="ruby-keyword kw">then</span>
2677:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">context</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">nil?</span>
2678:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(,|)\s*&amp;\w+/</span>,<span class="ruby-value str">''</span>) <span class="ruby-comment cmt"># remove parameter &amp;proc</span>
2679:       <span class="ruby-keyword kw">end</span>
2680: 
2681:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">block_params</span> = <span class="ruby-identifier">dir</span>[<span class="ruby-value">1</span>]
2682: 
2683:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;arg&quot;</span>, <span class="ruby-value str">&quot;args&quot;</span> <span class="ruby-keyword kw">then</span>
2684:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">dir</span>[<span class="ruby-value">1</span>]
2685:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>
2686:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-private-comments-method" class="method-detail ">
				<a name="method-i-remove_private_comments"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_private_comments</span><span
						class="method-args">(comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="remove-private-comments-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2688</span>
2688:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-identifier">comment</span>)
2689:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/^#--\n.*?^#\+\+/</span>, <span class="ruby-value str">''</span>)
2690:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/^#--\n.*/</span>, <span class="ruby-value str">''</span>)
2691:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-token-listener-method" class="method-detail ">
				<a name="method-i-remove_token_listener"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_token_listener</span><span
						class="method-args">(obj)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="remove-token-listener-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2693</span>
2693:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_token_listener</span>(<span class="ruby-identifier">obj</span>)
2694:     <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">obj</span>)
2695:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reset-method" class="method-detail ">
				<a name="method-i-reset"></a>

				<div class="method-heading">
				
					<span class="method-name">reset</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="reset-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2697</span>
2697:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>
2698:     <span class="ruby-ivar">@tokens</span> = []
2699:     <span class="ruby-ivar">@unget_read</span> = []
2700:     <span class="ruby-ivar">@read</span> = []
2701:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="scan-method" class="method-detail ">
				<a name="method-i-scan"></a>

				<div class="method-heading">
				
					<span class="method-name">scan</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="scan-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2703</span>
2703:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan</span>
2704:     <span class="ruby-identifier">reset</span>
2705: 
2706:     <span class="ruby-identifier">catch</span>(<span class="ruby-value">:eof</span>) <span class="ruby-keyword kw">do</span>
2707:       <span class="ruby-identifier">catch</span>(<span class="ruby-value">:enddoc</span>) <span class="ruby-keyword kw">do</span>
2708:         <span class="ruby-keyword kw">begin</span>
2709:           <span class="ruby-identifier">parse_toplevel_statements</span>(<span class="ruby-ivar">@top_level</span>)
2710:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
2711:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">RDoc failure in #{@file_name} at or around line #{@scanner.line_no} column#{@scanner.char_no}Before reporting this, could you check that the file you're documentingcompiles cleanly--RDoc is not a full Ruby parser, and gets confused easily iffed invalid programs.The internal error was:</span>
2712: 
2713:           <span class="ruby-identifier">e</span>.<span class="ruby-identifier">set_backtrace</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>,<span class="ruby-value">4</span>])
2714:           <span class="ruby-identifier">raise</span>
2715:         <span class="ruby-keyword kw">end</span>
2716:       <span class="ruby-keyword kw">end</span>
2717:     <span class="ruby-keyword kw">end</span>
2718: 
2719:     <span class="ruby-ivar">@top_level</span>
2720:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="skip-for-variable-method" class="method-detail ">
				<a name="method-i-skip_for_variable"></a>

				<div class="method-heading">
				
					<span class="method-name">skip_for_variable</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
skip the var [in] part of a &#8216;for&#8217; statement
</p>
					

					
					<div class="method-source-code"
						id="skip-for-variable-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2776</span>
2776:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_for_variable</span>
2777:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2778:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2779:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2780:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2781:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkIN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
2782:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="skip-method-method" class="method-detail ">
				<a name="method-i-skip_method"></a>

				<div class="method-heading">
				
					<span class="method-name">skip_method</span><span
						class="method-args">(container)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="skip-method-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2784</span>
2784:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_method</span>(<span class="ruby-identifier">container</span>)
2785:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;anon&quot;</span>
2786:     <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">meth</span>)
2787:     <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">meth</span>)
2788:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="skip-optional-do-after-expression-method" class="method-detail ">
				<a name="method-i-skip_optional_do_after_expression"></a>

				<div class="method-heading">
				
					<span class="method-name">skip_optional_do_after_expression</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
while, until, and for have an optional do
</p>
					

					
					<div class="method-source-code"
						id="skip-optional-do-after-expression-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2737</span>
2737:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_optional_do_after_expression</span>
2738:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2739:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2740:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2741:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2742:       <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkRPAREN</span>
2743:     <span class="ruby-keyword kw">else</span>
2744:       <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkNL</span>
2745:     <span class="ruby-keyword kw">end</span>
2746: 
2747:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
2748:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>}
2749: 
2750:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2751:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2752:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
2753:         <span class="ruby-keyword kw">break</span>
2754:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2755:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2756:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDO</span>
2757:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
2758:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
2759:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
2760:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2761:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
2762:         <span class="ruby-keyword kw">else</span>
2763:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
2764:         <span class="ruby-keyword kw">end</span>
2765:       <span class="ruby-keyword kw">end</span>
2766:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2767:     <span class="ruby-keyword kw">end</span>
2768:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2769: 
2770:     <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkDO</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
2771:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="skip-tkspace-method" class="method-detail ">
				<a name="method-i-skip_tkspace"></a>

				<div class="method-heading">
				
					<span class="method-name">skip_tkspace</span><span
						class="method-args">(skip_nl = true)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Skip spaces
</p>
					

					
					<div class="method-source-code"
						id="skip-tkspace-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2793</span>
2793:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-identifier">skip_nl</span> = <span class="ruby-keyword kw">true</span>)
2794:     <span class="ruby-identifier">tokens</span> = []
2795: 
2796:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkSPACE</span> <span class="ruby-operator">===</span> (<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">skip_nl</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">do</span>
2797:       <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
2798:     <span class="ruby-keyword kw">end</span>
2799: 
2800:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2801:     <span class="ruby-identifier">tokens</span>
2802:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="skip-tkspace-comment-method" class="method-detail ">
				<a name="method-i-skip_tkspace_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">skip_tkspace_comment</span><span
						class="method-args">(skip_nl = true)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Skip spaces until a comment is found
</p>
					

					
					<div class="method-source-code"
						id="skip-tkspace-comment-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2807</span>
2807:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_tkspace_comment</span>(<span class="ruby-identifier">skip_nl</span> = <span class="ruby-keyword kw">true</span>)
2808:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2809:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-identifier">skip_nl</span>)
2810:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
2811:       <span class="ruby-identifier">get_tk</span>
2812:     <span class="ruby-keyword kw">end</span>
2813:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="unget-tk-method" class="method-detail ">
				<a name="method-i-unget_tk"></a>

				<div class="method-heading">
				
					<span class="method-name">unget_tk</span><span
						class="method-args">(tk)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="unget-tk-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2815</span>
2815:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2816:     <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">tk</span>
2817:     <span class="ruby-ivar">@unget_read</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">pop</span>
2818: 
2819:     <span class="ruby-comment cmt"># Remove this token from any listeners</span>
2820:     <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
2821:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">pop_token</span>
2822:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@token_listeners</span>
2823:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="warn-method" class="method-detail ">
				<a name="method-i-warn"></a>

				<div class="method-heading">
				
					<span class="method-name">warn</span><span
						class="method-args">(msg)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="warn-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 2825</span>
2825:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">msg</span>)
2826:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
2827:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
2828:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">msg</span>
2829:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

