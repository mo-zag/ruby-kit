<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: RDoc::RDoc</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/rdoc/rdoc_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/rdoc/rdoc.rb">lib/rdoc/rdoc.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Object</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-add_generator">::add_generator</a></li>
					
					<li><a href="#method-c-new">::new</a></li>
					
					<li><a href="#method-i-document">#document</a></li>
					
					<li><a href="#method-i-error">#error</a></li>
					
					<li><a href="#method-i-list_files_in_directory">#list_files_in_directory</a></li>
					
					<li><a href="#method-i-normalized_file_list">#normalized_file_list</a></li>
					
					<li><a href="#method-i-number_of_threads">#number_of_threads</a></li>
					
					<li><a href="#method-i-output_flag_file">#output_flag_file</a></li>
					
					<li><a href="#method-i-parse_dot_doc_file">#parse_dot_doc_file</a></li>
					
					<li><a href="#method-i-parse_files">#parse_files</a></li>
					
					<li><a href="#method-i-read_file_contents">#read_file_contents</a></li>
					
					<li><a href="#method-i-setup_output_dir">#setup_output_dir</a></li>
					
					<li><a href="#method-i-update_output_dir">#update_output_dir</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="../Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="../README_txt.html">README.txt</a></li>
				
					<li class="file"><a href="../RI_txt.html">RI.txt</a></li>
				
					<li class="file"><a href="../test/test_ja_txt.html">test.ja.txt</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../RDoc.html">RDoc</a></li>
				
					<li><a href="../RDoc/Alias.html">RDoc::Alias</a></li>
				
					<li><a href="../RDoc/AnonClass.html">RDoc::AnonClass</a></li>
				
					<li><a href="../RDoc/AnyMethod.html">RDoc::AnyMethod</a></li>
				
					<li><a href="../RDoc/Attr.html">RDoc::Attr</a></li>
				
					<li><a href="../RDoc/Cache.html">RDoc::Cache</a></li>
				
					<li><a href="../RDoc/ClassModule.html">RDoc::ClassModule</a></li>
				
					<li><a href="../RDoc/CodeObject.html">RDoc::CodeObject</a></li>
				
					<li><a href="../RDoc/Constant.html">RDoc::Constant</a></li>
				
					<li><a href="../RDoc/Context.html">RDoc::Context</a></li>
				
					<li><a href="../RDoc/Context/Section.html">RDoc::Context::Section</a></li>
				
					<li><a href="../RDoc/DOT.html">RDoc::DOT</a></li>
				
					<li><a href="../RDoc/DOT/Digraph.html">RDoc::DOT::Digraph</a></li>
				
					<li><a href="../RDoc/DOT/Edge.html">RDoc::DOT::Edge</a></li>
				
					<li><a href="../RDoc/DOT/Element.html">RDoc::DOT::Element</a></li>
				
					<li><a href="../RDoc/DOT/Node.html">RDoc::DOT::Node</a></li>
				
					<li><a href="../RDoc/DOT/Port.html">RDoc::DOT::Port</a></li>
				
					<li><a href="../RDoc/DOT/SimpleElement.html">RDoc::DOT::SimpleElement</a></li>
				
					<li><a href="../RDoc/DOT/Subgraph.html">RDoc::DOT::Subgraph</a></li>
				
					<li><a href="../RDoc/Diagram.html">RDoc::Diagram</a></li>
				
					<li><a href="../RDoc/Error.html">RDoc::Error</a></li>
				
					<li><a href="../RDoc/Generator.html">RDoc::Generator</a></li>
				
					<li><a href="../RDoc/Generator/AllReferences.html">RDoc::Generator::AllReferences</a></li>
				
					<li><a href="../RDoc/Generator/Class.html">RDoc::Generator::Class</a></li>
				
					<li><a href="../RDoc/Generator/Context.html">RDoc::Generator::Context</a></li>
				
					<li><a href="../RDoc/Generator/Darkfish.html">RDoc::Generator::Darkfish</a></li>
				
					<li><a href="../RDoc/Generator/File.html">RDoc::Generator::File</a></li>
				
					<li><a href="../RDoc/Generator/HTML.html">RDoc::Generator::HTML</a></li>
				
					<li><a href="../RDoc/Generator/HTML/Common.html">RDoc::Generator::HTML::Common</a></li>
				
					<li><a href="../RDoc/Generator/HTML/HTML.html">RDoc::Generator::HTML::HTML</a></li>
				
					<li><a href="../RDoc/Generator/HTMLInOne.html">RDoc::Generator::HTMLInOne</a></li>
				
					<li><a href="../RDoc/Generator/MarkUp.html">RDoc::Generator::MarkUp</a></li>
				
					<li><a href="../RDoc/Generator/Method.html">RDoc::Generator::Method</a></li>
				
					<li><a href="../RDoc/Generator/RI.html">RDoc::Generator::RI</a></li>
				
					<li><a href="../RDoc/Generator/XML.html">RDoc::Generator::XML</a></li>
				
					<li><a href="../RDoc/GhostMethod.html">RDoc::GhostMethod</a></li>
				
					<li><a href="../RDoc/Include.html">RDoc::Include</a></li>
				
					<li><a href="../RDoc/Markup.html">RDoc::Markup</a></li>
				
					<li><a href="../RDoc/Markup/AttrChanger.html">RDoc::Markup::AttrChanger</a></li>
				
					<li><a href="../RDoc/Markup/AttrSpan.html">RDoc::Markup::AttrSpan</a></li>
				
					<li><a href="../RDoc/Markup/Attribute.html">RDoc::Markup::Attribute</a></li>
				
					<li><a href="../RDoc/Markup/AttributeManager.html">RDoc::Markup::AttributeManager</a></li>
				
					<li><a href="../RDoc/Markup/BlankLine.html">RDoc::Markup::BlankLine</a></li>
				
					<li><a href="../RDoc/Markup/Flow.html">RDoc::Markup::Flow</a></li>
				
					<li><a href="../RDoc/Markup/Flow/LIST.html">RDoc::Markup::Flow::LIST</a></li>
				
					<li><a href="../RDoc/Markup/Formatter.html">RDoc::Markup::Formatter</a></li>
				
					<li><a href="../RDoc/Markup/Fragment.html">RDoc::Markup::Fragment</a></li>
				
					<li><a href="../RDoc/Markup/Heading.html">RDoc::Markup::Heading</a></li>
				
					<li><a href="../RDoc/Markup/Line.html">RDoc::Markup::Line</a></li>
				
					<li><a href="../RDoc/Markup/LineCollection.html">RDoc::Markup::LineCollection</a></li>
				
					<li><a href="../RDoc/Markup/Lines.html">RDoc::Markup::Lines</a></li>
				
					<li><a href="../RDoc/Markup/ListBase.html">RDoc::Markup::ListBase</a></li>
				
					<li><a href="../RDoc/Markup/ListEnd.html">RDoc::Markup::ListEnd</a></li>
				
					<li><a href="../RDoc/Markup/ListItem.html">RDoc::Markup::ListItem</a></li>
				
					<li><a href="../RDoc/Markup/ListStart.html">RDoc::Markup::ListStart</a></li>
				
					<li><a href="../RDoc/Markup/Paragraph.html">RDoc::Markup::Paragraph</a></li>
				
					<li><a href="../RDoc/Markup/PreProcess.html">RDoc::Markup::PreProcess</a></li>
				
					<li><a href="../RDoc/Markup/Rule.html">RDoc::Markup::Rule</a></li>
				
					<li><a href="../RDoc/Markup/Special.html">RDoc::Markup::Special</a></li>
				
					<li><a href="../RDoc/Markup/ToFlow.html">RDoc::Markup::ToFlow</a></li>
				
					<li><a href="../RDoc/Markup/ToHtml.html">RDoc::Markup::ToHtml</a></li>
				
					<li><a href="../RDoc/Markup/ToHtmlCrossref.html">RDoc::Markup::ToHtmlCrossref</a></li>
				
					<li><a href="../RDoc/Markup/ToLaTeX.html">RDoc::Markup::ToLaTeX</a></li>
				
					<li><a href="../RDoc/Markup/ToTest.html">RDoc::Markup::ToTest</a></li>
				
					<li><a href="../RDoc/Markup/ToTexInfo.html">RDoc::Markup::ToTexInfo</a></li>
				
					<li><a href="../RDoc/Markup/Verbatim.html">RDoc::Markup::Verbatim</a></li>
				
					<li><a href="../RDoc/MetaMethod.html">RDoc::MetaMethod</a></li>
				
					<li><a href="../RDoc/NormalClass.html">RDoc::NormalClass</a></li>
				
					<li><a href="../RDoc/NormalModule.html">RDoc::NormalModule</a></li>
				
					<li><a href="../RDoc/Options.html">RDoc::Options</a></li>
				
					<li><a href="../RDoc/Parser.html">RDoc::Parser</a></li>
				
					<li><a href="../RDoc/Parser/C.html">RDoc::Parser::C</a></li>
				
					<li><a href="../RDoc/Parser/F95.html">RDoc::Parser::F95</a></li>
				
					<li><a href="../RDoc/Parser/F95/Fortran95Definition.html">RDoc::Parser::F95::Fortran95Definition</a></li>
				
					<li><a href="../RDoc/Parser/F95/Token.html">RDoc::Parser::F95::Token</a></li>
				
					<li><a href="../RDoc/Parser/PerlPOD.html">RDoc::Parser::PerlPOD</a></li>
				
					<li><a href="../RDoc/Parser/Ruby.html">RDoc::Parser::Ruby</a></li>
				
					<li><a href="../RDoc/Parser/Simple.html">RDoc::Parser::Simple</a></li>
				
					<li><a href="../RDoc/RDoc.html">RDoc::RDoc</a></li>
				
					<li><a href="../RDoc/RI.html">RDoc::RI</a></li>
				
					<li><a href="../RDoc/RI/AliasName.html">RDoc::RI::AliasName</a></li>
				
					<li><a href="../RDoc/RI/AnsiFormatter.html">RDoc::RI::AnsiFormatter</a></li>
				
					<li><a href="../RDoc/RI/Attribute.html">RDoc::RI::Attribute</a></li>
				
					<li><a href="../RDoc/RI/AttributeFormatter.html">RDoc::RI::AttributeFormatter</a></li>
				
					<li><a href="../RDoc/RI/AttributeFormatter/AttributeString.html">RDoc::RI::AttributeFormatter::AttributeString</a></li>
				
					<li><a href="../RDoc/RI/Cache.html">RDoc::RI::Cache</a></li>
				
					<li><a href="../RDoc/RI/ClassDescription.html">RDoc::RI::ClassDescription</a></li>
				
					<li><a href="../RDoc/RI/ClassEntry.html">RDoc::RI::ClassEntry</a></li>
				
					<li><a href="../RDoc/RI/Constant.html">RDoc::RI::Constant</a></li>
				
					<li><a href="../RDoc/RI/DefaultDisplay.html">RDoc::RI::DefaultDisplay</a></li>
				
					<li><a href="../RDoc/RI/Description.html">RDoc::RI::Description</a></li>
				
					<li><a href="../RDoc/RI/Display.html">RDoc::RI::Display</a></li>
				
					<li><a href="../RDoc/RI/Driver.html">RDoc::RI::Driver</a></li>
				
					<li><a href="../RDoc/RI/Driver/Error.html">RDoc::RI::Driver::Error</a></li>
				
					<li><a href="../RDoc/RI/Driver/NotFoundError.html">RDoc::RI::Driver::NotFoundError</a></li>
				
					<li><a href="../RDoc/RI/Driver/OpenStructHash.html">RDoc::RI::Driver::OpenStructHash</a></li>
				
					<li><a href="../RDoc/RI/Error.html">RDoc::RI::Error</a></li>
				
					<li><a href="../RDoc/RI/Formatter.html">RDoc::RI::Formatter</a></li>
				
					<li><a href="../RDoc/RI/HtmlFormatter.html">RDoc::RI::HtmlFormatter</a></li>
				
					<li><a href="../RDoc/RI/IncludedModule.html">RDoc::RI::IncludedModule</a></li>
				
					<li><a href="../RDoc/RI/MethodDescription.html">RDoc::RI::MethodDescription</a></li>
				
					<li><a href="../RDoc/RI/MethodEntry.html">RDoc::RI::MethodEntry</a></li>
				
					<li><a href="../RDoc/RI/MethodSummary.html">RDoc::RI::MethodSummary</a></li>
				
					<li><a href="../RDoc/RI/ModuleDescription.html">RDoc::RI::ModuleDescription</a></li>
				
					<li><a href="../RDoc/RI/NameDescriptor.html">RDoc::RI::NameDescriptor</a></li>
				
					<li><a href="../RDoc/RI/NamedThing.html">RDoc::RI::NamedThing</a></li>
				
					<li><a href="../RDoc/RI/OverstrikeFormatter.html">RDoc::RI::OverstrikeFormatter</a></li>
				
					<li><a href="../RDoc/RI/Reader.html">RDoc::RI::Reader</a></li>
				
					<li><a href="../RDoc/RI/SimpleFormatter.html">RDoc::RI::SimpleFormatter</a></li>
				
					<li><a href="../RDoc/RI/TopLevelEntry.html">RDoc::RI::TopLevelEntry</a></li>
				
					<li><a href="../RDoc/RI/Writer.html">RDoc::RI::Writer</a></li>
				
					<li><a href="../RDoc/Require.html">RDoc::Require</a></li>
				
					<li><a href="../RDoc/RubyLex.html">RDoc::RubyLex</a></li>
				
					<li><a href="../RDoc/RubyLex/BufferedReader.html">RDoc::RubyLex::BufferedReader</a></li>
				
					<li><a href="../RDoc/RubyToken.html">RDoc::RubyToken</a></li>
				
					<li><a href="../RDoc/RubyToken/TkError.html">RDoc::RubyToken::TkError</a></li>
				
					<li><a href="../RDoc/RubyToken/TkId.html">RDoc::RubyToken::TkId</a></li>
				
					<li><a href="../RDoc/RubyToken/TkKW.html">RDoc::RubyToken::TkKW</a></li>
				
					<li><a href="../RDoc/RubyToken/TkNode.html">RDoc::RubyToken::TkNode</a></li>
				
					<li><a href="../RDoc/RubyToken/TkOPASGN.html">RDoc::RubyToken::TkOPASGN</a></li>
				
					<li><a href="../RDoc/RubyToken/TkOp.html">RDoc::RubyToken::TkOp</a></li>
				
					<li><a href="../RDoc/RubyToken/TkUnknownChar.html">RDoc::RubyToken::TkUnknownChar</a></li>
				
					<li><a href="../RDoc/RubyToken/TkVal.html">RDoc::RubyToken::TkVal</a></li>
				
					<li><a href="../RDoc/RubyToken/Token.html">RDoc::RubyToken::Token</a></li>
				
					<li><a href="../RDoc/SingleClass.html">RDoc::SingleClass</a></li>
				
					<li><a href="../RDoc/Stats.html">RDoc::Stats</a></li>
				
					<li><a href="../RDoc/Stats/Normal.html">RDoc::Stats::Normal</a></li>
				
					<li><a href="../RDoc/Stats/Quiet.html">RDoc::Stats::Quiet</a></li>
				
					<li><a href="../RDoc/Stats/Verbose.html">RDoc::Stats::Verbose</a></li>
				
					<li><a href="../RDoc/TokenStream.html">RDoc::TokenStream</a></li>
				
					<li><a href="../RDoc/TopLevel.html">RDoc::TopLevel</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">RDoc::RDoc</h1>

		<div id="description">
			<p>
Encapsulate the production of rdoc documentation. Basically you can use
this as you would invoke rdoc from the command line:
</p>
<pre>
  rdoc = RDoc::RDoc.new
  rdoc.document(args)
</pre>
<p>
Where <tt>args</tt> is an array of strings, each corresponding to an
argument you&#8217;d give rdoc on the command line. See rdoc/rdoc.rb for
details.
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="GENERATORS">GENERATORS</a></dt>
				
				<dd class="description"><p>
This is the list of supported output generators
</p></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		
		<div id="attribute-method-details" class="method-section section">
			<h3 class="section-header">Attributes</h3>

			
			<div id="stats-attribute-method" class="method-detail">
				<a name="stats"></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">stats</span><span
						class="attribute-access-type">[R]</span>
				</div>

				<div class="method-description">
				
				<p>
Accessor for statistics.  Available after each call to <a
href="RDoc.html#method-i-parse_files">parse_files</a>
</p>
				
				</div>
			</div>
			
		</div>
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="add-generator-method" class="method-detail ">
				<a name="method-c-add_generator"></a>

				<div class="method-heading">
				
					<span class="method-name">add_generator</span><span
						class="method-args">(klass)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Add <tt>klass</tt> that can generate output after parsing
</p>
					

					
					<div class="method-source-code"
						id="add-generator-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 49</span>
49:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">add_generator</span>(<span class="ruby-identifier">klass</span>)
50:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^RDoc::Generator::/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">downcase</span>
51:       <span class="ruby-constant">GENERATORS</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">klass</span>
52:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="new-method" class="method-detail ">
				<a name="method-c-new"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 54</span>
54:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
55:       <span class="ruby-ivar">@stats</span> = <span class="ruby-keyword kw">nil</span>
56:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="document-method" class="method-detail ">
				<a name="method-i-document"></a>

				<div class="method-heading">
				
					<span class="method-name">document</span><span
						class="method-args">(argv)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Format up one or more files according to the given arguments.
</p>
<p>
For simplicity, <em>argv</em> is an array of strings, equivalent to the
strings that would be passed on the command line. (This isn&#8217;t a
coincidence, as we <em>do</em> pass in ARGV when running interactively).
For a list of options, see rdoc/rdoc.rb. By default, output will be stored
in a directory called <tt>doc</tt> below the current directory, so make
sure you&#8217;re somewhere writable before invoking.
</p>
<p>
Throws: <a href="Error.html">RDoc::Error</a> on error
</p>
					

					
					<div class="method-source-code"
						id="document-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 250</span>
250:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">document</span>(<span class="ruby-identifier">argv</span>)
251:       <span class="ruby-constant">TopLevel</span><span class="ruby-operator">::</span><span class="ruby-identifier">reset</span>
252: 
253:       <span class="ruby-ivar">@options</span> = <span class="ruby-constant">Options</span>.<span class="ruby-identifier">new</span>
254:       <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">argv</span>
255: 
256:       <span class="ruby-ivar">@last_created</span> = <span class="ruby-keyword kw">nil</span>
257: 
258:       <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">all_one_file</span> <span class="ruby-keyword kw">then</span>
259:         <span class="ruby-ivar">@last_created</span> = <span class="ruby-identifier">setup_output_dir</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">force_update</span>
260:       <span class="ruby-keyword kw">end</span>
261: 
262:       <span class="ruby-identifier">start_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
263: 
264:       <span class="ruby-identifier">file_info</span> = <span class="ruby-identifier">parse_files</span> <span class="ruby-ivar">@options</span>
265: 
266:       <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;RDoc Documentation&quot;</span>
267: 
268:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file_info</span>.<span class="ruby-identifier">empty?</span>
269:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\nNo newer files.&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
270:       <span class="ruby-keyword kw">else</span>
271:         <span class="ruby-identifier">generator</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">generator</span>
272: 
273:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\nGenerating #{generator.name.sub(/^.*::/, '')}...&quot;</span> <span class="ruby-keyword kw">unless</span>
274:           <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
275: 
276:         <span class="ruby-ivar">@gen</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">for</span> <span class="ruby-ivar">@options</span>
277: 
278:         <span class="ruby-identifier">pwd</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
279: 
280:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">all_one_file</span>
281: 
282:         <span class="ruby-keyword kw">begin</span>
283:           <span class="ruby-constant">Diagram</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">file_info</span>, <span class="ruby-ivar">@options</span>).<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">diagram</span>
284:           <span class="ruby-ivar">@gen</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">file_info</span>)
285:           <span class="ruby-identifier">update_output_dir</span>(<span class="ruby-value str">&quot;.&quot;</span>, <span class="ruby-identifier">start_time</span>)
286:         <span class="ruby-keyword kw">ensure</span>
287:           <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">pwd</span>)
288:         <span class="ruby-keyword kw">end</span>
289:       <span class="ruby-keyword kw">end</span>
290: 
291:       <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span> <span class="ruby-keyword kw">or</span> <span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@stats</span> <span class="ruby-keyword kw">then</span>
292:         <span class="ruby-identifier">puts</span>
293:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">print</span>
294:       <span class="ruby-keyword kw">end</span>
295:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="error-method" class="method-detail ">
				<a name="method-i-error"></a>

				<div class="method-heading">
				
					<span class="method-name">error</span><span
						class="method-args">(msg)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Report an error message and exit
</p>
					

					
					<div class="method-source-code"
						id="error-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 61</span>
61:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">msg</span>)
62:       <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-identifier">msg</span>
63:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="list-files-in-directory-method" class="method-detail ">
				<a name="method-i-list_files_in_directory"></a>

				<div class="method-heading">
				
					<span class="method-name">list_files_in_directory</span><span
						class="method-args">(dir, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return a list of the files to be processed in a directory. We know that
this directory doesn&#8217;t have a .document file, so we&#8217;re looking
for real files. However we may well contain subdirectories which must be
tested for .document files.
</p>
					

					
					<div class="method-source-code"
						id="list-files-in-directory-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 174</span>
174:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_files_in_directory</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span>)
175:       <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-value str">&quot;*&quot;</span>)
176: 
177:       <span class="ruby-identifier">normalized_file_list</span> <span class="ruby-identifier">options</span>, <span class="ruby-identifier">files</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">exclude</span>
178:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="normalized-file-list-method" class="method-detail ">
				<a name="method-i-normalized_file_list"></a>

				<div class="method-heading">
				
					<span class="method-name">normalized_file_list</span><span
						class="method-args">(options, relative_files, force_doc = false, exclude_pattern = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Given a list of files and directories, create a list of all the Ruby files
they contain.
</p>
<p>
If <tt>force_doc</tt> is true we always add the given files, if false, only
add files that we guarantee we can parse.  It is true when looking at files
given on the command line, false when recursing through subdirectories.
</p>
<p>
The effect of this is that if you want a file with a non-standard extension
parsed, you must name it explicitly.
</p>
					

					
					<div class="method-source-code"
						id="normalized-file-list-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 137</span>
137:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_file_list</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">relative_files</span>, <span class="ruby-identifier">force_doc</span> = <span class="ruby-keyword kw">false</span>,
138:                              <span class="ruby-identifier">exclude_pattern</span> = <span class="ruby-keyword kw">nil</span>)
139:       <span class="ruby-identifier">file_list</span> = []
140: 
141:       <span class="ruby-identifier">relative_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rel_file_name</span><span class="ruby-operator">|</span>
142:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exclude_pattern</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exclude_pattern</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">rel_file_name</span>
143:         <span class="ruby-identifier">stat</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">next</span>
144: 
145:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span> = <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">ftype</span>
146:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;file&quot;</span>
147:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@last_created</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">mtime</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@last_created</span>
148: 
149:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">force_doc</span> <span class="ruby-keyword kw">or</span> <span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">can_parse</span>(<span class="ruby-identifier">rel_file_name</span>) <span class="ruby-keyword kw">then</span>
150:             <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rel_file_name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^\.\//</span>, <span class="ruby-value str">''</span>)
151:           <span class="ruby-keyword kw">end</span>
152:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;directory&quot;</span>
153:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;CVS&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;.svn&quot;</span>
154:           <span class="ruby-identifier">dot_doc</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">rel_file_name</span>, <span class="ruby-constant">DOT_DOC_FILENAME</span>)
155:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">dot_doc</span>)
156:             <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">parse_dot_doc_file</span>(<span class="ruby-identifier">rel_file_name</span>, <span class="ruby-identifier">dot_doc</span>, <span class="ruby-identifier">options</span>))
157:           <span class="ruby-keyword kw">else</span>
158:             <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">list_files_in_directory</span>(<span class="ruby-identifier">rel_file_name</span>, <span class="ruby-identifier">options</span>))
159:           <span class="ruby-keyword kw">end</span>
160:         <span class="ruby-keyword kw">else</span>
161:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;I can't deal with a #{type} #{rel_file_name}&quot;</span>
162:         <span class="ruby-keyword kw">end</span>
163:       <span class="ruby-keyword kw">end</span>
164: 
165:       <span class="ruby-identifier">file_list</span>
166:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="output-flag-file-method" class="method-detail ">
				<a name="method-i-output_flag_file"></a>

				<div class="method-heading">
				
					<span class="method-name">output_flag_file</span><span
						class="method-args">(op_dir)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return the path name of the flag file in an output directory.
</p>
					

					
					<div class="method-source-code"
						id="output-flag-file-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 103</span>
103:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>)
104:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">op_dir</span>, <span class="ruby-value str">&quot;created.rid&quot;</span>)
105:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-dot-doc-file-method" class="method-detail ">
				<a name="method-i-parse_dot_doc_file"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_dot_doc_file</span><span
						class="method-args">(in_dir, filename, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The .document file contains a list of file and directory name patterns,
representing candidates for documentation. It may also contain comments
(starting with &#8217;#&#8217;)
</p>
					

					
					<div class="method-source-code"
						id="parse-dot-doc-file-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 112</span>
112:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_dot_doc_file</span>(<span class="ruby-identifier">in_dir</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">options</span>)
113:       <span class="ruby-comment cmt"># read and strip comments</span>
114:       <span class="ruby-identifier">patterns</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/#.*/</span>, <span class="ruby-value str">''</span>)
115: 
116:       <span class="ruby-identifier">result</span> = []
117: 
118:       <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">patt</span><span class="ruby-operator">|</span>
119:         <span class="ruby-identifier">candidates</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">in_dir</span>, <span class="ruby-identifier">patt</span>))
120:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">normalized_file_list</span>(<span class="ruby-identifier">options</span>,  <span class="ruby-identifier">candidates</span>))
121:       <span class="ruby-keyword kw">end</span>
122:       <span class="ruby-identifier">result</span>
123:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-files-method" class="method-detail ">
				<a name="method-i-parse_files"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_files</span><span
						class="method-args">(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parse each file on the command line, recursively entering directories.
</p>
					

					
					<div class="method-source-code"
						id="parse-files-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 183</span>
183:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_files</span>(<span class="ruby-identifier">options</span>)
184:       <span class="ruby-identifier">files</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">files</span>
185:       <span class="ruby-identifier">files</span> = [<span class="ruby-value str">&quot;.&quot;</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">empty?</span>
186: 
187:       <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">normalized_file_list</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">files</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">exclude</span>)
188: 
189:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">empty?</span>
190: 
191:       <span class="ruby-identifier">jobs</span> = <span class="ruby-constant">SizedQueue</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">number_of_threads</span> * <span class="ruby-value">3</span>)
192:       <span class="ruby-identifier">workers</span> = []
193:       <span class="ruby-identifier">file_info</span> = []
194:       <span class="ruby-identifier">file_info_lock</span> = <span class="ruby-constant">Mutex</span>.<span class="ruby-identifier">new</span>
195: 
196:       <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">abort_on_exception</span> = <span class="ruby-keyword kw">true</span>
197:       <span class="ruby-ivar">@stats</span> = <span class="ruby-constant">Stats</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">verbosity</span>)
198:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">begin_adding</span>(<span class="ruby-identifier">number_of_threads</span>)
199: 
200:       <span class="ruby-comment cmt"># Create worker threads.</span>
201:       <span class="ruby-identifier">number_of_threads</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
202:         <span class="ruby-identifier">thread</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
203:           <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">filename</span> = <span class="ruby-identifier">jobs</span>.<span class="ruby-identifier">pop</span>)
204:             <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_file</span>(<span class="ruby-identifier">filename</span>)
205:             <span class="ruby-identifier">content</span> = <span class="ruby-identifier">read_file_contents</span>(<span class="ruby-identifier">filename</span>)
206:             <span class="ruby-identifier">top_level</span> = <span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">filename</span>
207: 
208:             <span class="ruby-identifier">parser</span> = <span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">for</span>(<span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">options</span>,
209:                                         <span class="ruby-ivar">@stats</span>)
210:             <span class="ruby-identifier">result</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">scan</span>
211: 
212:             <span class="ruby-identifier">file_info_lock</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
213:               <span class="ruby-identifier">file_info</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>
214:             <span class="ruby-keyword kw">end</span>
215:           <span class="ruby-keyword kw">end</span>
216:         <span class="ruby-keyword kw">end</span>
217:         <span class="ruby-identifier">workers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">thread</span>
218:       <span class="ruby-keyword kw">end</span>
219: 
220:       <span class="ruby-comment cmt"># Feed filenames to the parser worker threads...</span>
221:       <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
222:         <span class="ruby-identifier">jobs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">filename</span>
223:       <span class="ruby-keyword kw">end</span>
224:       <span class="ruby-identifier">workers</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
225:         <span class="ruby-identifier">jobs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">nil</span>
226:       <span class="ruby-keyword kw">end</span>
227: 
228:       <span class="ruby-comment cmt"># ...and wait until they're done.</span>
229:       <span class="ruby-identifier">workers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thread</span><span class="ruby-operator">|</span>
230:         <span class="ruby-identifier">thread</span>.<span class="ruby-identifier">join</span>
231:       <span class="ruby-keyword kw">end</span>
232: 
233:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">done_adding</span>
234: 
235:       <span class="ruby-identifier">file_info</span>
236:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="setup-output-dir-method" class="method-detail ">
				<a name="method-i-setup_output_dir"></a>

				<div class="method-heading">
				
					<span class="method-name">setup_output_dir</span><span
						class="method-args">(op_dir, force)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Create an output dir if it doesn&#8217;t exist. If it does exist, but
doesn&#8217;t contain the flag file <tt>created.rid</tt> then we refuse to
use it, as we may clobber some manually generated documentation
</p>
					

					
					<div class="method-source-code"
						id="setup-output-dir-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 70</span>
70:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_output_dir</span>(<span class="ruby-identifier">op_dir</span>, <span class="ruby-identifier">force</span>)
71:       <span class="ruby-identifier">flag_file</span> = <span class="ruby-identifier">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>)
72:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">op_dir</span>)
73:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">op_dir</span>)
74:           <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;'#{op_dir}' exists, and is not a directory&quot;</span>
75:         <span class="ruby-keyword kw">end</span>
76:         <span class="ruby-keyword kw">begin</span>
77:           <span class="ruby-identifier">created</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">flag_file</span>)
78:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
79:           <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;\nDirectory #{op_dir} already exists, but it looks like it\n&quot;</span> <span class="ruby-operator">+</span>
80:             <span class="ruby-value str">&quot;isn't an RDoc directory. Because RDoc doesn't want to risk\n&quot;</span> <span class="ruby-operator">+</span>
81:             <span class="ruby-value str">&quot;destroying any of your existing files, you'll need to\n&quot;</span> <span class="ruby-operator">+</span>
82:             <span class="ruby-value str">&quot;specify a different output directory name (using the\n&quot;</span> <span class="ruby-operator">+</span>
83:             <span class="ruby-value str">&quot;--op &lt;dir&gt; option).\n\n&quot;</span>
84:         <span class="ruby-keyword kw">else</span>
85:           <span class="ruby-identifier">last</span> = (<span class="ruby-constant">Time</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">created</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>)
86:         <span class="ruby-keyword kw">end</span>
87:       <span class="ruby-keyword kw">else</span>
88:         <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">op_dir</span>)
89:       <span class="ruby-keyword kw">end</span>
90:       <span class="ruby-identifier">last</span>
91:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-output-dir-method" class="method-detail ">
				<a name="method-i-update_output_dir"></a>

				<div class="method-heading">
				
					<span class="method-name">update_output_dir</span><span
						class="method-args">(op_dir, time)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Update the flag file in an output directory.
</p>
					

					
					<div class="method-source-code"
						id="update-output-dir-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 96</span>
96:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_output_dir</span>(<span class="ruby-identifier">op_dir</span>, <span class="ruby-identifier">time</span>)
97:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>), <span class="ruby-value str">&quot;w&quot;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">time</span>.<span class="ruby-identifier">rfc2822</span> }
98:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="number-of-threads-method" class="method-detail ">
				<a name="method-i-number_of_threads"></a>

				<div class="method-heading">
				
					<span class="method-name">number_of_threads</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="number-of-threads-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 299</span>
299:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">number_of_threads</span>
300:       <span class="ruby-identifier">@@number_of_threads</span> <span class="ruby-operator">||=</span>
301:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_PLATFORM</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;java&quot;</span>
302:           <span class="ruby-constant">Java</span><span class="ruby-operator">::</span><span class="ruby-identifier">java</span><span class="ruby-operator">::</span><span class="ruby-identifier">lang</span><span class="ruby-operator">::</span><span class="ruby-constant">Runtime</span>.<span class="ruby-identifier">getRuntime</span>.<span class="ruby-identifier">availableProcessors</span> * <span class="ruby-value">2</span>
303:         <span class="ruby-keyword kw">else</span>
304:           <span class="ruby-value">2</span>
305:         <span class="ruby-keyword kw">end</span>
306:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="read-file-contents-method" class="method-detail ">
				<a name="method-i-read_file_contents"></a>

				<div class="method-heading">
				
					<span class="method-name">read_file_contents</span><span
						class="method-args">(filename)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="read-file-contents-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/rdoc.rb, line 308</span>
308:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_file_contents</span>(<span class="ruby-identifier">filename</span>)
309:       <span class="ruby-identifier">content</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value str">'1.9'</span> <span class="ruby-keyword kw">then</span>
310:                   <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-value str">&quot;r:ascii-8bit&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span> }
311:                 <span class="ruby-keyword kw">else</span>
312:                   <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span> <span class="ruby-identifier">filename</span>
313:                 <span class="ruby-keyword kw">end</span>
314: 
315:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">Encoding</span> <span class="ruby-keyword kw">then</span>
316:         <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/coding:\s*(\S+)/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">content</span>[<span class="ruby-regexp re">/\A(?:.*\n){0,2}/</span>]
317:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">enc</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-node">$1</span>)
318:             <span class="ruby-identifier">content</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">enc</span>)
319:           <span class="ruby-keyword kw">end</span>
320:         <span class="ruby-keyword kw">end</span>
321:       <span class="ruby-keyword kw">end</span>
322: 
323:       <span class="ruby-identifier">content</span>
324:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

