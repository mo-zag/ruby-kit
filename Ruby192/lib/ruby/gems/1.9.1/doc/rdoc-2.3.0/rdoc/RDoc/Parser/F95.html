<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: RDoc::Parser::F95</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../lib/rdoc/parser/f95_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/rdoc/parser/f95.rb">lib/rdoc/parser/f95.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link"><a href="../Parser.html">RDoc::Parser</a></p>
				
			</div>
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">CLASS</span> <a href="F95/Fortran95Definition.html">RDoc::Parser::F95::Fortran95Definition</a></li>
					
					<li><span class="type">CLASS</span> <a href="F95/Token.html">RDoc::Parser::F95::Token</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-block_end%3F">#block_end?</a></li>
					
					<li><a href="#method-i-block_start%3F">#block_start?</a></li>
					
					<li><a href="#method-i-check_external_aliases">#check_external_aliases</a></li>
					
					<li><a href="#method-i-check_public_methods">#check_public_methods</a></li>
					
					<li><a href="#method-i-collect_first_comment">#collect_first_comment</a></li>
					
					<li><a href="#method-i-comment_out%3F">#comment_out?</a></li>
					
					<li><a href="#method-i-continuous_line%3F">#continuous_line?</a></li>
					
					<li><a href="#method-i-definition_info">#definition_info</a></li>
					
					<li><a href="#method-i-find_arguments">#find_arguments</a></li>
					
					<li><a href="#method-i-find_comments">#find_comments</a></li>
					
					<li><a href="#method-i-find_namelists">#find_namelists</a></li>
					
					<li><a href="#method-i-find_visibility">#find_visibility</a></li>
					
					<li><a href="#method-i-initialize_external_method">#initialize_external_method</a></li>
					
					<li><a href="#method-i-initialize_public_method">#initialize_public_method</a></li>
					
					<li><a href="#method-i-parse_program_or_module">#parse_program_or_module</a></li>
					
					<li><a href="#method-i-parse_subprogram">#parse_subprogram</a></li>
					
					<li><a href="#method-i-parse_visibility">#parse_visibility</a></li>
					
					<li><a href="#method-i-remove_empty_head_lines">#remove_empty_head_lines</a></li>
					
					<li><a href="#method-i-remove_header_marker">#remove_header_marker</a></li>
					
					<li><a href="#method-i-remove_private_comments">#remove_private_comments</a></li>
					
					<li><a href="#method-i-remove_trailing_alias">#remove_trailing_alias</a></li>
					
					<li><a href="#method-i-scan">#scan</a></li>
					
					<li><a href="#method-i-semicolon_to_linefeed">#semicolon_to_linefeed</a></li>
					
					<li><a href="#method-i-set_visibility">#set_visibility</a></li>
					
					<li><a href="#method-i-united_to_one_line">#united_to_one_line</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="../../Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="../../README_txt.html">README.txt</a></li>
				
					<li class="file"><a href="../../RI_txt.html">RI.txt</a></li>
				
					<li class="file"><a href="../../test/test_ja_txt.html">test.ja.txt</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../RDoc.html">RDoc</a></li>
				
					<li><a href="../../RDoc/Alias.html">RDoc::Alias</a></li>
				
					<li><a href="../../RDoc/AnonClass.html">RDoc::AnonClass</a></li>
				
					<li><a href="../../RDoc/AnyMethod.html">RDoc::AnyMethod</a></li>
				
					<li><a href="../../RDoc/Attr.html">RDoc::Attr</a></li>
				
					<li><a href="../../RDoc/Cache.html">RDoc::Cache</a></li>
				
					<li><a href="../../RDoc/ClassModule.html">RDoc::ClassModule</a></li>
				
					<li><a href="../../RDoc/CodeObject.html">RDoc::CodeObject</a></li>
				
					<li><a href="../../RDoc/Constant.html">RDoc::Constant</a></li>
				
					<li><a href="../../RDoc/Context.html">RDoc::Context</a></li>
				
					<li><a href="../../RDoc/Context/Section.html">RDoc::Context::Section</a></li>
				
					<li><a href="../../RDoc/DOT.html">RDoc::DOT</a></li>
				
					<li><a href="../../RDoc/DOT/Digraph.html">RDoc::DOT::Digraph</a></li>
				
					<li><a href="../../RDoc/DOT/Edge.html">RDoc::DOT::Edge</a></li>
				
					<li><a href="../../RDoc/DOT/Element.html">RDoc::DOT::Element</a></li>
				
					<li><a href="../../RDoc/DOT/Node.html">RDoc::DOT::Node</a></li>
				
					<li><a href="../../RDoc/DOT/Port.html">RDoc::DOT::Port</a></li>
				
					<li><a href="../../RDoc/DOT/SimpleElement.html">RDoc::DOT::SimpleElement</a></li>
				
					<li><a href="../../RDoc/DOT/Subgraph.html">RDoc::DOT::Subgraph</a></li>
				
					<li><a href="../../RDoc/Diagram.html">RDoc::Diagram</a></li>
				
					<li><a href="../../RDoc/Error.html">RDoc::Error</a></li>
				
					<li><a href="../../RDoc/Generator.html">RDoc::Generator</a></li>
				
					<li><a href="../../RDoc/Generator/AllReferences.html">RDoc::Generator::AllReferences</a></li>
				
					<li><a href="../../RDoc/Generator/Class.html">RDoc::Generator::Class</a></li>
				
					<li><a href="../../RDoc/Generator/Context.html">RDoc::Generator::Context</a></li>
				
					<li><a href="../../RDoc/Generator/Darkfish.html">RDoc::Generator::Darkfish</a></li>
				
					<li><a href="../../RDoc/Generator/File.html">RDoc::Generator::File</a></li>
				
					<li><a href="../../RDoc/Generator/HTML.html">RDoc::Generator::HTML</a></li>
				
					<li><a href="../../RDoc/Generator/HTML/Common.html">RDoc::Generator::HTML::Common</a></li>
				
					<li><a href="../../RDoc/Generator/HTML/HTML.html">RDoc::Generator::HTML::HTML</a></li>
				
					<li><a href="../../RDoc/Generator/HTMLInOne.html">RDoc::Generator::HTMLInOne</a></li>
				
					<li><a href="../../RDoc/Generator/MarkUp.html">RDoc::Generator::MarkUp</a></li>
				
					<li><a href="../../RDoc/Generator/Method.html">RDoc::Generator::Method</a></li>
				
					<li><a href="../../RDoc/Generator/RI.html">RDoc::Generator::RI</a></li>
				
					<li><a href="../../RDoc/Generator/XML.html">RDoc::Generator::XML</a></li>
				
					<li><a href="../../RDoc/GhostMethod.html">RDoc::GhostMethod</a></li>
				
					<li><a href="../../RDoc/Include.html">RDoc::Include</a></li>
				
					<li><a href="../../RDoc/Markup.html">RDoc::Markup</a></li>
				
					<li><a href="../../RDoc/Markup/AttrChanger.html">RDoc::Markup::AttrChanger</a></li>
				
					<li><a href="../../RDoc/Markup/AttrSpan.html">RDoc::Markup::AttrSpan</a></li>
				
					<li><a href="../../RDoc/Markup/Attribute.html">RDoc::Markup::Attribute</a></li>
				
					<li><a href="../../RDoc/Markup/AttributeManager.html">RDoc::Markup::AttributeManager</a></li>
				
					<li><a href="../../RDoc/Markup/BlankLine.html">RDoc::Markup::BlankLine</a></li>
				
					<li><a href="../../RDoc/Markup/Flow.html">RDoc::Markup::Flow</a></li>
				
					<li><a href="../../RDoc/Markup/Flow/LIST.html">RDoc::Markup::Flow::LIST</a></li>
				
					<li><a href="../../RDoc/Markup/Formatter.html">RDoc::Markup::Formatter</a></li>
				
					<li><a href="../../RDoc/Markup/Fragment.html">RDoc::Markup::Fragment</a></li>
				
					<li><a href="../../RDoc/Markup/Heading.html">RDoc::Markup::Heading</a></li>
				
					<li><a href="../../RDoc/Markup/Line.html">RDoc::Markup::Line</a></li>
				
					<li><a href="../../RDoc/Markup/LineCollection.html">RDoc::Markup::LineCollection</a></li>
				
					<li><a href="../../RDoc/Markup/Lines.html">RDoc::Markup::Lines</a></li>
				
					<li><a href="../../RDoc/Markup/ListBase.html">RDoc::Markup::ListBase</a></li>
				
					<li><a href="../../RDoc/Markup/ListEnd.html">RDoc::Markup::ListEnd</a></li>
				
					<li><a href="../../RDoc/Markup/ListItem.html">RDoc::Markup::ListItem</a></li>
				
					<li><a href="../../RDoc/Markup/ListStart.html">RDoc::Markup::ListStart</a></li>
				
					<li><a href="../../RDoc/Markup/Paragraph.html">RDoc::Markup::Paragraph</a></li>
				
					<li><a href="../../RDoc/Markup/PreProcess.html">RDoc::Markup::PreProcess</a></li>
				
					<li><a href="../../RDoc/Markup/Rule.html">RDoc::Markup::Rule</a></li>
				
					<li><a href="../../RDoc/Markup/Special.html">RDoc::Markup::Special</a></li>
				
					<li><a href="../../RDoc/Markup/ToFlow.html">RDoc::Markup::ToFlow</a></li>
				
					<li><a href="../../RDoc/Markup/ToHtml.html">RDoc::Markup::ToHtml</a></li>
				
					<li><a href="../../RDoc/Markup/ToHtmlCrossref.html">RDoc::Markup::ToHtmlCrossref</a></li>
				
					<li><a href="../../RDoc/Markup/ToLaTeX.html">RDoc::Markup::ToLaTeX</a></li>
				
					<li><a href="../../RDoc/Markup/ToTest.html">RDoc::Markup::ToTest</a></li>
				
					<li><a href="../../RDoc/Markup/ToTexInfo.html">RDoc::Markup::ToTexInfo</a></li>
				
					<li><a href="../../RDoc/Markup/Verbatim.html">RDoc::Markup::Verbatim</a></li>
				
					<li><a href="../../RDoc/MetaMethod.html">RDoc::MetaMethod</a></li>
				
					<li><a href="../../RDoc/NormalClass.html">RDoc::NormalClass</a></li>
				
					<li><a href="../../RDoc/NormalModule.html">RDoc::NormalModule</a></li>
				
					<li><a href="../../RDoc/Options.html">RDoc::Options</a></li>
				
					<li><a href="../../RDoc/Parser.html">RDoc::Parser</a></li>
				
					<li><a href="../../RDoc/Parser/C.html">RDoc::Parser::C</a></li>
				
					<li><a href="../../RDoc/Parser/F95.html">RDoc::Parser::F95</a></li>
				
					<li><a href="../../RDoc/Parser/F95/Fortran95Definition.html">RDoc::Parser::F95::Fortran95Definition</a></li>
				
					<li><a href="../../RDoc/Parser/F95/Token.html">RDoc::Parser::F95::Token</a></li>
				
					<li><a href="../../RDoc/Parser/PerlPOD.html">RDoc::Parser::PerlPOD</a></li>
				
					<li><a href="../../RDoc/Parser/Ruby.html">RDoc::Parser::Ruby</a></li>
				
					<li><a href="../../RDoc/Parser/Simple.html">RDoc::Parser::Simple</a></li>
				
					<li><a href="../../RDoc/RDoc.html">RDoc::RDoc</a></li>
				
					<li><a href="../../RDoc/RI.html">RDoc::RI</a></li>
				
					<li><a href="../../RDoc/RI/AliasName.html">RDoc::RI::AliasName</a></li>
				
					<li><a href="../../RDoc/RI/AnsiFormatter.html">RDoc::RI::AnsiFormatter</a></li>
				
					<li><a href="../../RDoc/RI/Attribute.html">RDoc::RI::Attribute</a></li>
				
					<li><a href="../../RDoc/RI/AttributeFormatter.html">RDoc::RI::AttributeFormatter</a></li>
				
					<li><a href="../../RDoc/RI/AttributeFormatter/AttributeString.html">RDoc::RI::AttributeFormatter::AttributeString</a></li>
				
					<li><a href="../../RDoc/RI/Cache.html">RDoc::RI::Cache</a></li>
				
					<li><a href="../../RDoc/RI/ClassDescription.html">RDoc::RI::ClassDescription</a></li>
				
					<li><a href="../../RDoc/RI/ClassEntry.html">RDoc::RI::ClassEntry</a></li>
				
					<li><a href="../../RDoc/RI/Constant.html">RDoc::RI::Constant</a></li>
				
					<li><a href="../../RDoc/RI/DefaultDisplay.html">RDoc::RI::DefaultDisplay</a></li>
				
					<li><a href="../../RDoc/RI/Description.html">RDoc::RI::Description</a></li>
				
					<li><a href="../../RDoc/RI/Display.html">RDoc::RI::Display</a></li>
				
					<li><a href="../../RDoc/RI/Driver.html">RDoc::RI::Driver</a></li>
				
					<li><a href="../../RDoc/RI/Driver/Error.html">RDoc::RI::Driver::Error</a></li>
				
					<li><a href="../../RDoc/RI/Driver/NotFoundError.html">RDoc::RI::Driver::NotFoundError</a></li>
				
					<li><a href="../../RDoc/RI/Driver/OpenStructHash.html">RDoc::RI::Driver::OpenStructHash</a></li>
				
					<li><a href="../../RDoc/RI/Error.html">RDoc::RI::Error</a></li>
				
					<li><a href="../../RDoc/RI/Formatter.html">RDoc::RI::Formatter</a></li>
				
					<li><a href="../../RDoc/RI/HtmlFormatter.html">RDoc::RI::HtmlFormatter</a></li>
				
					<li><a href="../../RDoc/RI/IncludedModule.html">RDoc::RI::IncludedModule</a></li>
				
					<li><a href="../../RDoc/RI/MethodDescription.html">RDoc::RI::MethodDescription</a></li>
				
					<li><a href="../../RDoc/RI/MethodEntry.html">RDoc::RI::MethodEntry</a></li>
				
					<li><a href="../../RDoc/RI/MethodSummary.html">RDoc::RI::MethodSummary</a></li>
				
					<li><a href="../../RDoc/RI/ModuleDescription.html">RDoc::RI::ModuleDescription</a></li>
				
					<li><a href="../../RDoc/RI/NameDescriptor.html">RDoc::RI::NameDescriptor</a></li>
				
					<li><a href="../../RDoc/RI/NamedThing.html">RDoc::RI::NamedThing</a></li>
				
					<li><a href="../../RDoc/RI/OverstrikeFormatter.html">RDoc::RI::OverstrikeFormatter</a></li>
				
					<li><a href="../../RDoc/RI/Reader.html">RDoc::RI::Reader</a></li>
				
					<li><a href="../../RDoc/RI/SimpleFormatter.html">RDoc::RI::SimpleFormatter</a></li>
				
					<li><a href="../../RDoc/RI/TopLevelEntry.html">RDoc::RI::TopLevelEntry</a></li>
				
					<li><a href="../../RDoc/RI/Writer.html">RDoc::RI::Writer</a></li>
				
					<li><a href="../../RDoc/Require.html">RDoc::Require</a></li>
				
					<li><a href="../../RDoc/RubyLex.html">RDoc::RubyLex</a></li>
				
					<li><a href="../../RDoc/RubyLex/BufferedReader.html">RDoc::RubyLex::BufferedReader</a></li>
				
					<li><a href="../../RDoc/RubyToken.html">RDoc::RubyToken</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkError.html">RDoc::RubyToken::TkError</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkId.html">RDoc::RubyToken::TkId</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkKW.html">RDoc::RubyToken::TkKW</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkNode.html">RDoc::RubyToken::TkNode</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkOPASGN.html">RDoc::RubyToken::TkOPASGN</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkOp.html">RDoc::RubyToken::TkOp</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkUnknownChar.html">RDoc::RubyToken::TkUnknownChar</a></li>
				
					<li><a href="../../RDoc/RubyToken/TkVal.html">RDoc::RubyToken::TkVal</a></li>
				
					<li><a href="../../RDoc/RubyToken/Token.html">RDoc::RubyToken::Token</a></li>
				
					<li><a href="../../RDoc/SingleClass.html">RDoc::SingleClass</a></li>
				
					<li><a href="../../RDoc/Stats.html">RDoc::Stats</a></li>
				
					<li><a href="../../RDoc/Stats/Normal.html">RDoc::Stats::Normal</a></li>
				
					<li><a href="../../RDoc/Stats/Quiet.html">RDoc::Stats::Quiet</a></li>
				
					<li><a href="../../RDoc/Stats/Verbose.html">RDoc::Stats::Verbose</a></li>
				
					<li><a href="../../RDoc/TokenStream.html">RDoc::TokenStream</a></li>
				
					<li><a href="../../RDoc/TopLevel.html">RDoc::TopLevel</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">RDoc::Parser::F95</h1>

		<div id="description">
			<h1>Fortran95 <a href="../RDoc.html">RDoc</a> <a href="../Parser.html">Parser</a></h1>
<h2>Overview</h2>
<p>
This parser parses Fortran95 files with suffixes &#8220;f90&#8221;,
&#8220;F90&#8221;, &#8220;f95&#8221; and &#8220;F95&#8221;. Fortran95 files
are expected to be conformed to Fortran95 standards.
</p>
<h2>Rules</h2>
<p>
Fundamental rules are same as that of the <a href="Ruby.html">Ruby</a>
parser.  But comment markers are &#8217;!&#8217; not &#8217;#&#8217;.
</p>
<h3>Correspondence between <a href="../RDoc.html">RDoc</a> documentation and Fortran95 programs</h3>
<p>
<a href="F95.html">F95</a> parses main programs, modules, subroutines,
functions, derived-types, public variables, public constants, defined
operators and defined assignments.  These components are described in items
of <a href="../RDoc.html">RDoc</a> documentation, as follows.
</p>
<table>
<tr><td valign="top">Files </td><td><p>
Files (same as <a href="Ruby.html">Ruby</a>)
</p>
</td></tr>
<tr><td valign="top">Classes</td><td><p>
Modules
</p>
</td></tr>
<tr><td valign="top">Methods</td><td><p>
Subroutines, functions, variables, constants, derived-types, defined
operators, defined assignments
</p>
</td></tr>
<tr><td valign="top">Required files</td><td><p>
Files in which imported modules, external subroutines and external
functions are defined.
</p>
</td></tr>
<tr><td valign="top">Included Modules</td><td><p>
List of imported modules
</p>
</td></tr>
<tr><td valign="top">Attributes</td><td><p>
List of derived-types, List of imported modules all of whose components are
published again
</p>
</td></tr>
</table>
<p>
Components listed in &#8216;Methods&#8217; (subroutines, functions,
&#8230;) defined in modules are described in the item of
&#8216;Classes&#8217;.  On the other hand, components defined in main
programs or as external procedures are described in the item of
&#8216;Files&#8217;.
</p>
<h3>Components parsed by default</h3>
<p>
By default, documentation on public components (subroutines, functions,
variables, constants, derived-types, defined operators, defined
assignments) are generated.
</p>
<p>
With &#8220;&#8212;all&#8221; option, documentation on all components are
generated (almost same as the <a href="Ruby.html">Ruby</a> parser).
</p>
<h3>Information parsed automatically</h3>
<p>
The following information is automatically parsed.
</p>
<ul>
<li><p>
Types of arguments
</p>
</li>
<li><p>
Types of variables and constants
</p>
</li>
<li><p>
Types of variables in the derived types, and initial values
</p>
</li>
<li><p>
NAMELISTs and types of variables in them, and initial values
</p>
</li>
</ul>
<p>
Aliases by interface statement are described in the item of
&#8216;Methods&#8217;.
</p>
<p>
Components which are imported from other modules and published again are
described in the item of &#8216;Methods&#8217;.
</p>
<h3>Format of comment blocks</h3>
<p>
Comment blocks should be written as follows.
</p>
<p>
Comment blocks are considered to be ended when the line without
&#8217;!&#8217; appears.
</p>
<p>
The indentation is not necessary.
</p>
<pre>
  ! (Top of file)
  !
  ! Comment blocks for the files.
  !
  !--
  ! The comment described in the part enclosed by
  ! &quot;!--&quot; and &quot;!++&quot; is ignored.
  !++
  !
  module hogehoge
    !
    ! Comment blocks for the modules (or the programs).
    !
  
    private
  
    logical            :: a     ! a private variable
    real, public       :: b     ! a public variable
    integer, parameter :: c = 0 ! a public constant
  
    public :: c
    public :: MULTI_ARRAY
    public :: hoge, foo
  
    type MULTI_ARRAY
      !
      ! Comment blocks for the derived-types.
      !
      real, pointer :: var(:) =&gt;null() ! Comments block for the variables.
      integer       :: num = 0
    end type MULTI_ARRAY
  
  contains
  
    subroutine hoge( in,   &amp;   ! Comment blocks between continuation lines are ignored.
        &amp;            out )
      !
      ! Comment blocks for the subroutines or functions
      !
      character(*),intent(in):: in ! Comment blocks for the arguments.
      character(*),intent(out),allocatable,target  :: in
                                   ! Comment blocks can be
                                   ! written under Fortran statements.
  
      character(32) :: file ! This comment parsed as a variable in below NAMELIST.
      integer       :: id
  
      namelist /varinfo_nml/ file, id
              !
              ! Comment blocks for the NAMELISTs.
              ! Information about variables are described above.
              !
  
    ....
  
    end subroutine hoge
  
    integer function foo( in )
      !
      ! This part is considered as comment block.
  
      ! Comment blocks under blank lines are ignored.
      !
      integer, intent(in):: inA ! This part is considered as comment block.
  
                                ! This part is ignored.
  
    end function foo
  
    subroutine hide( in,   &amp;
      &amp;              out )      !:nodoc:
      !
      ! If &quot;!:nodoc:&quot; is described at end-of-line in subroutine
      ! statement as above, the subroutine is ignored.
      ! This assignment can be used to modules, subroutines,
      ! functions, variables, constants, derived-types,
      ! defined operators, defined assignments,
      ! list of imported modules (&quot;use&quot; statement).
      !
  
    ....
  
    end subroutine hide
  
  end module hogehoge</pre>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="COMMENTS_ARE_UPPER">COMMENTS_ARE_UPPER</a></dt>
				
				<dd class="description"><table>
<tr><td valign="top">&#8220;false&#8220;</td><td><p>
Comments are below source code
</p>
</td></tr>
<tr><td valign="top">&#8220;true&#8221; </td><td><p>
Comments are upper source code
</p>
</td></tr>
</table></dd>
				
			
				<dt><a name="INTERNAL_ALIAS_MES">INTERNAL_ALIAS_MES</a></dt>
				
				<dd class="description"><p>
Internal alias message
</p></dd>
				
			
				<dt><a name="EXTERNAL_ALIAS_MES">EXTERNAL_ALIAS_MES</a></dt>
				
				<dd class="description"><p>
External alias message
</p></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="scan-method" class="method-detail ">
				<a name="method-i-scan"></a>

				<div class="method-heading">
				
					<span class="method-name">scan</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Define code constructs
</p>
					

					
					<div class="method-source-code"
						id="scan-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 201</span>
201:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan</span>
202:     <span class="ruby-comment cmt"># remove private comment</span>
203:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-ivar">@content</span>)
204: 
205:     <span class="ruby-comment cmt"># continuation lines are united to one line</span>
206:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">united_to_one_line</span>(<span class="ruby-identifier">remaining_code</span>)
207: 
208:     <span class="ruby-comment cmt"># semicolons are replaced to line feed</span>
209:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">semicolon_to_linefeed</span>(<span class="ruby-identifier">remaining_code</span>)
210: 
211:     <span class="ruby-comment cmt"># collect comment for file entity</span>
212:     <span class="ruby-identifier">whole_comment</span>, <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">collect_first_comment</span>(<span class="ruby-identifier">remaining_code</span>)
213:     <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">whole_comment</span>
214: 
215:     <span class="ruby-comment cmt"># String &quot;remaining_code&quot; is converted to Array &quot;remaining_lines&quot;</span>
216:     <span class="ruby-identifier">remaining_lines</span> = <span class="ruby-identifier">remaining_code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
217: 
218:     <span class="ruby-comment cmt"># &quot;module&quot; or &quot;program&quot; parts are parsed (new)</span>
219:     <span class="ruby-comment cmt">#</span>
220:     <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
221:     <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-keyword kw">nil</span>
222:     <span class="ruby-identifier">block_searching_lines</span> = []
223:     <span class="ruby-identifier">pre_comment</span> = []
224:     <span class="ruby-identifier">module_program_trailing</span> = <span class="ruby-value str">&quot;&quot;</span>
225:     <span class="ruby-identifier">module_program_name</span> = <span class="ruby-value str">&quot;&quot;</span>
226:     <span class="ruby-identifier">other_block_level_depth</span> = <span class="ruby-value">0</span>
227:     <span class="ruby-identifier">other_block_searching_flag</span> = <span class="ruby-keyword kw">nil</span>
228:     <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">collect!</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
229:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_searching_flag</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">other_block_searching_flag</span>
230:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?module\s+(\w+)\s*?(!.*?)?$/</span>
231:           <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-value">:module</span>
232:           <span class="ruby-identifier">block_searching_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
233:           <span class="ruby-identifier">module_program_name</span> = <span class="ruby-node">$1</span>
234:           <span class="ruby-identifier">module_program_trailing</span> = <span class="ruby-identifier">find_comments</span>(<span class="ruby-node">$2</span>)
235:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
236:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?program\s+(\w+)\s*?(!.*?)?$/</span> <span class="ruby-operator">||</span>
237:                <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?\w/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
238:           <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-value">:program</span>
239:           <span class="ruby-identifier">block_searching_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
240:           <span class="ruby-identifier">module_program_name</span> = <span class="ruby-node">$1</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
241:           <span class="ruby-identifier">module_program_trailing</span> = <span class="ruby-identifier">find_comments</span>(<span class="ruby-node">$2</span>)
242:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
243: 
244:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
245:           <span class="ruby-identifier">other_block_searching_flag</span> = <span class="ruby-keyword kw">true</span>
246:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">line</span>
247: 
248:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?!\s?(.*)/</span>
249:           <span class="ruby-identifier">pre_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
250:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">line</span>
251:         <span class="ruby-keyword kw">else</span>
252:           <span class="ruby-identifier">pre_comment</span> = []
253:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">line</span>
254:         <span class="ruby-keyword kw">end</span>
255:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">other_block_searching_flag</span>
256:         <span class="ruby-identifier">other_block_level_depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
257:         <span class="ruby-identifier">other_block_level_depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_end?</span>(<span class="ruby-identifier">line</span>)
258:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other_block_level_depth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
259:           <span class="ruby-identifier">other_block_level_depth</span> = <span class="ruby-value">0</span>
260:           <span class="ruby-identifier">other_block_searching_flag</span> = <span class="ruby-keyword kw">nil</span>
261:         <span class="ruby-keyword kw">end</span>
262:         <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">line</span>
263:       <span class="ruby-keyword kw">end</span>
264: 
265:       <span class="ruby-identifier">block_searching_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
266:       <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
267:       <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_end?</span>(<span class="ruby-identifier">line</span>)
268:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>
269:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
270:       <span class="ruby-keyword kw">end</span>
271: 
272:       <span class="ruby-comment cmt"># &quot;module_program_code&quot; is formatted.</span>
273:       <span class="ruby-comment cmt"># &quot;:nodoc:&quot; flag is checked.</span>
274:       <span class="ruby-comment cmt">#</span>
275:       <span class="ruby-identifier">module_program_code</span> = <span class="ruby-identifier">block_searching_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
276:       <span class="ruby-identifier">module_program_code</span> = <span class="ruby-identifier">remove_empty_head_lines</span>(<span class="ruby-identifier">module_program_code</span>)
277:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">module_program_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^:nodoc:/</span>
278:         <span class="ruby-comment cmt"># next loop to search next block</span>
279:         <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
280:         <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-keyword kw">false</span>
281:         <span class="ruby-identifier">block_searching_lines</span> = []
282:         <span class="ruby-identifier">pre_comment</span> = []
283:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
284:       <span class="ruby-keyword kw">end</span>
285: 
286:       <span class="ruby-comment cmt"># NormalClass is created, and added to @top_level</span>
287:       <span class="ruby-comment cmt">#</span>
288:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_searching_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">:module</span>
289:         <span class="ruby-identifier">module_name</span> = <span class="ruby-identifier">module_program_name</span>
290:         <span class="ruby-identifier">module_code</span> = <span class="ruby-identifier">module_program_code</span>
291:         <span class="ruby-identifier">module_trailing</span> = <span class="ruby-identifier">module_program_trailing</span>
292: 
293:         <span class="ruby-identifier">f9x_module</span> = <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">NormalClass</span>, <span class="ruby-identifier">module_name</span>
294:         <span class="ruby-identifier">f9x_module</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
295: 
296:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-identifier">f9x_module</span>
297: 
298:         <span class="ruby-identifier">f9x_comment</span> = <span class="ruby-constant">COMMENTS_ARE_UPPER</span> <span class="ruby-operator">?</span>
299:           <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">pre_comment</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>))  <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">module_trailing</span> <span class="ruby-operator">:</span>
300:             <span class="ruby-identifier">module_trailing</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">module_code</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^.*$\n/</span>, <span class="ruby-value str">''</span>))
301:         <span class="ruby-identifier">f9x_module</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">f9x_comment</span>
302:         <span class="ruby-identifier">parse_program_or_module</span>(<span class="ruby-identifier">f9x_module</span>, <span class="ruby-identifier">module_code</span>)
303: 
304:         <span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">all_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">toplevel</span><span class="ruby-operator">|</span>
305:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">toplevel</span>.<span class="ruby-identifier">include_includes?</span>(<span class="ruby-identifier">module_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
306:             <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">toplevel</span>.<span class="ruby-identifier">include_requires?</span>(<span class="ruby-ivar">@file_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
307:               <span class="ruby-identifier">toplevel</span>.<span class="ruby-identifier">add_require</span>(<span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@file_name</span>, <span class="ruby-value str">&quot;&quot;</span>))
308:             <span class="ruby-keyword kw">end</span>
309:           <span class="ruby-keyword kw">end</span>
310:           <span class="ruby-identifier">toplevel</span>.<span class="ruby-identifier">each_classmodule</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
311:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">include_includes?</span>(<span class="ruby-identifier">module_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
312:               <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">m</span>.<span class="ruby-identifier">include_requires?</span>(<span class="ruby-ivar">@file_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
313:                 <span class="ruby-identifier">m</span>.<span class="ruby-identifier">add_require</span>(<span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@file_name</span>, <span class="ruby-value str">&quot;&quot;</span>))
314:               <span class="ruby-keyword kw">end</span>
315:             <span class="ruby-keyword kw">end</span>
316:           }
317:         <span class="ruby-keyword kw">end</span>
318:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">block_searching_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">:program</span>
319:         <span class="ruby-identifier">program_name</span> = <span class="ruby-identifier">module_program_name</span>
320:         <span class="ruby-identifier">program_code</span> = <span class="ruby-identifier">module_program_code</span>
321:         <span class="ruby-identifier">program_trailing</span> = <span class="ruby-identifier">module_program_trailing</span>
322:         <span class="ruby-comment cmt"># progress &quot;p&quot; # HACK what stats thingy does this correspond to?</span>
323:         <span class="ruby-identifier">program_comment</span> = <span class="ruby-constant">COMMENTS_ARE_UPPER</span> <span class="ruby-operator">?</span>
324:           <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">pre_comment</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">program_trailing</span> <span class="ruby-operator">:</span>
325:             <span class="ruby-identifier">program_trailing</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">program_code</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^.*$\n/</span>, <span class="ruby-value str">''</span>))
326:         <span class="ruby-identifier">program_comment</span> = <span class="ruby-node">&quot;\n\n= &lt;i&gt;Program&lt;/i&gt; &lt;tt&gt;#{program_name}&lt;/tt&gt;\n\n&quot;</span>                            <span class="ruby-operator">+</span> <span class="ruby-identifier">program_comment</span>
327:         <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">program_comment</span>
328:         <span class="ruby-identifier">parse_program_or_module</span>(<span class="ruby-ivar">@top_level</span>, <span class="ruby-identifier">program_code</span>, <span class="ruby-value">:private</span>)
329:       <span class="ruby-keyword kw">end</span>
330: 
331:       <span class="ruby-comment cmt"># next loop to search next block</span>
332:       <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
333:       <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-keyword kw">false</span>
334:       <span class="ruby-identifier">block_searching_lines</span> = []
335:       <span class="ruby-identifier">pre_comment</span> = []
336:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
337:     }
338: 
339:     <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">delete_if</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
340:       <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
341:     }
342: 
343:     <span class="ruby-comment cmt"># External subprograms and functions are parsed</span>
344:     <span class="ruby-comment cmt">#</span>
345:     <span class="ruby-identifier">parse_program_or_module</span>(<span class="ruby-ivar">@top_level</span>, <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>),
346:                             <span class="ruby-value">:public</span>, <span class="ruby-keyword kw">true</span>)
347: 
348:     <span class="ruby-ivar">@top_level</span>
349:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="block-end--method" class="method-detail ">
				<a name="method-i-block_end%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">block_end?</span><span
						class="method-args">(line)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Which &#8220;line&#8221; is end of block (module, program, block data,
subroutine, function) statement ?
</p>
					

					
					<div class="method-source-code"
						id="block-end--source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1574</span>
1574:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">block_end?</span>(<span class="ruby-identifier">line</span>)
1575:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>
1576: 
1577:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?end\s*?(!.*?)?$/</span>                 <span class="ruby-operator">||</span>
1578:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?end\s+module(\s+\w+)?\s*?(!.*?)?$/</span>       <span class="ruby-operator">||</span>
1579:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?end\s+program(\s+\w+)?\s*?(!.*?)?$/</span>      <span class="ruby-operator">||</span>
1580:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?end\s+block\s+data(\s+\w+)?\s*?(!.*?)?$/</span>  <span class="ruby-operator">||</span>
1581:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?end\s+subroutine(\s+\w+)?\s*?(!.*?)?$/</span>   <span class="ruby-operator">||</span>
1582:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?end\s+function(\s+\w+)?\s*?(!.*?)?$/</span>
1583:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
1584:     <span class="ruby-keyword kw">end</span>
1585: 
1586:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1587:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="block-start--method" class="method-detail ">
				<a name="method-i-block_start%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">block_start?</span><span
						class="method-args">(line)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Which &#8220;line&#8221; is start of block (module, program, block data,
subroutine, function) statement ?
</p>
					

					
					<div class="method-source-code"
						id="block-start--source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1538</span>
1538:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
1539:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>
1540: 
1541:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?module\s+(\w+)\s*?(!.*?)?$/</span>    <span class="ruby-operator">||</span>
1542:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?program\s+(\w+)\s*?(!.*?)?$/</span>  <span class="ruby-operator">||</span>
1543:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?block\s+data(\s+\w+)?\s*?(!.*?)?$/</span>     <span class="ruby-operator">||</span>
1544:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span>                  <span class="ruby-regexp re">/^\s*?
1545:                  (recursive|pure|elemental)?\s*?
1546:                  subroutine\s+(\w+)\s*?(\(.*?\))?\s*?(!.*?)?$
1547:                 /</span><span class="ruby-identifier">x</span> <span class="ruby-operator">||</span>
1548:         <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span>                  <span class="ruby-regexp re">/^\s*?
1549:                  (recursive|pure|elemental)?\s*?
1550:                  (
1551:                      character\s*?(\([\w\s\=\(\)\*]+?\))?\s+
1552:                    | type\s*?\([\w\s]+?\)\s+
1553:                    | integer\s*?(\([\w\s\=\(\)\*]+?\))?\s+
1554:                    | real\s*?(\([\w\s\=\(\)\*]+?\))?\s+
1555:                    | double\s+precision\s+
1556:                    | logical\s*?(\([\w\s\=\(\)\*]+?\))?\s+
1557:                    | complex\s*?(\([\w\s\=\(\)\*]+?\))?\s+
1558:                  )?
1559:                  function\s+(\w+)\s*?
1560:                  (\(.*?\))?(\s+result\((.*?)\))?\s*?(!.*?)?$
1561:                 /</span><span class="ruby-identifier">x</span>
1562:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
1563:     <span class="ruby-keyword kw">end</span>
1564: 
1565:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1566:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="check-external-aliases-method" class="method-detail ">
				<a name="method-i-check_external_aliases"></a>

				<div class="method-heading">
				
					<span class="method-name">check_external_aliases</span><span
						class="method-args">(subname, params, comment, test=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Check external aliases
</p>
					

					
					<div class="method-source-code"
						id="check-external-aliases-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1322</span>
1322:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_external_aliases</span>(<span class="ruby-identifier">subname</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">test</span>=<span class="ruby-keyword kw">nil</span>)
1323:     <span class="ruby-identifier">@@external_aliases</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">alias_item</span><span class="ruby-operator">|</span>
1324:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">subname</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;old_name&quot;</span>] <span class="ruby-operator">||</span>
1325:                   <span class="ruby-identifier">subname</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;old_name&quot;</span>].<span class="ruby-identifier">upcase</span> <span class="ruby-operator">&amp;&amp;</span>
1326:                           <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>
1327: 
1328:         <span class="ruby-identifier">new_meth</span> = <span class="ruby-identifier">initialize_external_method</span>(<span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;new_name&quot;</span>],
1329:                                               <span class="ruby-identifier">subname</span>, <span class="ruby-identifier">params</span>, <span class="ruby-ivar">@file_name</span>,
1330:                                               <span class="ruby-identifier">comment</span>)
1331:         <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;visibility&quot;</span>]
1332: 
1333:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
1334: 
1335:         <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;file_or_module&quot;</span>].<span class="ruby-identifier">add_method</span>(<span class="ruby-identifier">new_meth</span>)
1336: 
1337:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;file_or_module&quot;</span>].<span class="ruby-identifier">include_requires?</span>(<span class="ruby-ivar">@file_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
1338:           <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;file_or_module&quot;</span>].<span class="ruby-identifier">add_require</span>(<span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@file_name</span>, <span class="ruby-value str">&quot;&quot;</span>))
1339:         <span class="ruby-keyword kw">end</span>
1340:       <span class="ruby-keyword kw">end</span>
1341:     }
1342:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="check-public-methods-method" class="method-detail ">
				<a name="method-i-check_public_methods"></a>

				<div class="method-heading">
				
					<span class="method-name">check_public_methods</span><span
						class="method-args">(method, parent)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Check public_methods
</p>
					

					
					<div class="method-source-code"
						id="check-public-methods-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1347</span>
1347:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_public_methods</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">parent</span>)
1348:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">method</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parent</span>
1349:     <span class="ruby-identifier">@@public_methods</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">alias_item</span><span class="ruby-operator">|</span>
1350:       <span class="ruby-identifier">parent_is_used_module</span> = <span class="ruby-keyword kw">nil</span>
1351:       <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;used_modules&quot;</span>].<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">used_module</span><span class="ruby-operator">|</span>
1352:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">used_module</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">||</span>
1353:             <span class="ruby-identifier">used_module</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">&amp;&amp;</span>
1354:             <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>
1355:           <span class="ruby-identifier">parent_is_used_module</span> = <span class="ruby-keyword kw">true</span>
1356:         <span class="ruby-keyword kw">end</span>
1357:       }
1358:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parent_is_used_module</span>
1359: 
1360:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;name&quot;</span>] <span class="ruby-operator">||</span>
1361:           <span class="ruby-identifier">method</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;name&quot;</span>].<span class="ruby-identifier">upcase</span> <span class="ruby-operator">&amp;&amp;</span>
1362:           <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>
1363: 
1364:         <span class="ruby-identifier">new_meth</span> = <span class="ruby-identifier">initialize_public_method</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">parent</span>)
1365:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;local_name&quot;</span>]
1366:           <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;local_name&quot;</span>]
1367:         <span class="ruby-keyword kw">end</span>
1368: 
1369:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
1370: 
1371:         <span class="ruby-identifier">alias_item</span>[<span class="ruby-value str">&quot;file_or_module&quot;</span>].<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
1372:       <span class="ruby-keyword kw">end</span>
1373:     }
1374:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="collect-first-comment-method" class="method-detail ">
				<a name="method-i-collect_first_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">collect_first_comment</span><span
						class="method-args">(body)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Collect comment for file entity
</p>
					

					
					<div class="method-source-code"
						id="collect-first-comment-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1039</span>
1039:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collect_first_comment</span>(<span class="ruby-identifier">body</span>)
1040:     <span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1041:     <span class="ruby-identifier">not_comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1042:     <span class="ruby-identifier">comment_start</span> = <span class="ruby-keyword kw">false</span>
1043:     <span class="ruby-identifier">comment_end</span>   = <span class="ruby-keyword kw">false</span>
1044:     <span class="ruby-identifier">body</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1045:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment_end</span>
1046:         <span class="ruby-identifier">not_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
1047:         <span class="ruby-identifier">not_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1048:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/^\s*?!\s?(.*)$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1049:         <span class="ruby-identifier">comment_start</span> = <span class="ruby-keyword kw">true</span>
1050:         <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">$1</span>
1051:         <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1052:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/^\s*?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1053:         <span class="ruby-identifier">comment_end</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment_start</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">COMMENTS_ARE_UPPER</span>
1054:       <span class="ruby-keyword kw">else</span>
1055:         <span class="ruby-identifier">comment_end</span> = <span class="ruby-keyword kw">true</span>
1056:         <span class="ruby-identifier">not_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
1057:         <span class="ruby-identifier">not_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1058:       <span class="ruby-keyword kw">end</span>
1059:     }
1060:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">not_comment</span>
1061:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="comment-out--method" class="method-detail ">
				<a name="method-i-comment_out%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">comment_out?</span><span
						class="method-args">(line)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Comment out checker
</p>
					

					
					<div class="method-source-code"
						id="comment-out--source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1469</span>
1469:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">comment_out?</span>(<span class="ruby-identifier">line</span>)
1470:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">line</span>
1471:     <span class="ruby-identifier">commentout</span> = <span class="ruby-keyword kw">false</span>
1472:     <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span>
1473:     <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">char</span><span class="ruby-operator">|</span>
1474:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">squote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">dquote</span>)
1475:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1476:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;!&quot;</span> ; <span class="ruby-identifier">commentout</span> = <span class="ruby-keyword kw">true</span> ; <span class="ruby-keyword kw">break</span>
1477:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">true</span>
1478:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">true</span>
1479:         <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span>
1480:         <span class="ruby-keyword kw">end</span>
1481:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">squote</span>
1482:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1483:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span>
1484:         <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span>
1485:         <span class="ruby-keyword kw">end</span>
1486:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">dquote</span>
1487:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1488:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span>
1489:         <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span>
1490:         <span class="ruby-keyword kw">end</span>
1491:       <span class="ruby-keyword kw">end</span>
1492:     }
1493:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">commentout</span>
1494:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="continuous-line--method" class="method-detail ">
				<a name="method-i-continuous_line%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">continuous_line?</span><span
						class="method-args">(line)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Continuous line checker
</p>
					

					
					<div class="method-source-code"
						id="continuous-line--source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1455</span>
1455:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">continuous_line?</span>(<span class="ruby-identifier">line</span>)
1456:     <span class="ruby-identifier">continuous</span> = <span class="ruby-keyword kw">false</span>
1457:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/&amp;\s*?(!.*)?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1458:       <span class="ruby-identifier">continuous</span> = <span class="ruby-keyword kw">true</span>
1459:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment_out?</span>(<span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>)
1460:         <span class="ruby-identifier">continuous</span> = <span class="ruby-keyword kw">false</span>
1461:       <span class="ruby-keyword kw">end</span>
1462:     <span class="ruby-keyword kw">end</span>
1463:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">continuous</span>
1464:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="definition-info-method" class="method-detail ">
				<a name="method-i-definition_info"></a>

				<div class="method-heading">
				
					<span class="method-name">definition_info</span><span
						class="method-args">(text)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parse string argument &#8220;text&#8221;, and Return Array of <a
href="F95/Fortran95Definition.html">Fortran95Definition</a> object
</p>
					

					
					<div class="method-source-code"
						id="definition-info-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1705</span>
1705:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">definition_info</span>(<span class="ruby-identifier">text</span>)
1706:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>
1707:     <span class="ruby-identifier">lines</span> = <span class="ruby-node">&quot;#{text}&quot;</span>
1708:     <span class="ruby-identifier">defs</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
1709:     <span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1710:     <span class="ruby-identifier">trailing_comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1711:     <span class="ruby-identifier">under_comment_valid</span> = <span class="ruby-keyword kw">false</span>
1712:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1713:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\s*?!\s?(.*)/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1714:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">COMMENTS_ARE_UPPER</span>
1715:           <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">remove_header_marker</span>(<span class="ruby-node">$1</span>)
1716:           <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1717:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">defs</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">under_comment_valid</span>
1718:           <span class="ruby-identifier">defs</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1719:           <span class="ruby-identifier">defs</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">remove_header_marker</span>(<span class="ruby-node">$1</span>)
1720:         <span class="ruby-keyword kw">end</span>
1721:         <span class="ruby-keyword kw">next</span>
1722:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/^\s*?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1723:         <span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1724:         <span class="ruby-identifier">under_comment_valid</span> = <span class="ruby-keyword kw">false</span>
1725:         <span class="ruby-keyword kw">next</span>
1726:       <span class="ruby-keyword kw">end</span>
1727:       <span class="ruby-identifier">type</span> = <span class="ruby-value str">&quot;&quot;</span>
1728:       <span class="ruby-identifier">characters</span> = <span class="ruby-value str">&quot;&quot;</span>
1729:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
1730:                   (
1731:                       character\s*?(\([\w\s\=\(\)\*]+?\))?[\s\,]*
1732:                     | type\s*?\([\w\s]+?\)[\s\,]*
1733:                     | integer\s*?(\([\w\s\=\(\)\*]+?\))?[\s\,]*
1734:                     | real\s*?(\([\w\s\=\(\)\*]+?\))?[\s\,]*
1735:                     | double\s+precision[\s\,]*
1736:                     | logical\s*?(\([\w\s\=\(\)\*]+?\))?[\s\,]*
1737:                     | complex\s*?(\([\w\s\=\(\)\*]+?\))?[\s\,]*
1738:                   )
1739:                   (.*?::)?
1740:                   (.+)$
1741:                  /</span><span class="ruby-identifier">x</span>
1742:         <span class="ruby-identifier">characters</span> = <span class="ruby-node">$8</span>
1743:         <span class="ruby-identifier">type</span> = <span class="ruby-node">$1</span>
1744:         <span class="ruby-identifier">type</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">$7</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/::/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\s*?\,/</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-node">$7</span>
1745:       <span class="ruby-keyword kw">else</span>
1746:         <span class="ruby-identifier">under_comment_valid</span> = <span class="ruby-keyword kw">false</span>
1747:         <span class="ruby-keyword kw">next</span>
1748:       <span class="ruby-keyword kw">end</span>
1749:       <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">bracket</span> = <span class="ruby-value">0</span>
1750:       <span class="ruby-identifier">iniflag</span> = <span class="ruby-keyword kw">false</span>; <span class="ruby-identifier">commentflag</span> = <span class="ruby-keyword kw">false</span>
1751:       <span class="ruby-identifier">varname</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">arraysuffix</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">inivalue</span> = <span class="ruby-value str">&quot;&quot;</span>
1752:       <span class="ruby-identifier">start_pos</span> = <span class="ruby-identifier">defs</span>.<span class="ruby-identifier">size</span>
1753:       <span class="ruby-identifier">characters</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">char</span><span class="ruby-operator">|</span>
1754:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">squote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">dquote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bracket</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">iniflag</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">commentflag</span>)
1755:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1756:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;!&quot;</span> ; <span class="ruby-identifier">commentflag</span> = <span class="ruby-keyword kw">true</span>
1757:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;(&quot;</span> ; <span class="ruby-identifier">bracket</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>       ; <span class="ruby-identifier">arraysuffix</span> = <span class="ruby-identifier">char</span>
1758:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">true</span>
1759:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">true</span>
1760:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;=&quot;</span> ; <span class="ruby-identifier">iniflag</span> = <span class="ruby-keyword kw">true</span>     ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1761:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;,&quot;</span>
1762:             <span class="ruby-identifier">defs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Fortran95Definition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">varname</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">inivalue</span>, <span class="ruby-identifier">arraysuffix</span>, <span class="ruby-identifier">comment</span>)
1763:             <span class="ruby-identifier">varname</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">arraysuffix</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">inivalue</span> = <span class="ruby-value str">&quot;&quot;</span>
1764:             <span class="ruby-identifier">under_comment_valid</span> = <span class="ruby-keyword kw">true</span>
1765:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot; &quot;</span> ; <span class="ruby-keyword kw">next</span>
1766:           <span class="ruby-keyword kw">else</span>     ; <span class="ruby-identifier">varname</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1767:           <span class="ruby-keyword kw">end</span>
1768:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">commentflag</span>
1769:           <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">remove_header_marker</span>(<span class="ruby-identifier">char</span>)
1770:           <span class="ruby-identifier">trailing_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">remove_header_marker</span>(<span class="ruby-identifier">char</span>)
1771:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">iniflag</span>
1772:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dquote</span>
1773:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1774:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span> ; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1775:             <span class="ruby-keyword kw">else</span>      ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1776:             <span class="ruby-keyword kw">end</span>
1777:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">squote</span>
1778:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1779:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span> ; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1780:             <span class="ruby-keyword kw">else</span>      ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1781:             <span class="ruby-keyword kw">end</span>
1782:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">bracket</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
1783:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1784:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;(&quot;</span> ; <span class="ruby-identifier">bracket</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1785:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;)&quot;</span> ; <span class="ruby-identifier">bracket</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1786:             <span class="ruby-keyword kw">else</span>     ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1787:             <span class="ruby-keyword kw">end</span>
1788:           <span class="ruby-keyword kw">else</span>
1789:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1790:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;,&quot;</span>
1791:               <span class="ruby-identifier">defs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Fortran95Definition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">varname</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">inivalue</span>, <span class="ruby-identifier">arraysuffix</span>, <span class="ruby-identifier">comment</span>)
1792:               <span class="ruby-identifier">varname</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">arraysuffix</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">inivalue</span> = <span class="ruby-value str">&quot;&quot;</span>
1793:               <span class="ruby-identifier">iniflag</span> = <span class="ruby-keyword kw">false</span>
1794:               <span class="ruby-identifier">under_comment_valid</span> = <span class="ruby-keyword kw">true</span>
1795:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;(&quot;</span> ; <span class="ruby-identifier">bracket</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1796:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">true</span>  ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1797:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">true</span>  ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1798:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;!&quot;</span> ; <span class="ruby-identifier">commentflag</span> = <span class="ruby-keyword kw">true</span>
1799:             <span class="ruby-keyword kw">else</span>     ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1800:             <span class="ruby-keyword kw">end</span>
1801:           <span class="ruby-keyword kw">end</span>
1802:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">squote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">dquote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">bracket</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
1803:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1804:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;(&quot;</span> ; <span class="ruby-identifier">bracket</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> ; <span class="ruby-identifier">arraysuffix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1805:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;)&quot;</span> ; <span class="ruby-identifier">bracket</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> ; <span class="ruby-identifier">arraysuffix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1806:           <span class="ruby-keyword kw">else</span>     ; <span class="ruby-identifier">arraysuffix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1807:           <span class="ruby-keyword kw">end</span>
1808:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">squote</span>
1809:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1810:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1811:           <span class="ruby-keyword kw">else</span>     ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1812:           <span class="ruby-keyword kw">end</span>
1813:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">dquote</span>
1814:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1815:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1816:           <span class="ruby-keyword kw">else</span>     ; <span class="ruby-identifier">inivalue</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>
1817:           <span class="ruby-keyword kw">end</span>
1818:         <span class="ruby-keyword kw">end</span>
1819:       }
1820:       <span class="ruby-identifier">defs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Fortran95Definition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">varname</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">inivalue</span>, <span class="ruby-identifier">arraysuffix</span>, <span class="ruby-identifier">comment</span>)
1821:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trailing_comment</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^:nodoc:/</span>
1822:         <span class="ruby-identifier">defs</span>[<span class="ruby-identifier">start_pos</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>].<span class="ruby-identifier">collect!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">defitem</span><span class="ruby-operator">|</span>
1823:           <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">nodoc</span> = <span class="ruby-keyword kw">true</span>
1824:         }
1825:       <span class="ruby-keyword kw">end</span>
1826:       <span class="ruby-identifier">varname</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">arraysuffix</span> = <span class="ruby-value str">&quot;&quot;</span> ; <span class="ruby-identifier">inivalue</span> = <span class="ruby-value str">&quot;&quot;</span>
1827:       <span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1828:       <span class="ruby-identifier">under_comment_valid</span> = <span class="ruby-keyword kw">true</span>
1829:       <span class="ruby-identifier">trailing_comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1830:     }
1831:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">defs</span>
1832:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="find-arguments-method" class="method-detail ">
				<a name="method-i-find_arguments"></a>

				<div class="method-heading">
				
					<span class="method-name">find_arguments</span><span
						class="method-args">(args, text, all=nil, indent=nil, modified_params=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return comments of definitions of arguments
</p>
<p>
If &#8220;all&#8221; argument is true, information of all arguments are
returned.
</p>
<p>
If &#8220;modified_params&#8220; is true, list of arguments are decorated,
for example, optional arguments are parenthetic as &#8220;[arg]&#8221;.
</p>
					

					
					<div class="method-source-code"
						id="find-arguments-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1072</span>
1072:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_arguments</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">text</span>, <span class="ruby-identifier">all</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">indent</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">modified_params</span>=<span class="ruby-keyword kw">nil</span>)
1073:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">args</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">all</span>
1074:     <span class="ruby-identifier">indent</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">indent</span>
1075:     <span class="ruby-identifier">args</span> = [<span class="ruby-value str">&quot;all&quot;</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all</span>
1076:     <span class="ruby-identifier">params</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">modified_params</span>
1077:     <span class="ruby-identifier">comma</span> = <span class="ruby-value str">&quot;&quot;</span>
1078:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>
1079:     <span class="ruby-identifier">args_rdocforms</span> = <span class="ruby-value str">&quot;\n&quot;</span>
1080:     <span class="ruby-identifier">remaining_lines</span> = <span class="ruby-node">&quot;#{text}&quot;</span>
1081:     <span class="ruby-identifier">definitions</span> = <span class="ruby-identifier">definition_info</span>(<span class="ruby-identifier">remaining_lines</span>)
1082:     <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
1083:       <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">strip!</span>
1084:       <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">chomp!</span>
1085:       <span class="ruby-identifier">definitions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">defitem</span><span class="ruby-operator">|</span>
1086:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">varname</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">all</span>
1087:           <span class="ruby-identifier">args_rdocforms</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">#{indent}&lt;tt&gt;&lt;b&gt;#{defitem.varname.chomp.strip}#{defitem.arraysuffix}&lt;/b&gt; #{defitem.inivalue}&lt;/tt&gt; ::#{indent}   &lt;tt&gt;#{defitem.types.chomp.strip}&lt;/tt&gt;</span>
1088:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">comment</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
1089:             <span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&quot;</span>
1090:             <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">comment</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1091:               <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;       &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
1092:             }
1093:             <span class="ruby-identifier">args_rdocforms</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">#{indent}   &lt;tt&gt;&lt;/tt&gt; ::#{indent}       &lt;tt&gt;&lt;/tt&gt;#{indent}       #{comment.chomp.strip}</span>
1094:           <span class="ruby-keyword kw">end</span>
1095: 
1096:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">modified_params</span>
1097:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">include_attr?</span>(<span class="ruby-value str">&quot;optional&quot;</span>)
1098:               <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{comma}[#{arg}]&quot;</span>
1099:             <span class="ruby-keyword kw">else</span>
1100:               <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{comma}#{arg}&quot;</span>
1101:             <span class="ruby-keyword kw">end</span>
1102:             <span class="ruby-identifier">comma</span> = <span class="ruby-value str">&quot;, &quot;</span>
1103:           <span class="ruby-keyword kw">end</span>
1104:         <span class="ruby-keyword kw">end</span>
1105:       }
1106:     }
1107:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">modified_params</span>
1108:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">args_rdocforms</span>, <span class="ruby-identifier">params</span>
1109:     <span class="ruby-keyword kw">else</span>
1110:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">args_rdocforms</span>
1111:     <span class="ruby-keyword kw">end</span>
1112:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="find-comments-method" class="method-detail ">
				<a name="method-i-find_comments"></a>

				<div class="method-heading">
				
					<span class="method-name">find_comments</span><span
						class="method-args">(text)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Comments just after module or subprogram, or arguments are returned. If
&#8220;<a href="F95.html#COMMENTS_ARE_UPPER">COMMENTS_ARE_UPPER</a>&#8220;
is true, comments just before modules or subprograms are returnd
</p>
					

					
					<div class="method-source-code"
						id="find-comments-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1152</span>
1152:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_comments</span> <span class="ruby-identifier">text</span>
1153:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>
1154:     <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1155:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">reverse!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">COMMENTS_ARE_UPPER</span>
1156:     <span class="ruby-identifier">comment_block</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
1157:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1158:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?\w/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?$/</span>
1159:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">COMMENTS_ARE_UPPER</span>
1160:         <span class="ruby-identifier">comment_block</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^\s*?!\s?/</span>,<span class="ruby-value str">&quot;&quot;</span>)
1161:       <span class="ruby-keyword kw">else</span>
1162:         <span class="ruby-identifier">comment_block</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^\s*?!\s?/</span>,<span class="ruby-value str">&quot;&quot;</span>)
1163:       <span class="ruby-keyword kw">end</span>
1164:     <span class="ruby-keyword kw">end</span>
1165:     <span class="ruby-identifier">nice_lines</span> = <span class="ruby-identifier">comment_block</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">split</span> <span class="ruby-value str">&quot;\n\s*?\n&quot;</span>
1166:     <span class="ruby-identifier">nice_lines</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;&quot;</span>
1167:     <span class="ruby-identifier">nice_lines</span>.<span class="ruby-identifier">shift</span>
1168:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="find-namelists-method" class="method-detail ">
				<a name="method-i-find_namelists"></a>

				<div class="method-heading">
				
					<span class="method-name">find_namelists</span><span
						class="method-args">(text, before_contains=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Return comments of definitions of namelists
</p>
					

					
					<div class="method-source-code"
						id="find-namelists-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1126</span>
1126:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_namelists</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">before_contains</span>=<span class="ruby-keyword kw">nil</span>)
1127:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">text</span>
1128:     <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&quot;</span>
1129:     <span class="ruby-identifier">lines</span> = <span class="ruby-node">&quot;#{text}&quot;</span>
1130:     <span class="ruby-identifier">before_contains</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">before_contains</span>
1131:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">lines</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?namelist\s+\/\s*?(\w+)\s*?\/([\s\w\,]+)$/</span>
1132:       <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>
1133:       <span class="ruby-identifier">nml_comment</span> = <span class="ruby-constant">COMMENTS_ARE_UPPER</span> <span class="ruby-operator">?</span>
1134:           <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>)
1135:       <span class="ruby-identifier">nml_name</span> = <span class="ruby-node">$1</span>
1136:       <span class="ruby-identifier">nml_args</span> = <span class="ruby-node">$2</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>)
1137:       <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n\n=== NAMELIST &lt;tt&gt;&lt;b&gt;&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">nml_name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;&lt;/tt&gt;&lt;/b&gt;\n\n&quot;</span>
1138:       <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">nml_comment</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nml_comment</span>
1139:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)[<span class="ruby-value">0</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\//</span>
1140:         <span class="ruby-identifier">lines</span> = <span class="ruby-value str">&quot;namelist &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lines</span>
1141:       <span class="ruby-keyword kw">end</span>
1142:       <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">find_arguments</span>(<span class="ruby-identifier">nml_args</span>, <span class="ruby-node">&quot;#{text}&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">before_contains</span>)
1143:     <span class="ruby-keyword kw">end</span>
1144:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
1145:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="find-visibility-method" class="method-detail ">
				<a name="method-i-find_visibility"></a>

				<div class="method-heading">
				
					<span class="method-name">find_visibility</span><span
						class="method-args">(container, subname, visibility_info)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Find visibility
</p>
					

					
					<div class="method-source-code"
						id="find-visibility-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1306</span>
1306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">subname</span>, <span class="ruby-identifier">visibility_info</span>)
1307:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">subname</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">visibility_info</span>
1308:     <span class="ruby-identifier">visibility_info</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">info</span><span class="ruby-operator">|</span>
1309:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;name&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">subname</span> <span class="ruby-operator">||</span>
1310:           <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;name&quot;</span>].<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">subname</span>.<span class="ruby-identifier">upcase</span>
1311:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;parent&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
1312:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;visibility&quot;</span>]
1313:         <span class="ruby-keyword kw">end</span>
1314:       <span class="ruby-keyword kw">end</span>
1315:     }
1316:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1317:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="initialize-external-method-method" class="method-detail ">
				<a name="method-i-initialize_external_method"></a>

				<div class="method-heading">
				
					<span class="method-name">initialize_external_method</span><span
						class="method-args">(new, old, params, file, comment, token=nil, internal=nil, nolink=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Create method for external alias
</p>
<p>
If argument &#8220;internal&#8221; is true, file is ignored.
</p>
					

					
					<div class="method-source-code"
						id="initialize-external-method-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1190</span>
1190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_external_method</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">token</span>=<span class="ruby-keyword kw">nil</span>,
1191:                                  <span class="ruby-identifier">internal</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">nolink</span>=<span class="ruby-keyword kw">nil</span>)
1192:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">old</span>
1193: 
1194:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">internal</span>
1195:       <span class="ruby-identifier">external_alias_header</span> = <span class="ruby-node">&quot;#{INTERNAL_ALIAS_MES} &quot;</span>
1196:       <span class="ruby-identifier">external_alias_text</span>   = <span class="ruby-identifier">external_alias_header</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">old</span>
1197:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">file</span>
1198:       <span class="ruby-identifier">external_alias_header</span> = <span class="ruby-node">&quot;#{EXTERNAL_ALIAS_MES} &quot;</span>
1199:       <span class="ruby-identifier">external_alias_text</span>   = <span class="ruby-identifier">external_alias_header</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">file</span> <span class="ruby-operator">+</span> <span class="ruby-node">&quot;#&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">old</span>
1200:     <span class="ruby-keyword kw">else</span>
1201:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1202:     <span class="ruby-keyword kw">end</span>
1203:     <span class="ruby-identifier">external_meth</span> = <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">external_alias_text</span>, <span class="ruby-identifier">new</span>)
1204:     <span class="ruby-identifier">external_meth</span>.<span class="ruby-identifier">singleton</span>    = <span class="ruby-keyword kw">false</span>
1205:     <span class="ruby-identifier">external_meth</span>.<span class="ruby-identifier">params</span>       = <span class="ruby-identifier">params</span>
1206:     <span class="ruby-identifier">external_comment</span> = <span class="ruby-identifier">remove_trailing_alias</span>(<span class="ruby-identifier">comment</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>
1207:     <span class="ruby-identifier">external_meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">external_comment</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
1208:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nolink</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">token</span>
1209:       <span class="ruby-identifier">external_meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
1210:       <span class="ruby-identifier">external_meth</span>.<span class="ruby-identifier">add_token</span> <span class="ruby-constant">Token</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>,<span class="ruby-value">1</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1211:     <span class="ruby-keyword kw">else</span>
1212:       <span class="ruby-identifier">external_meth</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">external_alias_text</span>
1213:     <span class="ruby-keyword kw">end</span>
1214: 
1215:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">external_meth</span>
1216:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="initialize-public-method-method" class="method-detail ">
				<a name="method-i-initialize_public_method"></a>

				<div class="method-heading">
				
					<span class="method-name">initialize_public_method</span><span
						class="method-args">(method, parent)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Create method for internal alias
</p>
					

					
					<div class="method-source-code"
						id="initialize-public-method-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1173</span>
1173:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_public_method</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">parent</span>)
1174:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">method</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parent</span>
1175: 
1176:     <span class="ruby-identifier">new_meth</span> = <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;External Alias for module&quot;</span>, <span class="ruby-identifier">method</span>.<span class="ruby-identifier">name</span>)
1177:     <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">singleton</span>    = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">singleton</span>
1178:     <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">params</span>       = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">clone</span>
1179:     <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">comment</span>      = <span class="ruby-identifier">remove_trailing_alias</span>(<span class="ruby-identifier">method</span>.<span class="ruby-identifier">comment</span>.<span class="ruby-identifier">clone</span>)
1180:     <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">comment</span>      <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;\n\n#{EXTERNAL_ALIAS_MES} #{parent.strip.chomp}\##{method.name}&quot;</span>
1181: 
1182:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">new_meth</span>
1183:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-program-or-module-method" class="method-detail ">
				<a name="method-i-parse_program_or_module"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_program_or_module</span><span
						class="method-args">(container, code, visibility=:public, external=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-program-or-module-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 354</span>
 354:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_program_or_module</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">code</span>,
 355:                               <span class="ruby-identifier">visibility</span>=<span class="ruby-value">:public</span>, <span class="ruby-identifier">external</span>=<span class="ruby-keyword kw">nil</span>)
 356:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span>
 357:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">code</span>
 358:     <span class="ruby-identifier">remaining_lines</span> = <span class="ruby-identifier">code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 359:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-node">&quot;#{code}&quot;</span>
 360: 
 361:     <span class="ruby-comment cmt">#</span>
 362:     <span class="ruby-comment cmt"># Parse variables before &quot;contains&quot; in module</span>
 363:     <span class="ruby-comment cmt">#</span>
 364:     <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
 365:     <span class="ruby-identifier">before_contains_lines</span> = []
 366:     <span class="ruby-identifier">before_contains_code</span> = <span class="ruby-keyword kw">nil</span>
 367:     <span class="ruby-identifier">before_contains_flag</span> = <span class="ruby-keyword kw">nil</span>
 368:     <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
 369:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">before_contains_flag</span>
 370:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?module\s+\w+\s*?(!.*?)?$/</span>
 371:           <span class="ruby-identifier">before_contains_flag</span> = <span class="ruby-keyword kw">true</span>
 372:         <span class="ruby-keyword kw">end</span>
 373:       <span class="ruby-keyword kw">else</span>
 374:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?contains\s*?(!.*?)?$/</span>
 375:         <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
 376:         <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_end?</span>(<span class="ruby-identifier">line</span>)
 377:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
 378:         <span class="ruby-identifier">before_contains_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
 379:       <span class="ruby-keyword kw">end</span>
 380:     }
 381:     <span class="ruby-identifier">before_contains_code</span> = <span class="ruby-identifier">before_contains_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 382:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">before_contains_code</span>
 383:       <span class="ruby-identifier">before_contains_code</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\s*?interface\s+.*?\s+end\s+interface.*?$/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">&quot;&quot;</span>)
 384:       <span class="ruby-identifier">before_contains_code</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\s*?type[\s\,]+.*?\s+end\s+type.*?$/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">&quot;&quot;</span>)
 385:     <span class="ruby-keyword kw">end</span>
 386: 
 387:     <span class="ruby-comment cmt">#</span>
 388:     <span class="ruby-comment cmt"># Parse global &quot;use&quot;</span>
 389:     <span class="ruby-comment cmt">#</span>
 390:     <span class="ruby-identifier">use_check_code</span> = <span class="ruby-node">&quot;#{before_contains_code}&quot;</span>
 391:     <span class="ruby-identifier">cascaded_modules_list</span> = []
 392:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">use_check_code</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?use\s+(\w+)(.*?)(!.*?)?$/</span>
 393:       <span class="ruby-identifier">use_check_code</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>
 394:       <span class="ruby-identifier">use_check_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>
 395:       <span class="ruby-identifier">used_mod_name</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span>
 396:       <span class="ruby-identifier">used_list</span> = <span class="ruby-node">$2</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 397:       <span class="ruby-identifier">used_trailing</span> = <span class="ruby-node">$3</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 398:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">used_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/!:nodoc:/</span>
 399:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>.<span class="ruby-identifier">include_includes?</span>(<span class="ruby-identifier">used_mod_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 400:         <span class="ruby-comment cmt"># progress &quot;.&quot; # HACK what stats thingy does this correspond to?</span>
 401:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_include</span> <span class="ruby-constant">Include</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">used_mod_name</span>, <span class="ruby-value str">&quot;&quot;</span>)
 402:       <span class="ruby-keyword kw">end</span>
 403:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span> (<span class="ruby-identifier">used_list</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\,\s*?only\s*?:/</span> )
 404:         <span class="ruby-identifier">cascaded_modules_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\#&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">used_mod_name</span>
 405:       <span class="ruby-keyword kw">end</span>
 406:     <span class="ruby-keyword kw">end</span>
 407: 
 408:     <span class="ruby-comment cmt">#</span>
 409:     <span class="ruby-comment cmt"># Parse public and private, and store information.</span>
 410:     <span class="ruby-comment cmt"># This information is used when &quot;add_method&quot; and</span>
 411:     <span class="ruby-comment cmt"># &quot;set_visibility_for&quot; are called.</span>
 412:     <span class="ruby-comment cmt">#</span>
 413:     <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">visibility_info</span> =
 414:               <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>), <span class="ruby-identifier">visibility</span>, <span class="ruby-identifier">container</span>)
 415:     <span class="ruby-identifier">@@public_methods</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">visibility_info</span>
 416:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">visibility_default</span> <span class="ruby-operator">==</span> <span class="ruby-value">:public</span>
 417:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cascaded_modules_list</span>.<span class="ruby-identifier">empty?</span>
 418:         <span class="ruby-identifier">cascaded_modules</span> =
 419:           <span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Cascaded Modules&quot;</span>,
 420:                    <span class="ruby-value str">&quot;Imported modules all of whose components are published again&quot;</span>,
 421:                    <span class="ruby-value str">&quot;&quot;</span>,
 422:                    <span class="ruby-identifier">cascaded_modules_list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>))
 423:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">cascaded_modules</span>)
 424:       <span class="ruby-keyword kw">end</span>
 425:     <span class="ruby-keyword kw">end</span>
 426: 
 427:     <span class="ruby-comment cmt">#</span>
 428:     <span class="ruby-comment cmt"># Check rename elements</span>
 429:     <span class="ruby-comment cmt">#</span>
 430:     <span class="ruby-identifier">use_check_code</span> = <span class="ruby-node">&quot;#{before_contains_code}&quot;</span>
 431:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">use_check_code</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?use\s+(\w+)\s*?\,(.+)$/</span>
 432:       <span class="ruby-identifier">use_check_code</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>
 433:       <span class="ruby-identifier">use_check_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>
 434:       <span class="ruby-identifier">used_mod_name</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span>
 435:       <span class="ruby-identifier">used_elements</span> = <span class="ruby-node">$2</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\s*?only\s*?:\s*?/</span>, <span class="ruby-value str">''</span>)
 436:       <span class="ruby-identifier">used_elements</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">used</span><span class="ruby-operator">|</span>
 437:         <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\s*?(\w+)\s*?=&gt;\s*?(\w+)\s*?/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">used</span>
 438:           <span class="ruby-identifier">local</span> = <span class="ruby-node">$1</span>
 439:           <span class="ruby-identifier">org</span> = <span class="ruby-node">$2</span>
 440:           <span class="ruby-identifier">@@public_methods</span>.<span class="ruby-identifier">collect!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">pub_meth</span><span class="ruby-operator">|</span>
 441:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">local</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;name&quot;</span>] <span class="ruby-operator">||</span>
 442:                 <span class="ruby-identifier">local</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;name&quot;</span>].<span class="ruby-identifier">upcase</span> <span class="ruby-operator">&amp;&amp;</span>
 443:                 <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>
 444:               <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;name&quot;</span>] = <span class="ruby-identifier">org</span>
 445:               <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;local_name&quot;</span>] = <span class="ruby-identifier">local</span>
 446:             <span class="ruby-keyword kw">end</span>
 447:             <span class="ruby-identifier">pub_meth</span>
 448:           }
 449:         <span class="ruby-keyword kw">end</span>
 450:       }
 451:     <span class="ruby-keyword kw">end</span>
 452: 
 453:     <span class="ruby-comment cmt">#</span>
 454:     <span class="ruby-comment cmt"># Parse private &quot;use&quot;</span>
 455:     <span class="ruby-comment cmt">#</span>
 456:     <span class="ruby-identifier">use_check_code</span> = <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 457:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">use_check_code</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?use\s+(\w+)(.*?)(!.*?)?$/</span>
 458:       <span class="ruby-identifier">use_check_code</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>
 459:       <span class="ruby-identifier">use_check_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>
 460:       <span class="ruby-identifier">used_mod_name</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span>
 461:       <span class="ruby-identifier">used_trailing</span> = <span class="ruby-node">$3</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 462:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">used_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/!:nodoc:/</span>
 463:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>.<span class="ruby-identifier">include_includes?</span>(<span class="ruby-identifier">used_mod_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 464:         <span class="ruby-comment cmt"># progress &quot;.&quot; # HACK what stats thingy does this correspond to?</span>
 465:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_include</span> <span class="ruby-constant">Include</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">used_mod_name</span>, <span class="ruby-value str">&quot;&quot;</span>)
 466:       <span class="ruby-keyword kw">end</span>
 467:     <span class="ruby-keyword kw">end</span>
 468: 
 469:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">each_includes</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">inc</span><span class="ruby-operator">|</span>
 470:       <span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">all_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">toplevel</span><span class="ruby-operator">|</span>
 471:         <span class="ruby-identifier">indicated_mod</span> = <span class="ruby-identifier">toplevel</span>.<span class="ruby-identifier">find_symbol</span>(<span class="ruby-identifier">inc</span>.<span class="ruby-identifier">name</span>,
 472:                                              <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 473:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">indicated_mod</span>
 474:           <span class="ruby-identifier">indicated_name</span> = <span class="ruby-identifier">indicated_mod</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">file_relative_name</span>
 475:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>.<span class="ruby-identifier">include_requires?</span>(<span class="ruby-identifier">indicated_name</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 476:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_require</span>(<span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">indicated_name</span>, <span class="ruby-value str">&quot;&quot;</span>))
 477:           <span class="ruby-keyword kw">end</span>
 478:           <span class="ruby-keyword kw">break</span>
 479:         <span class="ruby-keyword kw">end</span>
 480:       <span class="ruby-keyword kw">end</span>
 481:     }
 482: 
 483:     <span class="ruby-comment cmt">#</span>
 484:     <span class="ruby-comment cmt"># Parse derived-types definitions</span>
 485:     <span class="ruby-comment cmt">#</span>
 486:     <span class="ruby-identifier">derived_types_comment</span> = <span class="ruby-value str">&quot;&quot;</span>
 487:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 488:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">remaining_code</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
 489:                                   type[\s\,]+(public|private)?\s*?(::)?\s*?
 490:                                   (\w+)\s*?(!.*?)?$
 491:                                   (.*?)
 492:                                   ^\s*?end\s+type.*?$
 493:                             /</span><span class="ruby-identifier">mx</span>
 494:       <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>
 495:       <span class="ruby-identifier">remaining_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>
 496:       <span class="ruby-identifier">typename</span> = <span class="ruby-node">$3</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>
 497:       <span class="ruby-identifier">type_elements</span> = <span class="ruby-node">$5</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 498:       <span class="ruby-identifier">type_code</span> = <span class="ruby-identifier">remove_empty_head_lines</span>(<span class="ruby-node">$&amp;</span>)
 499:       <span class="ruby-identifier">type_trailing</span> = <span class="ruby-identifier">find_comments</span>(<span class="ruby-node">$4</span>)
 500:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^:nodoc:/</span>
 501:       <span class="ruby-identifier">type_visibility</span> = <span class="ruby-node">$1</span>
 502:       <span class="ruby-identifier">type_comment</span> = <span class="ruby-constant">COMMENTS_ARE_UPPER</span> <span class="ruby-operator">?</span>
 503:         <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">type_trailing</span> <span class="ruby-operator">:</span>
 504:           <span class="ruby-identifier">type_trailing</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">find_comments</span>(<span class="ruby-identifier">type_code</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^.*$\n/</span>, <span class="ruby-value str">''</span>))
 505:       <span class="ruby-identifier">type_element_visibility_public</span> = <span class="ruby-keyword kw">true</span>
 506:       <span class="ruby-identifier">type_code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
 507:         <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\s*?private\s*?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
 508:           <span class="ruby-identifier">type_element_visibility_public</span> = <span class="ruby-keyword kw">nil</span>
 509:           <span class="ruby-keyword kw">break</span>
 510:         <span class="ruby-keyword kw">end</span>
 511:       } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type_code</span>
 512: 
 513:       <span class="ruby-identifier">args_comment</span> = <span class="ruby-value str">&quot;&quot;</span>
 514:       <span class="ruby-identifier">type_args_info</span> = <span class="ruby-keyword kw">nil</span>
 515: 
 516:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">show_all</span>
 517:         <span class="ruby-identifier">args_comment</span> = <span class="ruby-identifier">find_arguments</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">type_code</span>, <span class="ruby-keyword kw">true</span>)
 518:       <span class="ruby-keyword kw">else</span>
 519:         <span class="ruby-identifier">type_public_args_list</span> = []
 520:         <span class="ruby-identifier">type_args_info</span> = <span class="ruby-identifier">definition_info</span>(<span class="ruby-identifier">type_code</span>)
 521:         <span class="ruby-identifier">type_args_info</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
 522:           <span class="ruby-identifier">arg_is_public</span> = <span class="ruby-identifier">type_element_visibility_public</span>
 523:           <span class="ruby-identifier">arg_is_public</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">include_attr?</span>(<span class="ruby-value str">&quot;public&quot;</span>)
 524:           <span class="ruby-identifier">arg_is_public</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">include_attr?</span>(<span class="ruby-value str">&quot;private&quot;</span>)
 525:           <span class="ruby-identifier">type_public_args_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">varname</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg_is_public</span>
 526:         }
 527:         <span class="ruby-identifier">args_comment</span> = <span class="ruby-identifier">find_arguments</span>(<span class="ruby-identifier">type_public_args_list</span>, <span class="ruby-identifier">type_code</span>)
 528:       <span class="ruby-keyword kw">end</span>
 529: 
 530:       <span class="ruby-identifier">type</span> = <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;type #{typename}&quot;</span>, <span class="ruby-identifier">typename</span>)
 531:       <span class="ruby-identifier">type</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">false</span>
 532:       <span class="ruby-identifier">type</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">&quot;&quot;</span>
 533:       <span class="ruby-identifier">type</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&lt;b&gt;&lt;em&gt; Derived Type &lt;/em&gt;&lt;/b&gt; :: &lt;tt&gt;&lt;/tt&gt;\n&quot;</span>
 534:       <span class="ruby-identifier">type</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">args_comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args_comment</span>
 535:       <span class="ruby-identifier">type</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">type_comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type_comment</span>
 536: 
 537:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">type</span>
 538: 
 539:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">type</span>
 540: 
 541:       <span class="ruby-identifier">set_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">typename</span>, <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">@@public_methods</span>)
 542: 
 543:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type_visibility</span>
 544:         <span class="ruby-identifier">type_visibility</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\s/</span>,<span class="ruby-value str">''</span>)
 545:         <span class="ruby-identifier">type_visibility</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\,/</span>,<span class="ruby-value str">''</span>)
 546:         <span class="ruby-identifier">type_visibility</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/:/</span>,<span class="ruby-value str">''</span>)
 547:         <span class="ruby-identifier">type_visibility</span>.<span class="ruby-identifier">downcase!</span>
 548:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type_visibility</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;public&quot;</span>
 549:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>([<span class="ruby-identifier">typename</span>], <span class="ruby-value">:public</span>)
 550:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">type_visibility</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;private&quot;</span>
 551:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>([<span class="ruby-identifier">typename</span>], <span class="ruby-value">:private</span>)
 552:         <span class="ruby-keyword kw">end</span>
 553:       <span class="ruby-keyword kw">end</span>
 554: 
 555:       <span class="ruby-identifier">check_public_methods</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>)
 556: 
 557:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">show_all</span>
 558:         <span class="ruby-identifier">derived_types_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;, &quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">derived_types_comment</span>.<span class="ruby-identifier">empty?</span>
 559:         <span class="ruby-identifier">derived_types_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">typename</span>
 560:       <span class="ruby-keyword kw">else</span>
 561:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">visibility</span> <span class="ruby-operator">==</span> <span class="ruby-value">:public</span>
 562:         <span class="ruby-identifier">derived_types_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;, &quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">derived_types_comment</span>.<span class="ruby-identifier">empty?</span>
 563:         <span class="ruby-identifier">derived_types_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">typename</span>
 564:         <span class="ruby-keyword kw">end</span>
 565:       <span class="ruby-keyword kw">end</span>
 566: 
 567:     <span class="ruby-keyword kw">end</span>
 568: 
 569:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">derived_types_comment</span>.<span class="ruby-identifier">empty?</span>
 570:       <span class="ruby-identifier">derived_types_table</span> =
 571:         <span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Derived Types&quot;</span>, <span class="ruby-value str">&quot;Derived_Types&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>,
 572:                  <span class="ruby-identifier">derived_types_comment</span>)
 573:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">derived_types_table</span>)
 574:     <span class="ruby-keyword kw">end</span>
 575: 
 576:     <span class="ruby-comment cmt">#</span>
 577:     <span class="ruby-comment cmt"># move interface scope</span>
 578:     <span class="ruby-comment cmt">#</span>
 579:     <span class="ruby-identifier">interface_code</span> = <span class="ruby-value str">&quot;&quot;</span>
 580:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">remaining_code</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
 581:                                  interface(
 582:                                             \s+\w+                      |
 583:                                             \s+operator\s*?\(.*?\)       |
 584:                                             \s+assignment\s*?\(\s*?=\s*?\)
 585:                                           )?\s*?$
 586:                                  (.*?)
 587:                                  ^\s*?end\s+interface.*?$
 588:                             /</span><span class="ruby-identifier">mx</span>
 589:       <span class="ruby-identifier">interface_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">remove_empty_head_lines</span>(<span class="ruby-node">$&amp;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
 590:       <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">pre_match</span>
 591:       <span class="ruby-identifier">remaining_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">post_match</span>
 592:     <span class="ruby-keyword kw">end</span>
 593: 
 594:     <span class="ruby-comment cmt">#</span>
 595:     <span class="ruby-comment cmt"># Parse global constants or variables in modules</span>
 596:     <span class="ruby-comment cmt">#</span>
 597:     <span class="ruby-identifier">const_var_defs</span> = <span class="ruby-identifier">definition_info</span>(<span class="ruby-identifier">before_contains_code</span>)
 598:     <span class="ruby-identifier">const_var_defs</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">defitem</span><span class="ruby-operator">|</span>
 599:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">nodoc</span>
 600:       <span class="ruby-identifier">const_or_var_type</span> = <span class="ruby-value str">&quot;Variable&quot;</span>
 601:       <span class="ruby-identifier">const_or_var_progress</span> = <span class="ruby-value str">&quot;v&quot;</span>
 602:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">include_attr?</span>(<span class="ruby-value str">&quot;parameter&quot;</span>)
 603:         <span class="ruby-identifier">const_or_var_type</span> = <span class="ruby-value str">&quot;Constant&quot;</span>
 604:         <span class="ruby-identifier">const_or_var_progress</span> = <span class="ruby-value str">&quot;c&quot;</span>
 605:       <span class="ruby-keyword kw">end</span>
 606:       <span class="ruby-identifier">const_or_var</span> = <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">const_or_var_type</span>, <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">varname</span>)
 607:       <span class="ruby-identifier">const_or_var</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">false</span>
 608:       <span class="ruby-identifier">const_or_var</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">&quot;&quot;</span>
 609:       <span class="ruby-identifier">self_comment</span> = <span class="ruby-identifier">find_arguments</span>([<span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">varname</span>], <span class="ruby-identifier">before_contains_code</span>)
 610:       <span class="ruby-identifier">const_or_var</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;&lt;b&gt;&lt;em&gt;&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">const_or_var_type</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;&lt;/em&gt;&lt;/b&gt; :: &lt;tt&gt;&lt;/tt&gt;\n&quot;</span>
 611:       <span class="ruby-identifier">const_or_var</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">self_comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">self_comment</span>
 612: 
 613:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">const_or_var_progress</span>
 614: 
 615:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">const_or_var</span>
 616: 
 617:       <span class="ruby-identifier">set_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">varname</span>, <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">@@public_methods</span>)
 618: 
 619:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">include_attr?</span>(<span class="ruby-value str">&quot;public&quot;</span>)
 620:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>([<span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">varname</span>], <span class="ruby-value">:public</span>)
 621:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">include_attr?</span>(<span class="ruby-value str">&quot;private&quot;</span>)
 622:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>([<span class="ruby-identifier">defitem</span>.<span class="ruby-identifier">varname</span>], <span class="ruby-value">:private</span>)
 623:       <span class="ruby-keyword kw">end</span>
 624: 
 625:       <span class="ruby-identifier">check_public_methods</span>(<span class="ruby-identifier">const_or_var</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>)
 626: 
 627:     } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_var_defs</span>
 628: 
 629:     <span class="ruby-identifier">remaining_lines</span> = <span class="ruby-identifier">remaining_code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 630: 
 631:     <span class="ruby-comment cmt"># &quot;subroutine&quot; or &quot;function&quot; parts are parsed (new)</span>
 632:     <span class="ruby-comment cmt">#</span>
 633:     <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
 634:     <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-keyword kw">nil</span>
 635:     <span class="ruby-identifier">block_searching_lines</span> = []
 636:     <span class="ruby-identifier">pre_comment</span> = []
 637:     <span class="ruby-identifier">procedure_trailing</span> = <span class="ruby-value str">&quot;&quot;</span>
 638:     <span class="ruby-identifier">procedure_name</span> = <span class="ruby-value str">&quot;&quot;</span>
 639:     <span class="ruby-identifier">procedure_params</span> = <span class="ruby-value str">&quot;&quot;</span>
 640:     <span class="ruby-identifier">procedure_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
 641:     <span class="ruby-identifier">procedure_result_arg</span> = <span class="ruby-value str">&quot;&quot;</span>
 642:     <span class="ruby-identifier">procedure_type</span> = <span class="ruby-value str">&quot;&quot;</span>
 643:     <span class="ruby-identifier">contains_lines</span> = []
 644:     <span class="ruby-identifier">contains_flag</span> = <span class="ruby-keyword kw">nil</span>
 645:     <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">collect!</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
 646:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_searching_flag</span>
 647:         <span class="ruby-comment cmt"># subroutine</span>
 648:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
 649:                          (recursive|pure|elemental)?\s*?
 650:                          subroutine\s+(\w+)\s*?(\(.*?\))?\s*?(!.*?)?$
 651:                    /</span><span class="ruby-identifier">x</span>
 652:           <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-value">:subroutine</span>
 653:           <span class="ruby-identifier">block_searching_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
 654: 
 655:           <span class="ruby-identifier">procedure_name</span> = <span class="ruby-node">$2</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>
 656:           <span class="ruby-identifier">procedure_params</span> = <span class="ruby-node">$3</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 657:           <span class="ruby-identifier">procedure_prefix</span> = <span class="ruby-node">$1</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 658:           <span class="ruby-identifier">procedure_trailing</span> = <span class="ruby-node">$4</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;!&quot;</span>
 659:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
 660: 
 661:         <span class="ruby-comment cmt"># function</span>
 662:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
 663:                        (recursive|pure|elemental)?\s*?
 664:                        (
 665:                            character\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 666:                          | type\s*?\([\w\s]+?\)\s+
 667:                          | integer\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 668:                          | real\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 669:                          | double\s+precision\s+
 670:                          | logical\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 671:                          | complex\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 672:                        )?
 673:                        function\s+(\w+)\s*?
 674:                        (\(.*?\))?(\s+result\((.*?)\))?\s*?(!.*?)?$
 675:                       /</span><span class="ruby-identifier">x</span>
 676:           <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-value">:function</span>
 677:           <span class="ruby-identifier">block_searching_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
 678: 
 679:           <span class="ruby-identifier">procedure_prefix</span> = <span class="ruby-node">$1</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 680:           <span class="ruby-identifier">procedure_type</span> = <span class="ruby-node">$2</span> <span class="ruby-operator">?</span> <span class="ruby-node">$2</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
 681:           <span class="ruby-identifier">procedure_name</span> = <span class="ruby-node">$8</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>
 682:           <span class="ruby-identifier">procedure_params</span> = <span class="ruby-node">$9</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 683:           <span class="ruby-identifier">procedure_result_arg</span> = <span class="ruby-node">$11</span> <span class="ruby-operator">?</span> <span class="ruby-node">$11</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">procedure_name</span>
 684:           <span class="ruby-identifier">procedure_trailing</span> = <span class="ruby-node">$12</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;!&quot;</span>
 685:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
 686:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?!\s?(.*)/</span>
 687:           <span class="ruby-identifier">pre_comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
 688:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">line</span>
 689:         <span class="ruby-keyword kw">else</span>
 690:           <span class="ruby-identifier">pre_comment</span> = []
 691:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">line</span>
 692:         <span class="ruby-keyword kw">end</span>
 693:       <span class="ruby-keyword kw">end</span>
 694:       <span class="ruby-identifier">contains_flag</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?contains\s*?(!.*?)?$/</span>
 695:       <span class="ruby-identifier">block_searching_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
 696:       <span class="ruby-identifier">contains_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">contains_flag</span>
 697: 
 698:       <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_start?</span>(<span class="ruby-identifier">line</span>)
 699:       <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_end?</span>(<span class="ruby-identifier">line</span>)
 700:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">level_depth</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>
 701:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
 702:       <span class="ruby-keyword kw">end</span>
 703: 
 704:       <span class="ruby-comment cmt"># &quot;procedure_code&quot; is formatted.</span>
 705:       <span class="ruby-comment cmt"># &quot;:nodoc:&quot; flag is checked.</span>
 706:       <span class="ruby-comment cmt">#</span>
 707:       <span class="ruby-identifier">procedure_code</span> = <span class="ruby-identifier">block_searching_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 708:       <span class="ruby-identifier">procedure_code</span> = <span class="ruby-identifier">remove_empty_head_lines</span>(<span class="ruby-identifier">procedure_code</span>)
 709:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">procedure_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^!:nodoc:/</span>
 710:         <span class="ruby-comment cmt"># next loop to search next block</span>
 711:         <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
 712:         <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-keyword kw">nil</span>
 713:         <span class="ruby-identifier">block_searching_lines</span> = []
 714:         <span class="ruby-identifier">pre_comment</span> = []
 715:         <span class="ruby-identifier">procedure_trailing</span> = <span class="ruby-value str">&quot;&quot;</span>
 716:         <span class="ruby-identifier">procedure_name</span> = <span class="ruby-value str">&quot;&quot;</span>
 717:         <span class="ruby-identifier">procedure_params</span> = <span class="ruby-value str">&quot;&quot;</span>
 718:         <span class="ruby-identifier">procedure_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
 719:         <span class="ruby-identifier">procedure_result_arg</span> = <span class="ruby-value str">&quot;&quot;</span>
 720:         <span class="ruby-identifier">procedure_type</span> = <span class="ruby-value str">&quot;&quot;</span>
 721:         <span class="ruby-identifier">contains_lines</span> = []
 722:         <span class="ruby-identifier">contains_flag</span> = <span class="ruby-keyword kw">nil</span>
 723:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
 724:       <span class="ruby-keyword kw">end</span>
 725: 
 726:       <span class="ruby-comment cmt"># AnyMethod is created, and added to container</span>
 727:       <span class="ruby-comment cmt">#</span>
 728:       <span class="ruby-identifier">subroutine_function</span> = <span class="ruby-keyword kw">nil</span>
 729:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_searching_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">:subroutine</span>
 730:         <span class="ruby-identifier">subroutine_prefix</span>   = <span class="ruby-identifier">procedure_prefix</span>
 731:         <span class="ruby-identifier">subroutine_name</span>     = <span class="ruby-identifier">procedure_name</span>
 732:         <span class="ruby-identifier">subroutine_params</span>   = <span class="ruby-identifier">procedure_params</span>
 733:         <span class="ruby-identifier">subroutine_trailing</span> = <span class="ruby-identifier">procedure_trailing</span>
 734:         <span class="ruby-identifier">subroutine_code</span>     = <span class="ruby-identifier">procedure_code</span>
 735: 
 736:         <span class="ruby-identifier">subroutine_comment</span> = <span class="ruby-constant">COMMENTS_ARE_UPPER</span> <span class="ruby-operator">?</span>
 737:           <span class="ruby-identifier">pre_comment</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">subroutine_trailing</span> <span class="ruby-operator">:</span>
 738:             <span class="ruby-identifier">subroutine_trailing</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">subroutine_code</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^.*$\n/</span>, <span class="ruby-value str">''</span>)
 739:         <span class="ruby-identifier">subroutine</span> = <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;subroutine&quot;</span>, <span class="ruby-identifier">subroutine_name</span>)
 740:         <span class="ruby-identifier">parse_subprogram</span>(<span class="ruby-identifier">subroutine</span>, <span class="ruby-identifier">subroutine_params</span>,
 741:                          <span class="ruby-identifier">subroutine_comment</span>, <span class="ruby-identifier">subroutine_code</span>,
 742:                          <span class="ruby-identifier">before_contains_code</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">subroutine_prefix</span>)
 743: 
 744:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">subroutine</span>
 745: 
 746:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">subroutine</span>
 747:         <span class="ruby-identifier">subroutine_function</span> = <span class="ruby-identifier">subroutine</span>
 748: 
 749:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">block_searching_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">:function</span>
 750:         <span class="ruby-identifier">function_prefix</span>     = <span class="ruby-identifier">procedure_prefix</span>
 751:         <span class="ruby-identifier">function_type</span>       = <span class="ruby-identifier">procedure_type</span>
 752:         <span class="ruby-identifier">function_name</span>       = <span class="ruby-identifier">procedure_name</span>
 753:         <span class="ruby-identifier">function_params_org</span> = <span class="ruby-identifier">procedure_params</span>
 754:         <span class="ruby-identifier">function_result_arg</span> = <span class="ruby-identifier">procedure_result_arg</span>
 755:         <span class="ruby-identifier">function_trailing</span>   = <span class="ruby-identifier">procedure_trailing</span>
 756:         <span class="ruby-identifier">function_code_org</span>   = <span class="ruby-identifier">procedure_code</span>
 757: 
 758:         <span class="ruby-identifier">function_comment</span> = <span class="ruby-constant">COMMENTS_ARE_UPPER</span> <span class="ruby-operator">?</span>
 759:           <span class="ruby-identifier">pre_comment</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">function_trailing</span> <span class="ruby-operator">:</span>
 760:             <span class="ruby-identifier">function_trailing</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">function_code_org</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^.*$\n/</span>, <span class="ruby-value str">''</span>)
 761: 
 762:         <span class="ruby-identifier">function_code</span> = <span class="ruby-node">&quot;#{function_code_org}&quot;</span>
 763:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">function_type</span>
 764:           <span class="ruby-identifier">function_code</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">function_type</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; :: &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">function_result_arg</span>
 765:         <span class="ruby-keyword kw">end</span>
 766: 
 767:         <span class="ruby-identifier">function_params</span> =
 768:           <span class="ruby-identifier">function_params_org</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^\(/</span>, <span class="ruby-node">&quot;\(#{function_result_arg}, &quot;</span>)
 769: 
 770:         <span class="ruby-identifier">function</span> = <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;function&quot;</span>, <span class="ruby-identifier">function_name</span>)
 771:         <span class="ruby-identifier">parse_subprogram</span>(<span class="ruby-identifier">function</span>, <span class="ruby-identifier">function_params</span>,
 772:                          <span class="ruby-identifier">function_comment</span>, <span class="ruby-identifier">function_code</span>,
 773:                          <span class="ruby-identifier">before_contains_code</span>, <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">function_prefix</span>)
 774: 
 775:         <span class="ruby-comment cmt"># Specific modification due to function</span>
 776:         <span class="ruby-identifier">function</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/\(\s*?#{function_result_arg}\s*?,\s*?/</span>, <span class="ruby-value str">&quot;\( &quot;</span>)
 777:         <span class="ruby-identifier">function</span>.<span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; result(&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">function_result_arg</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;)&quot;</span>
 778:         <span class="ruby-identifier">function</span>.<span class="ruby-identifier">start_collecting_tokens</span>
 779:         <span class="ruby-identifier">function</span>.<span class="ruby-identifier">add_token</span> <span class="ruby-constant">Token</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>,<span class="ruby-value">1</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">function_code_org</span>)
 780: 
 781:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">function</span>
 782: 
 783:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">function</span>
 784:         <span class="ruby-identifier">subroutine_function</span> = <span class="ruby-identifier">function</span>
 785: 
 786:       <span class="ruby-keyword kw">end</span>
 787: 
 788:       <span class="ruby-comment cmt"># The visibility of procedure is specified</span>
 789:       <span class="ruby-comment cmt">#</span>
 790:       <span class="ruby-identifier">set_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">procedure_name</span>,
 791:                      <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">@@public_methods</span>)
 792: 
 793:       <span class="ruby-comment cmt"># The alias for this procedure from external modules</span>
 794:       <span class="ruby-comment cmt">#</span>
 795:       <span class="ruby-identifier">check_external_aliases</span>(<span class="ruby-identifier">procedure_name</span>,
 796:                              <span class="ruby-identifier">subroutine_function</span>.<span class="ruby-identifier">params</span>,
 797:                              <span class="ruby-identifier">subroutine_function</span>.<span class="ruby-identifier">comment</span>, <span class="ruby-identifier">subroutine_function</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">external</span>
 798:       <span class="ruby-identifier">check_public_methods</span>(<span class="ruby-identifier">subroutine_function</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>)
 799: 
 800: 
 801:       <span class="ruby-comment cmt"># contains_lines are parsed as private procedures</span>
 802:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">contains_flag</span>
 803:         <span class="ruby-identifier">parse_program_or_module</span>(<span class="ruby-identifier">container</span>,
 804:                                 <span class="ruby-identifier">contains_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>), <span class="ruby-value">:private</span>)
 805:       <span class="ruby-keyword kw">end</span>
 806: 
 807:       <span class="ruby-comment cmt"># next loop to search next block</span>
 808:       <span class="ruby-identifier">level_depth</span> = <span class="ruby-value">0</span>
 809:       <span class="ruby-identifier">block_searching_flag</span> = <span class="ruby-keyword kw">nil</span>
 810:       <span class="ruby-identifier">block_searching_lines</span> = []
 811:       <span class="ruby-identifier">pre_comment</span> = []
 812:       <span class="ruby-identifier">procedure_trailing</span> = <span class="ruby-value str">&quot;&quot;</span>
 813:       <span class="ruby-identifier">procedure_name</span> = <span class="ruby-value str">&quot;&quot;</span>
 814:       <span class="ruby-identifier">procedure_params</span> = <span class="ruby-value str">&quot;&quot;</span>
 815:       <span class="ruby-identifier">procedure_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
 816:       <span class="ruby-identifier">procedure_result_arg</span> = <span class="ruby-value str">&quot;&quot;</span>
 817:       <span class="ruby-identifier">contains_lines</span> = []
 818:       <span class="ruby-identifier">contains_flag</span> = <span class="ruby-keyword kw">nil</span>
 819:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
 820:     } <span class="ruby-comment cmt"># End of remaining_lines.collect!{|line|</span>
 821: 
 822:     <span class="ruby-comment cmt"># Array remains_lines is converted to String remains_code again</span>
 823:     <span class="ruby-comment cmt">#</span>
 824:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">remaining_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
 825: 
 826:     <span class="ruby-comment cmt">#</span>
 827:     <span class="ruby-comment cmt"># Parse interface</span>
 828:     <span class="ruby-comment cmt">#</span>
 829:     <span class="ruby-identifier">interface_scope</span> = <span class="ruby-keyword kw">false</span>
 830:     <span class="ruby-identifier">generic_name</span> = <span class="ruby-value str">&quot;&quot;</span>
 831:     <span class="ruby-identifier">interface_code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
 832:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\s*?
 833:                interface(
 834:                           \s+\w+|
 835:                           \s+operator\s*?\(.*?\)|
 836:                           \s+assignment\s*?\(\s*?=\s*?\)
 837:                         )?
 838:                \s*?(!.*?)?$
 839:          /</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
 840:         <span class="ruby-identifier">generic_name</span> = <span class="ruby-node">$1</span> <span class="ruby-operator">?</span> <span class="ruby-node">$1</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
 841:         <span class="ruby-identifier">interface_trailing</span> = <span class="ruby-node">$2</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;!&quot;</span>
 842:         <span class="ruby-identifier">interface_scope</span> = <span class="ruby-keyword kw">true</span>
 843:         <span class="ruby-identifier">interface_scope</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/!:nodoc:/</span>
 844: <span class="ruby-comment cmt">#        if generic_name =~ /operator\s*?\((.*?)\)/i</span>
 845: <span class="ruby-comment cmt">#          operator_name = $1</span>
 846: <span class="ruby-comment cmt">#          if operator_name &amp;&amp; !operator_name.empty?</span>
 847: <span class="ruby-comment cmt">#            generic_name = &quot;#{operator_name}&quot;</span>
 848: <span class="ruby-comment cmt">#          end</span>
 849: <span class="ruby-comment cmt">#        end</span>
 850: <span class="ruby-comment cmt">#        if generic_name =~ /assignment\s*?\((.*?)\)/i</span>
 851: <span class="ruby-comment cmt">#          assignment_name = $1</span>
 852: <span class="ruby-comment cmt">#          if assignment_name &amp;&amp; !assignment_name.empty?</span>
 853: <span class="ruby-comment cmt">#            generic_name = &quot;#{assignment_name}&quot;</span>
 854: <span class="ruby-comment cmt">#          end</span>
 855: <span class="ruby-comment cmt">#        end</span>
 856:       <span class="ruby-keyword kw">end</span>
 857:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\s*?end\s+interface/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
 858:         <span class="ruby-identifier">interface_scope</span> = <span class="ruby-keyword kw">false</span>
 859:         <span class="ruby-identifier">generic_name</span> = <span class="ruby-keyword kw">nil</span>
 860:       <span class="ruby-keyword kw">end</span>
 861:       <span class="ruby-comment cmt"># internal alias</span>
 862:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface_scope</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-regexp re">/^\s*?module\s+procedure\s+(.*?)(!.*?)?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
 863:         <span class="ruby-identifier">procedures</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span>
 864:         <span class="ruby-identifier">procedures_trailing</span> = <span class="ruby-node">$2</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;!&quot;</span>
 865:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">procedures_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/!:nodoc:/</span>
 866:         <span class="ruby-identifier">procedures</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">proc</span><span class="ruby-operator">|</span>
 867:           <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">strip!</span>
 868:           <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">chomp!</span>
 869:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">generic_name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">proc</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">generic_name</span>
 870:           <span class="ruby-identifier">old_meth</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_symbol</span>(<span class="ruby-identifier">proc</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 871:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">old_meth</span>
 872:           <span class="ruby-identifier">nolink</span> = <span class="ruby-identifier">old_meth</span>.<span class="ruby-identifier">visibility</span> <span class="ruby-operator">==</span> <span class="ruby-value">:private</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
 873:           <span class="ruby-identifier">nolink</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">show_all</span>
 874:           <span class="ruby-identifier">new_meth</span> =
 875:              <span class="ruby-identifier">initialize_external_method</span>(<span class="ruby-identifier">generic_name</span>, <span class="ruby-identifier">proc</span>,
 876:                                         <span class="ruby-identifier">old_meth</span>.<span class="ruby-identifier">params</span>, <span class="ruby-keyword kw">nil</span>,
 877:                                         <span class="ruby-identifier">old_meth</span>.<span class="ruby-identifier">comment</span>,
 878:                                         <span class="ruby-identifier">old_meth</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">token_stream</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">text</span>,
 879:                                         <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">nolink</span>)
 880:           <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">old_meth</span>.<span class="ruby-identifier">singleton</span>
 881: 
 882:           <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
 883: 
 884:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
 885: 
 886:           <span class="ruby-identifier">set_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">generic_name</span>, <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">@@public_methods</span>)
 887: 
 888:           <span class="ruby-identifier">check_public_methods</span>(<span class="ruby-identifier">new_meth</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>)
 889: 
 890:         }
 891:       <span class="ruby-keyword kw">end</span>
 892: 
 893:       <span class="ruby-comment cmt"># external aliases</span>
 894:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface_scope</span>
 895:         <span class="ruby-comment cmt"># subroutine</span>
 896:         <span class="ruby-identifier">proc</span> = <span class="ruby-keyword kw">nil</span>
 897:         <span class="ruby-identifier">params</span> = <span class="ruby-keyword kw">nil</span>
 898:         <span class="ruby-identifier">procedures_trailing</span> = <span class="ruby-keyword kw">nil</span>
 899:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
 900:                          (recursive|pure|elemental)?\s*?
 901:                          subroutine\s+(\w+)\s*?(\(.*?\))?\s*?(!.*?)?$
 902:                    /</span><span class="ruby-identifier">x</span>
 903:           <span class="ruby-identifier">proc</span> = <span class="ruby-node">$2</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>
 904:           <span class="ruby-identifier">generic_name</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">generic_name</span>
 905:           <span class="ruby-identifier">params</span> = <span class="ruby-node">$3</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 906:           <span class="ruby-identifier">procedures_trailing</span> = <span class="ruby-node">$4</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;!&quot;</span>
 907: 
 908:         <span class="ruby-comment cmt"># function</span>
 909:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*?
 910:                        (recursive|pure|elemental)?\s*?
 911:                        (
 912:                            character\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 913:                          | type\s*?\([\w\s]+?\)\s+
 914:                          | integer\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 915:                          | real\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 916:                          | double\s+precision\s+
 917:                          | logical\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 918:                          | complex\s*?(\([\w\s\=\(\)\*]+?\))?\s+
 919:                        )?
 920:                        function\s+(\w+)\s*?
 921:                        (\(.*?\))?(\s+result\((.*?)\))?\s*?(!.*?)?$
 922:                       /</span><span class="ruby-identifier">x</span>
 923:           <span class="ruby-identifier">proc</span> = <span class="ruby-node">$8</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>
 924:           <span class="ruby-identifier">generic_name</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">generic_name</span>
 925:           <span class="ruby-identifier">params</span> = <span class="ruby-node">$9</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
 926:           <span class="ruby-identifier">procedures_trailing</span> = <span class="ruby-node">$12</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;!&quot;</span>
 927:         <span class="ruby-keyword kw">else</span>
 928:           <span class="ruby-keyword kw">next</span>
 929:         <span class="ruby-keyword kw">end</span>
 930:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">procedures_trailing</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/!:nodoc:/</span>
 931:         <span class="ruby-identifier">indicated_method</span> = <span class="ruby-keyword kw">nil</span>
 932:         <span class="ruby-identifier">indicated_file</span>   = <span class="ruby-keyword kw">nil</span>
 933:         <span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">all_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">toplevel</span><span class="ruby-operator">|</span>
 934:           <span class="ruby-identifier">indicated_method</span> = <span class="ruby-identifier">toplevel</span>.<span class="ruby-identifier">find_local_symbol</span>(<span class="ruby-identifier">proc</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 935:           <span class="ruby-identifier">indicated_file</span> = <span class="ruby-identifier">name</span>
 936:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">indicated_method</span>
 937:         <span class="ruby-keyword kw">end</span>
 938: 
 939:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">indicated_method</span>
 940:           <span class="ruby-identifier">external_method</span> =
 941:             <span class="ruby-identifier">initialize_external_method</span>(<span class="ruby-identifier">generic_name</span>, <span class="ruby-identifier">proc</span>,
 942:                                        <span class="ruby-identifier">indicated_method</span>.<span class="ruby-identifier">params</span>,
 943:                                        <span class="ruby-identifier">indicated_file</span>,
 944:                                        <span class="ruby-identifier">indicated_method</span>.<span class="ruby-identifier">comment</span>)
 945: 
 946:           <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">external_method</span>
 947: 
 948:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">external_method</span>
 949:           <span class="ruby-identifier">set_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">generic_name</span>, <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">@@public_methods</span>)
 950:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>.<span class="ruby-identifier">include_requires?</span>(<span class="ruby-identifier">indicated_file</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>)
 951:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_require</span>(<span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">indicated_file</span>, <span class="ruby-value str">&quot;&quot;</span>))
 952:           <span class="ruby-keyword kw">end</span>
 953:           <span class="ruby-identifier">check_public_methods</span>(<span class="ruby-identifier">external_method</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>)
 954: 
 955:         <span class="ruby-keyword kw">else</span>
 956:           <span class="ruby-identifier">@@external_aliases</span> <span class="ruby-operator">&lt;&lt;</span> {
 957:             <span class="ruby-value str">&quot;new_name&quot;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">generic_name</span>,
 958:             <span class="ruby-value str">&quot;old_name&quot;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">proc</span>,
 959:             <span class="ruby-value str">&quot;file_or_module&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>,
 960:             <span class="ruby-value str">&quot;visibility&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">find_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">generic_name</span>, <span class="ruby-identifier">@@public_methods</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">visibility_default</span>
 961:           }
 962:         <span class="ruby-keyword kw">end</span>
 963:       <span class="ruby-keyword kw">end</span>
 964: 
 965:     } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">interface_code</span> <span class="ruby-comment cmt"># End of interface_code.split(&quot;\n&quot;).each ...</span>
 966: 
 967:     <span class="ruby-comment cmt">#</span>
 968:     <span class="ruby-comment cmt"># Already imported methods are removed from @@public_methods.</span>
 969:     <span class="ruby-comment cmt"># Remainders are assumed to be imported from other modules.</span>
 970:     <span class="ruby-comment cmt">#</span>
 971:     <span class="ruby-identifier">@@public_methods</span>.<span class="ruby-identifier">delete_if</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span> <span class="ruby-identifier">method</span>[<span class="ruby-value str">&quot;entity_is_discovered&quot;</span>]}
 972: 
 973:     <span class="ruby-identifier">@@public_methods</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">pub_meth</span><span class="ruby-operator">|</span>
 974:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;file_or_module&quot;</span>].<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
 975:       <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;used_modules&quot;</span>].<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">used_mod</span><span class="ruby-operator">|</span>
 976:         <span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">all_classes_and_modules</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">modules</span><span class="ruby-operator">|</span>
 977:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">used_mod</span> <span class="ruby-operator">||</span>
 978:               <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">used_mod</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">&amp;&amp;</span>
 979:               <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>
 980:             <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">method_list</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">meth</span><span class="ruby-operator">|</span>
 981:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;name&quot;</span>] <span class="ruby-operator">||</span>
 982:                   <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;name&quot;</span>].<span class="ruby-identifier">upcase</span> <span class="ruby-operator">&amp;&amp;</span>
 983:                   <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span>
 984:                 <span class="ruby-identifier">new_meth</span> = <span class="ruby-identifier">initialize_public_method</span>(<span class="ruby-identifier">meth</span>,
 985:                                                     <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">name</span>)
 986:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;local_name&quot;</span>]
 987:                   <span class="ruby-identifier">new_meth</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">pub_meth</span>[<span class="ruby-value str">&quot;local_name&quot;</span>]
 988:                 <span class="ruby-keyword kw">end</span>
 989: 
 990:                 <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
 991: 
 992:                 <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">new_meth</span>
 993:               <span class="ruby-keyword kw">end</span>
 994:             }
 995:           <span class="ruby-keyword kw">end</span>
 996:         }
 997:       }
 998:     }
 999: 
1000:     <span class="ruby-identifier">container</span>
1001:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-subprogram-method" class="method-detail ">
				<a name="method-i-parse_subprogram"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_subprogram</span><span
						class="method-args">(subprogram, params, comment, code, before_contains=nil, function=nil, prefix=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parse arguments, comment, code of subroutine and function.  Return <a
href="../AnyMethod.html">AnyMethod</a> object.
</p>
					

					
					<div class="method-source-code"
						id="parse-subprogram-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1007</span>
1007:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_subprogram</span>(<span class="ruby-identifier">subprogram</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">code</span>,
1008:                        <span class="ruby-identifier">before_contains</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">function</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">prefix</span>=<span class="ruby-keyword kw">nil</span>)
1009:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">false</span>
1010:     <span class="ruby-identifier">prefix</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">prefix</span>
1011:     <span class="ruby-identifier">arguments</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\(/</span>, <span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\)/</span>, <span class="ruby-value str">&quot;&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>
1012:     <span class="ruby-identifier">args_comment</span>, <span class="ruby-identifier">params_opt</span> =
1013:       <span class="ruby-identifier">find_arguments</span>(<span class="ruby-identifier">arguments</span>, <span class="ruby-identifier">code</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^s*?contains\s*?(!.*?)?$.*/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">&quot;&quot;</span>),
1014:                      <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>)
1015:     <span class="ruby-identifier">params_opt</span> = <span class="ruby-value str">&quot;( &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params_opt</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; ) &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params_opt</span>
1016:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">params_opt</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;&quot;</span>
1017:     <span class="ruby-identifier">namelist_comment</span> = <span class="ruby-identifier">find_namelists</span>(<span class="ruby-identifier">code</span>, <span class="ruby-identifier">before_contains</span>)
1018: 
1019:     <span class="ruby-identifier">block_comment</span> = <span class="ruby-identifier">find_comments</span> <span class="ruby-identifier">comment</span>
1020:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">function</span>
1021:       <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-node">&quot;&lt;b&gt;&lt;em&gt; Function &lt;/em&gt;&lt;/b&gt; :: &lt;em&gt;#{prefix}&lt;/em&gt;\n&quot;</span>
1022:     <span class="ruby-keyword kw">else</span>
1023:       <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-node">&quot;&lt;b&gt;&lt;em&gt; Subroutine &lt;/em&gt;&lt;/b&gt; :: &lt;em&gt;#{prefix}&lt;/em&gt;\n&quot;</span>
1024:     <span class="ruby-keyword kw">end</span>
1025:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">args_comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args_comment</span>
1026:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block_comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_comment</span>
1027:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">namelist_comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">namelist_comment</span>
1028: 
1029:     <span class="ruby-comment cmt"># For output source code</span>
1030:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">start_collecting_tokens</span>
1031:     <span class="ruby-identifier">subprogram</span>.<span class="ruby-identifier">add_token</span> <span class="ruby-constant">Token</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>,<span class="ruby-value">1</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">code</span>)
1032: 
1033:     <span class="ruby-identifier">subprogram</span>
1034:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-visibility-method" class="method-detail ">
				<a name="method-i-parse_visibility"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_visibility</span><span
						class="method-args">(code, default, container)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parse visibility
</p>
					

					
					<div class="method-source-code"
						id="parse-visibility-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1221</span>
1221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">code</span>, <span class="ruby-identifier">default</span>, <span class="ruby-identifier">container</span>)
1222:     <span class="ruby-identifier">result</span> = []
1223:     <span class="ruby-identifier">visibility_default</span> = <span class="ruby-identifier">default</span> <span class="ruby-operator">||</span> <span class="ruby-value">:public</span>
1224: 
1225:     <span class="ruby-identifier">used_modules</span> = []
1226:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">includes</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">used_modules</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">name</span>} <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>
1227: 
1228:     <span class="ruby-identifier">remaining_code</span> = <span class="ruby-identifier">code</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\s*?type[\s\,]+.*?\s+end\s+type.*?$/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">&quot;&quot;</span>)
1229:     <span class="ruby-identifier">remaining_code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1230:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\s*?private\s*?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1231:         <span class="ruby-identifier">visibility_default</span> = <span class="ruby-value">:private</span>
1232:         <span class="ruby-keyword kw">break</span>
1233:       <span class="ruby-keyword kw">end</span>
1234:     } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remaining_code</span>
1235: 
1236:     <span class="ruby-identifier">remaining_code</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1237:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\s*?private\s*?(::)?\s+(.*)\s*?(!.*?)?/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1238:         <span class="ruby-identifier">methods</span> = <span class="ruby-node">$2</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/!.*$/</span>, <span class="ruby-value str">''</span>)
1239:         <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">meth</span><span class="ruby-operator">|</span>
1240:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/!.*$/</span>, <span class="ruby-value str">''</span>)
1241:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/:/</span>, <span class="ruby-value str">''</span>)
1242:           <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> {
1243:             <span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>,
1244:             <span class="ruby-value str">&quot;visibility&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:private</span>,
1245:             <span class="ruby-value str">&quot;used_modules&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">used_modules</span>.<span class="ruby-identifier">clone</span>,
1246:             <span class="ruby-value str">&quot;file_or_module&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>,
1247:             <span class="ruby-value str">&quot;entity_is_discovered&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
1248:             <span class="ruby-value str">&quot;local_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
1249:           }
1250:         }
1251:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/^\s*?public\s*?(::)?\s+(.*)\s*?(!.*?)?/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1252:         <span class="ruby-identifier">methods</span> = <span class="ruby-node">$2</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/!.*$/</span>, <span class="ruby-value str">''</span>)
1253:         <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;,&quot;</span>).<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">meth</span><span class="ruby-operator">|</span>
1254:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/!.*$/</span>, <span class="ruby-value str">''</span>)
1255:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/:/</span>, <span class="ruby-value str">''</span>)
1256:           <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> {
1257:             <span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">strip</span>,
1258:             <span class="ruby-value str">&quot;visibility&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:public</span>,
1259:             <span class="ruby-value str">&quot;used_modules&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">used_modules</span>.<span class="ruby-identifier">clone</span>,
1260:             <span class="ruby-value str">&quot;file_or_module&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">container</span>,
1261:             <span class="ruby-value str">&quot;entity_is_discovered&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
1262:             <span class="ruby-value str">&quot;local_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
1263:           }
1264:         }
1265:       <span class="ruby-keyword kw">end</span>
1266:     } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remaining_code</span>
1267: 
1268:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>
1269:       <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">vis_info</span><span class="ruby-operator">|</span>
1270:         <span class="ruby-identifier">vis_info</span>[<span class="ruby-value str">&quot;parent&quot;</span>] = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
1271:       }
1272:     <span class="ruby-keyword kw">end</span>
1273: 
1274:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">result</span>
1275:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-empty-head-lines-method" class="method-detail ">
				<a name="method-i-remove_empty_head_lines"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_empty_head_lines</span><span
						class="method-args">(text)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Empty lines in header are removed
</p>
					

					
					<div class="method-source-code"
						id="remove-empty-head-lines-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1615</span>
1615:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_empty_head_lines</span>(<span class="ruby-identifier">text</span>)
1616:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>
1617:     <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1618:     <span class="ruby-identifier">header</span> = <span class="ruby-keyword kw">true</span>
1619:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">delete_if</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1620:       <span class="ruby-identifier">header</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\S/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1621:       <span class="ruby-identifier">header</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-regexp re">/^\s*?$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1622:     }
1623:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1624:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-header-marker-method" class="method-detail ">
				<a name="method-i-remove_header_marker"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_header_marker</span><span
						class="method-args">(text)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
header marker &#8220;=&#8221;, &#8220;==&#8221;, &#8230; are removed
</p>
					

					
					<div class="method-source-code"
						id="remove-header-marker-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1629</span>
1629:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_header_marker</span>(<span class="ruby-identifier">text</span>)
1630:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\s?(=+)/</span>, <span class="ruby-value str">'&lt;tt&gt;&lt;/tt&gt;\1'</span>)
1631:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-private-comments-method" class="method-detail ">
				<a name="method-i-remove_private_comments"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_private_comments</span><span
						class="method-args">(body)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="remove-private-comments-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1633</span>
1633:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-identifier">body</span>)
1634:     <span class="ruby-identifier">body</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\s*!--\s*?$.*?^\s*!\+\+\s*?$/</span>, <span class="ruby-value str">''</span>)
1635:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">body</span>
1636:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-trailing-alias-method" class="method-detail ">
				<a name="method-i-remove_trailing_alias"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_trailing_alias</span><span
						class="method-args">(text)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Remove &#8220;<a href="../Alias.html">Alias</a> for&#8221; in end of
comments
</p>
					

					
					<div class="method-source-code"
						id="remove-trailing-alias-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1592</span>
1592:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_trailing_alias</span>(<span class="ruby-identifier">text</span>)
1593:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">text</span>
1594:     <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">reverse</span>
1595:     <span class="ruby-identifier">comment_block</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
1596:     <span class="ruby-identifier">checked</span> = <span class="ruby-keyword kw">false</span>
1597:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1598:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">checked</span>
1599:         <span class="ruby-keyword kw">if</span> <span class="ruby-node">/^\s?#{INTERNAL_ALIAS_MES}/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">||</span>
1600:             <span class="ruby-node">/^\s?#{EXTERNAL_ALIAS_MES}/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">line</span>
1601:           <span class="ruby-identifier">checked</span> = <span class="ruby-keyword kw">true</span>
1602:           <span class="ruby-keyword kw">next</span>
1603:         <span class="ruby-keyword kw">end</span>
1604:       <span class="ruby-keyword kw">end</span>
1605:       <span class="ruby-identifier">comment_block</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">line</span>
1606:     <span class="ruby-keyword kw">end</span>
1607:     <span class="ruby-identifier">nice_lines</span> = <span class="ruby-identifier">comment_block</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1608:     <span class="ruby-identifier">nice_lines</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;&quot;</span>
1609:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">nice_lines</span>
1610:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="semicolon-to-linefeed-method" class="method-detail ">
				<a name="method-i-semicolon_to_linefeed"></a>

				<div class="method-heading">
				
					<span class="method-name">semicolon_to_linefeed</span><span
						class="method-args">(text)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Semicolons are replaced to line feed.
</p>
					

					
					<div class="method-source-code"
						id="semicolon-to-linefeed-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1499</span>
1499:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">semicolon_to_linefeed</span>(<span class="ruby-identifier">text</span>)
1500:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>
1501:     <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1502:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">collect!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1503:       <span class="ruby-identifier">words</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&quot;</span>)
1504:       <span class="ruby-identifier">commentout</span> = <span class="ruby-keyword kw">false</span>
1505:       <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span>
1506:       <span class="ruby-identifier">words</span>.<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">char</span><span class="ruby-operator">|</span>
1507:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">squote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">dquote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">commentout</span>)
1508:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1509:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;!&quot;</span> ; <span class="ruby-identifier">commentout</span> = <span class="ruby-keyword kw">true</span> ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1510:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">true</span>     ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1511:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">true</span>     ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1512:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;;&quot;</span> ;                     <span class="ruby-value str">&quot;\n&quot;</span>
1513:           <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1514:           <span class="ruby-keyword kw">end</span>
1515:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">commentout</span>
1516:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1517:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">squote</span>
1518:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1519:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1520:           <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1521:           <span class="ruby-keyword kw">end</span>
1522:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">dquote</span>
1523:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1524:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1525:           <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1526:           <span class="ruby-keyword kw">end</span>
1527:         <span class="ruby-keyword kw">end</span>
1528:       }
1529:       <span class="ruby-identifier">words</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
1530:     }
1531:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1532:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="set-visibility-method" class="method-detail ">
				<a name="method-i-set_visibility"></a>

				<div class="method-heading">
				
					<span class="method-name">set_visibility</span><span
						class="method-args">(container, subname, visibility_default, visibility_info)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Set visibility
</p>
<p>
&#8220;subname&#8221; element of &#8220;visibility_info&#8220; is deleted.
</p>
					

					
					<div class="method-source-code"
						id="set-visibility-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1282</span>
1282:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">subname</span>, <span class="ruby-identifier">visibility_default</span>, <span class="ruby-identifier">visibility_info</span>)
1283:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">subname</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">visibility_default</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">visibility_info</span>
1284:     <span class="ruby-identifier">not_found</span> = <span class="ruby-keyword kw">true</span>
1285:     <span class="ruby-identifier">visibility_info</span>.<span class="ruby-identifier">collect!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">info</span><span class="ruby-operator">|</span>
1286:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;name&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">subname</span> <span class="ruby-operator">||</span>
1287:           <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">ignore_case</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;name&quot;</span>].<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">subname</span>.<span class="ruby-identifier">upcase</span>
1288:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;file_or_module&quot;</span>].<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
1289:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>([<span class="ruby-identifier">subname</span>], <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;visibility&quot;</span>])
1290:           <span class="ruby-identifier">info</span>[<span class="ruby-value str">&quot;entity_is_discovered&quot;</span>] = <span class="ruby-keyword kw">true</span>
1291:           <span class="ruby-identifier">not_found</span> = <span class="ruby-keyword kw">false</span>
1292:         <span class="ruby-keyword kw">end</span>
1293:       <span class="ruby-keyword kw">end</span>
1294:       <span class="ruby-identifier">info</span>
1295:     }
1296:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">not_found</span>
1297:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>([<span class="ruby-identifier">subname</span>], <span class="ruby-identifier">visibility_default</span>)
1298:     <span class="ruby-keyword kw">else</span>
1299:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">container</span>
1300:     <span class="ruby-keyword kw">end</span>
1301:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="united-to-one-line-method" class="method-detail ">
				<a name="method-i-united_to_one_line"></a>

				<div class="method-heading">
				
					<span class="method-name">united_to_one_line</span><span
						class="method-args">(f90src)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Continuous lines are united.
</p>
<p>
Comments in continuous lines are removed.
</p>
					

					
					<div class="method-source-code"
						id="united-to-one-line-source">
<pre>
      <span class="ruby-comment cmt"># File lib/rdoc/parser/f95.rb, line 1381</span>
1381:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">united_to_one_line</span>(<span class="ruby-identifier">f90src</span>)
1382:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">f90src</span>
1383:     <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">f90src</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
1384:     <span class="ruby-identifier">previous_continuing</span> = <span class="ruby-keyword kw">false</span>
1385:     <span class="ruby-identifier">now_continuing</span> = <span class="ruby-keyword kw">false</span>
1386:     <span class="ruby-identifier">body</span> = <span class="ruby-value str">&quot;&quot;</span>
1387:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
1388:       <span class="ruby-identifier">words</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&quot;</span>)
1389:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">words</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">previous_continuing</span>
1390:       <span class="ruby-identifier">commentout</span> = <span class="ruby-keyword kw">false</span>
1391:       <span class="ruby-identifier">brank_flag</span> = <span class="ruby-keyword kw">true</span> ; <span class="ruby-identifier">brank_char</span> = <span class="ruby-value str">&quot;&quot;</span>
1392:       <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span>    ; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span>
1393:       <span class="ruby-identifier">ignore</span> = <span class="ruby-keyword kw">false</span>
1394:       <span class="ruby-identifier">words</span>.<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">char</span><span class="ruby-operator">|</span>
1395:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">previous_continuing</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">brank_flag</span>
1396:           <span class="ruby-identifier">now_continuing</span> = <span class="ruby-keyword kw">true</span>
1397:           <span class="ruby-identifier">ignore</span>         = <span class="ruby-keyword kw">true</span>
1398:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1399:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;!&quot;</span>                       ; <span class="ruby-keyword kw">break</span>
1400:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot; &quot;</span> ; <span class="ruby-identifier">brank_char</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">char</span>  ; <span class="ruby-keyword kw">next</span> <span class="ruby-value str">&quot;&quot;</span>
1401:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;&amp;&quot;</span>
1402:             <span class="ruby-identifier">brank_flag</span> = <span class="ruby-keyword kw">false</span>
1403:             <span class="ruby-identifier">now_continuing</span> = <span class="ruby-keyword kw">false</span>
1404:             <span class="ruby-keyword kw">next</span> <span class="ruby-value str">&quot;&quot;</span>
1405:           <span class="ruby-keyword kw">else</span>
1406:             <span class="ruby-identifier">brank_flag</span>     = <span class="ruby-keyword kw">false</span>
1407:             <span class="ruby-identifier">now_continuing</span> = <span class="ruby-keyword kw">false</span>
1408:             <span class="ruby-identifier">ignore</span>         = <span class="ruby-keyword kw">false</span>
1409:             <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">brank_char</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">char</span>
1410:           <span class="ruby-keyword kw">end</span>
1411:         <span class="ruby-keyword kw">end</span>
1412:         <span class="ruby-identifier">ignore</span> = <span class="ruby-keyword kw">false</span>
1413: 
1414:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">now_continuing</span>
1415:           <span class="ruby-keyword kw">next</span> <span class="ruby-value str">&quot;&quot;</span>
1416:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">squote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">dquote</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">commentout</span>)
1417:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1418:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;!&quot;</span> ; <span class="ruby-identifier">commentout</span> = <span class="ruby-keyword kw">true</span>     ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1419:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">true</span>         ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1420:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">true</span>         ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1421:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;&amp;&quot;</span> ; <span class="ruby-identifier">now_continuing</span> = <span class="ruby-keyword kw">true</span> ; <span class="ruby-keyword kw">next</span> <span class="ruby-value str">&quot;&quot;</span>
1422:           <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1423:           <span class="ruby-keyword kw">end</span>
1424:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">commentout</span>
1425:           <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1426:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">squote</span>
1427:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1428:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\'&quot;</span>; <span class="ruby-identifier">squote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1429:           <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1430:           <span class="ruby-keyword kw">end</span>
1431:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">dquote</span>
1432:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">char</span>
1433:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\&quot;&quot;</span>; <span class="ruby-identifier">dquote</span> = <span class="ruby-keyword kw">false</span> ; <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1434:           <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">next</span> <span class="ruby-identifier">char</span>
1435:           <span class="ruby-keyword kw">end</span>
1436:         <span class="ruby-keyword kw">end</span>
1437:       }
1438:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ignore</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">previous_continuing</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">brank_flag</span>
1439:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">previous_continuing</span>
1440:           <span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">words</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
1441:         <span class="ruby-keyword kw">else</span>
1442:           <span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">words</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
1443:         <span class="ruby-keyword kw">end</span>
1444:       <span class="ruby-keyword kw">end</span>
1445:       <span class="ruby-identifier">previous_continuing</span> = <span class="ruby-identifier">now_continuing</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1446:       <span class="ruby-identifier">now_continuing</span> = <span class="ruby-keyword kw">nil</span>
1447:     }
1448:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">body</span>
1449:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

